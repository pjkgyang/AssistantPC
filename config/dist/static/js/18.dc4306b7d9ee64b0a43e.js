webpackJsonp([18],{"1saR":function(t,e){},TKy0:function(t,e){},X1iR:function(t,e){},XZD3:function(t,e,a){"use strict";var s=a("V/8j"),n={data:function(){return{schoolNamesOptions:[],schoolNames:"",unit:{dwbh:"",dwmc:""}}},mounted:function(){this.getDwByUser(!0,"")},methods:{changeUnit:function(t){if(t){var e;e=this.schoolNamesOptions.find(function(e){return e.wid===t}),this.unit.dwbh=e.wid,this.unit.dwmc=e.mc,this.$emit("handleChangeUnit",this.unit)}},remoteMethod:function(t){this.getDwByUser("",t)},getDwByUser:function(t,e){var a=this;Object(s.c)({dwlx:"",curPage:1,pageSize:9,keyword:e}).then(function(e){var s=e.data;"success"==s.state&&s.data.rows&&(a.schoolNamesOptions=s.data.rows,a.schoolNames=a.schoolNamesOptions[0].jc,a.unit.dwbh=s.data.rows[0].wid,a.unit.dwmc=s.data.rows[0].mc,t&&a.$emit("handleChangeUnit",a.unit))})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("span",{staticClass:"filter-weight"},[t._v("选择学校:")]),t._v(" "),a("el-select",{staticStyle:{width:"300px"},attrs:{filterable:"",remote:"",clearable:"",placeholder:"请选择",size:"small","remote-method":t.remoteMethod},on:{change:t.changeUnit},model:{value:t.schoolNames,callback:function(e){t.schoolNames=e},expression:"schoolNames"}},t._l(t.schoolNamesOptions,function(t,e){return a("el-option",{key:e,attrs:{label:t.mc,value:t.wid}})}))],1)},staticRenderFns:[]};var r=a("VU/8")(n,i,!1,function(t){a("1saR")},null,null);e.a=r.exports},cxa7:function(t,e,a){"use strict";(function(t){var s=a("mvHQ"),n=a.n(s);e.a={name:"treeTable",props:["list"],data:function(){return{isDesc:!1,treeDataSource:[]}},watch:{list:{handler:function(){this.initTreeData()},deep:!0},isDesc:function(t,e){this.$emit("orderByFunc",t)}},computed:{},methods:{initTreeData:function(){var t=JSON.parse(n()(this.list));!function t(e,a){e.map(function(e,s){e.isExpand=!!e.isExpand&&e.isExpand,e.children=e.children||[],e.level=a,e.bLeft=1===a?34:16*(a-2)+34,e.Experience=e.Experience||"无",e.children.length>0&&t(e.children,a+1)})}(t,1),this.treeDataSource=t},getMore:function(){alert("滚动到底部加载更多"),t("#scrollWrap").mCustomScrollbar("scrollTo","top",{scrollInertia:0})},actionFunc:function(t,e,a){this.$emit("actionFunc",t,e,a)},deleteFunc:function(t){this.$emit("deleteFunc",t)},startRejectFunc:function(t,e){this.$emit("startRejectFunc",t,e)},handlerExpand:function(t){this.$emit("handlerExpand",t)}},components:{treeItem:function(){return a.e(130).then(a.bind(null,"gaDD"))}},mounted:function(){var t=this;t.$nextTick(function(){t.initTreeData()})}}}).call(e,a("7t+N"))},hzP1:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("bOdI"),n=a.n(s),i=a("cxa7"),r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tree-table"},[t._m(0),t._v(" "),a("div",{staticClass:"tree-wrap",attrs:{id:"scrollWrap"}},[a("div",{staticClass:"tree-body"},[t.treeDataSource.length>0?a("table",[a("tbody",[a("tr",[a("td",t._l(t.treeDataSource,function(e,s){return a("tree-item",{key:"root_node_"+s,attrs:{root:0,num:s,nodes:t.treeDataSource.length,trees:t.treeDataSource,model:e},on:{actionFunc:t.actionFunc,deleteFunc:t.deleteFunc,startRejectFunc:t.startRejectFunc,handlerExpand:t.handlerExpand,"update:trees":function(e){t.treeDataSource=e},"update:model":function(t){e=t}}})}))])])]):a("table",[t._m(1)])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tree-head"},[e("table",[e("tr",[e("td",{staticClass:"td1"},[this._v("组织部门")]),this._v(" "),e("td",{staticClass:"td2"},[this._v("排序")]),this._v(" "),e("td",{staticClass:"td3"},[this._v("状态")]),this._v(" "),e("td",{staticClass:"td6"},[this._v("操作")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{staticStyle:{"text-align":"center"}},[this._v("暂无数据")])])}]};var o=function(t){a("X1iR")},c=a("VU/8")(i.a,r,!1,o,null,null).exports,l=a("XZD3"),d=n()({data:function(){return{dialogVisible:!1,dwbh:"",keyword:"",formData:{bmbm:"",bmmc:"",sfzk:1,sortCode:""},curTreeData:{},isEdit:!1,childData:{},treeDataSource:[],parentNode:[]}},mounted:function(){this.getDwByUser(!0,"")},components:{treeTable:c},methods:{orderByFunc:function(t){alert("排序"),alert(t)},actionFunc:function(t,e,a){this.curTreeData=t,"add"==e?(this.isEdit=!1,this.dialogVisible=!0):(this.parentNode=a,this.isEdit=!0,this.formData.bmmc=t.title,this.formData.sfzk=t.isExpand,this.formData.sortCode=t.sortCode,this.dialogVisible=!0)},deleteFunc:function(t){var e=this;this.$confirm("是否删除该部门?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$post(e.API.deleteDept,{wid:t.id}).then(function(t){"success"==t.state?e.$message({message:"删除成功~",type:"success"}):e.$message({message:t.msg,type:"error"})})}).catch(function(){})},startRejectFunc:function(t,e){var a=this;this.$post("start"==e?this.API.enableDept:this.API.disableDept,{wid:t.id}).then(function(t){"success"==t.state?a.$message({message:"start"==e?"部门已启用~":"部门已禁用~",type:"success"}):a.$message({message:t.msg,type:"error"})})},handleCommit:function(){var t=this;this.$post(this.API.saveDept,{wid:this.isEdit?this.curTreeData.id:"",dwbh:this.dwbh,dwmc:this.dwmc,mc:this.formData.bmmc,parentid:this.curTreeData.parentid,px:this.formData.sortCode,sfzk:this.formData.sfzk}).then(function(e){"success"==e.state?(t.$message({message:"添加成功~",type:"success"}),t.isEdit&&(t.$set(t.curTreeData,"title",t.formData.bmmc),t.$set(t.curTreeData,"isExpand",t.formData.sfzk),t.$set(t.curTreeData,"sortCode",t.formData.sortCode),t.parentNode.children.sort(function(t,e){return t.sortCode-e.sortCode}))):t.$message({message:e.msg,type:"error"})})},handleChangeUnit:function(t){this.dwbh=t.dwbh,this.dwmc=t.dwmc,this.treeDept()},handlerExpand:function(t){t.isExpand=!t.isExpand},treeDept:function(){var t=this;this.$get(this.API.treeDeptWithUnit,{dwbh:this.dwbh,dwmc:this.dwmc,zts:"1,3"}).then(function(e){"success"==e.state&&(t.treeDataSource=e.data)})}}},"components",{chooseSchool:l.a}),u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menus-tree"},[a("div",[a("chooseSchool",{on:{handleChangeUnit:t.handleChangeUnit}})],1),t._v(" "),a("br"),t._v(" "),a("div",[a("tree-table",{ref:"recTree",attrs:{list:t.treeDataSource},on:{"update:list":function(e){t.treeDataSource=e},actionFunc:t.actionFunc,deleteFunc:t.deleteFunc,startRejectFunc:t.startRejectFunc,handlerExpand:t.handlerExpand,orderByFunc:t.orderByFunc}})],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"600px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"form",staticStyle:{padding:"12px"},attrs:{model:t.formData,"label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"部门名称",required:""}},[a("el-input",{attrs:{size:"mini"},model:{value:t.formData.bmmc,callback:function(e){t.$set(t.formData,"bmmc",e)},expression:"formData.bmmc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否展开",required:""}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:t.formData.sfzk,callback:function(e){t.$set(t.formData,"sfzk",e)},expression:"formData.sfzk"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"排序",required:"",size:"mini"}},[a("el-input",{attrs:{type:"number"},model:{value:t.formData.sortCode,callback:function(e){t.$set(t.formData,"sortCode",e)},expression:"formData.sortCode"}})],1),t._v(" "),a("el-form-item",{attrs:{"text-right":""}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleCommit}},[t._v("确定")]),t._v(" "),a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(d,u,!1,function(t){a("TKy0")},null,null);e.default=h.exports}});
//# sourceMappingURL=18.dc4306b7d9ee64b0a43e.js.map