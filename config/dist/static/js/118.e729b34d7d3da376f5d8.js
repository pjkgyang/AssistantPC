webpackJsonp([118],{Usor:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("aCns"),n=s("oFuF"),a={data:function(){return{dialogVisible:!1,currentPage:1,pageSize:18,dataList:{},routePath:"",queryMark:"",jsztRadio:"0",jsztMenu:[],keyword:"",jszts:"",yf:"",wid:"",rygh:"",index:""}},props:{isJsqd:{type:Boolean,default:!1}},methods:{handleSearch:function(){this.ydwtshgsxqb()},handleFilterJSZT:function(t){this.jszts=t,this.ydwtshgsxqb()},handleCommit:function(){this.xgjszt()},handleXxwt:function(t,e,s){var i=this;this.wid=t[0],this.rygh=t[1],this.index=e;var n=void 0;if("问题标题"==s[e].zh){n="/questionDetail";var a=this.$router.resolve({path:n,query:{wid:t[0]}});window.open(a.href,"_blank")}"结算状态"==s[e].zh&&this.$get(this.API.nfxgjszt,{rygh:t[1],wid:t[0]}).then(function(t){"success"==t.state&&(t.data?i.dialogVisible=!0:i.$alert("对不起，您无权修改结算状态!如有疑问，请联系管理员","提示",{confirmButtonText:"确定",type:"warning"}))}),"核准工时"==s[e].zh&&this.isJsqd&&this.$get(this.API.nfxggs,{rygh:t[1],wid:t[0]}).then(function(e){"success"==e.state&&(e.data?i.$prompt("请输入工时","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+(\.\d+)?$/,inputErrorMessage:"工时格式不正确"}).then(function(e){var s=e.value;i.$get(i.API.xggs,{wid:t[0],rygh:t[1],gs:s}).then(function(t){"success"==t.state&&i.$alert("修改成功","提示",{confirmButtonText:"确定",callback:function(t){i.ydwtshgsxqb()}})})}).catch(function(){}):i.$alert("对不起，您无权修改工时!如有疑问，请联系管理员;","提示",{confirmButtonText:"确定",type:"warning"}))})},xgjszt:function(){var t=this;this.$get(this.API.xgjszt,{yf:this.yf,wid:this.wid,rygh:this.rygh,jszt:this.jsztRadio}).then(function(e){"success"==e.state&&("0"!=t.jsztRadio&&t.ydwtshgsxqb(),t.$message({showClose:!0,message:"保存成功~",type:"success"}),t.dialogVisible=!1)})},handleExport:function(){window.open(window.baseurl+"assessment/exportYdwtshgsxqb.do?yf="+this.yf+"&keyword="+this.keyword+"&jszt="+this.jszts+"&isPersonal=true")},handleCurrentChange:function(t){this.currentPage=t,this.ydwtshgsxqb()},handleChangeYf:function(){this.ydwtshgsxqb()},ydwtshgsxqb:function(){var t=this;this.$get(this.API.ydwtshgsxqb,{curPage:this.currentPage,pageSize:this.pageSize,isPersonal:!this.isJsqd,yf:this.yf,jszt:this.jszts,keyword:this.keyword}).then(function(e){"success"==e.state&&(t.dataList=e.data)})}},mounted:function(){Object(n.n)("wtgsjszt")?this.jsztMenu=Object(n.n)("wtgsjszt"):Object(n.i)("wtgsjszt",this.jsztMenu,!0);var t=(new Date).getFullYear()+"-"+((new Date).getMonth()+1<10?"0"+((new Date).getMonth()+1):(new Date).getMonth()+1);this.yf=Object(n.m)(t),this.ydwtshgsxqb()},components:{reportTable:i.a}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pd-10"},[s("div",{staticClass:"bgfff"},[s("div",{attrs:{flex:""}},[s("p",{staticClass:"query-title"},[t._v("高级查询:")]),t._v(" "),s("p",[s("el-input",{staticStyle:{width:"493px"},attrs:{size:"mini",placeholder:"请输入问题标题/问题编号/发布人"},on:{change:t.handleSearch},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),t._v("　\n              "),s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handleSearch}},[t._v("查询")])],1)]),t._v(" "),s("div",{staticStyle:{margin:"10px 0"},attrs:{flex:""}},[s("p",{staticClass:"query-title"},[t._v("月份:")]),t._v(" "),s("p",[s("el-date-picker",{attrs:{size:"mini","value-format":"yyyy-MM",type:"month",placeholder:"选择月"},on:{change:t.handleChangeYf},model:{value:t.yf,callback:function(e){t.yf=e},expression:"yf"}})],1)]),t._v(" "),s("div",{attrs:{flex:""}},[s("p",{staticClass:"query-title"},[t._v("结算状态:")]),t._v(" "),s("p",{staticClass:"query-list"},[s("span",{class:{"bg-active":""==t.jszts},on:{click:function(e){t.handleFilterJSZT("")}}},[t._v("全部")]),t._v(" "),t._l(t.jsztMenu,function(e){return s("span",{key:e.id,class:{"bg-active":t.jszts==e.label},on:{click:function(s){t.handleFilterJSZT(e.label)}}},[t._v(t._s(e.mc))])})],2)]),t._v(" "),s("div",{attrs:{"text-right":""}},[s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handleExport}},[t._v("导出")])],1),t._v(" "),s("reportTable",{attrs:{type:"shgs",tableData:t.dataList,pageShow:!0,currentPage:t.currentPage,pageSize:t.pageSize,exportShow:!1,indexArr:[],widthArr:[3],rowWidth:"300",Width:"140",Height:320},on:{handleCurrentChange:t.handleCurrentChange,handleXxwt:t.handleXxwt}})],1),t._v(" "),s("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"500px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("div",{staticClass:"jszt-dialog"},[s("h4",[t._v("请选择结算标志:")]),t._v(" "),s("el-radio-group",{model:{value:t.jsztRadio,callback:function(e){t.jsztRadio=e},expression:"jsztRadio"}},t._l(t.jsztMenu,function(e,i){return s("el-radio",{key:i,attrs:{label:e.label}},[t._v(t._s(e.mc))])}))],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"mini"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handleCommit}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var o=s("VU/8")(a,r,!1,function(t){s("Y+SD")},"data-v-38be4288",null);e.default=o.exports},"Y+SD":function(t,e){}});
//# sourceMappingURL=118.e729b34d7d3da376f5d8.js.map