{"version":3,"sources":["webpack:///src/views/BusinessPage/taskLog.vue","webpack:///./src/views/BusinessPage/taskLog.vue?ee7f","webpack:///./src/views/BusinessPage/taskLog.vue"],"names":["taskLog","data","fwList","label","value","startDate","endDate","tableData","dialogDialyVisible","dialogTaskVisible","tasklogDetailVisible","taskName","relevanceTask","dailyValue","pageSize","records","options","ydztValue","fwValue","TaskRelevance","rwgc","total","baseUrl","isRead","keyword","closeDialogNum","taskDetail","pzValue","logDetail","isedit","rwbh","xmbh","sign","nowPage","pzList","isJzuser","isDisabled","mounted","methods","handleReadlog","index","row","_this","this","ydzt","Object","TaskProcess","wid","then","_ref","state","$alert","msg","confirmButtonText","type","handleCloseDetail","handleSaveDetail","_this2","bz","_ref2","handleChoosetxr","queryLogTaskProcess","changeTaskydzt","changeTaskscope","handleTasklogDetail","_this3","_ref3","getLogComments","getLogComment","handleEditDetail","handleDailyPaper","handleDeleteDetail","_this4","$confirm","cancelButtonText","_ref4","catch","handleSubmit","gclx","gcms","gcrq","gs","fjdata","join","addOrUpdateTaskProcess","resetForm","addDailyTasks","chooseRevelenceTask","rwmc","handleCloseDialy","checkTaskLog","oDate1","Date","oDate2","getTime","handleEnterlog","handleCurrentChange","handleDownFile","e","fjbh","target","getAttribute","window","open","baseurl","GetDateStr","DayCount","dd","setDate","getDate","y","getFullYear","m","getMonth","d","curPage","_this5","startDay","endDay","cybh","fw","_ref5","rows","callback","cancel","_this6","_ref6","_this7","_ref7","length","_this8","_ref8","action","activated","sessionStorage","getItem","slice","components","dailyParper","dialogTask","pagination","BusinessPage_taskLog","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","click","_v","size","placeholder","value-format","model","$$v","expression","staticStyle","font-size","width","change","_l","key","href","border","height","scopedSlots","_u","fn","scope","flex","spacearound","$event","$index","_e","color","slot","title","_s","ydzt_display","class","tasklog-ydzt","tasklog-ydzt-yy","prop","show-overflow-tooltip","sortable","fj","data-fj","fjmc","text-align","margin","visible","close-on-click-modal","update:visible","close","disabled","logInfo","addBtnShow","cjsj","xmmc","cpmc","max-height","resize","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/39.3e821b0525d3921aa704.js","sourcesContent":["<template>\r\n  <div class=\"task-log\">\r\n         <div class=\"task-log-addDailyPaper\">\r\n              <el-button type=\"primary\"  @click=\"handleDailyPaper\"><span class=\"el-icon-circle-plus\"></span> 添加日报</el-button>\r\n         </div>\r\n         <div class=\"task-log-date\">\r\n             <el-date-picker v-model=\"startDate\"  type=\"date\" size=\"small\" placeholder=\"选择开始日期\" value-format=\"yyyy-MM-dd\"> </el-date-picker>\r\n            至\r\n             <el-date-picker v-model=\"endDate\" type=\"date\" size=\"small\" placeholder=\"选择结束日期\" value-format=\"yyyy-MM-dd\"></el-date-picker>&nbsp;\r\n              <span style=\"font-size:14px;\">阅读状态 :</span>\r\n              <el-select v-model=\"ydztValue\"   style=\"width:100px\" @change=\"changeTaskydzt\">\r\n                 <el-option label=\"全部\" value=\"\"></el-option>\r\n                 <el-option label=\"未阅\" value=\"0\"></el-option>\r\n                 <el-option label=\"已阅\" value=\"1\"></el-option>\r\n              </el-select>\r\n              &nbsp;\r\n               <span style=\"font-size:14px;\">范围 :</span>\r\n              <el-select v-model=\"fwValue\"   style=\"width:120px\" @change=\"changeTaskscope\">\r\n                 <el-option v-for=\"(fw,index) in fwList\" :label=\"fw.label\" :value=\"fw.value\" :key=\"index\"></el-option>\r\n              </el-select>\r\n              <el-input v-model=\"keyword\" size=\"small\" placeholder=\"项目编号/项目名称/填写人姓名\" style=\"width:230px;\" @change=\"handleEnterlog\"></el-input>\r\n              <el-button type=\"info\" @click=\"checkTaskLog\">查询</el-button>&nbsp;&nbsp;\r\n              <a :href=\"baseUrl+'process/exportPersonnelLog.do?startDay='+startDate+'&endDay='+endDate+'&isRead='+ydztValue+'&cybh='+value+'&fw='+fwValue\" target=\"blank\">导出</a>\r\n         </div>\r\n\r\n         <div class=\"task-log-tabel\">\r\n              <el-table :data=\"tableData\" border style=\"width: 100%\" height=\"calc(100vh - 185px)\"> \r\n                 <el-table-column label=\"操作\" width=\"120\">\r\n                    <template slot-scope=\"scope\">\r\n                      <div flex spacearound> \r\n                        <el-button type=\"text\" size=\"mini\"  @click=\"handleTasklogDetail(scope.$index, scope.row)\">批注</el-button>\r\n                        <el-button v-if=\"scope.row.editable\" type=\"text\" size=\"mini\"  @click=\"handleEditDetail(scope.$index, scope.row)\">编辑</el-button>\r\n                        <el-button v-if=\"scope.row.editable\" type=\"text\" size=\"mini\" style=\"color:#f00\" @click=\"handleDeleteDetail(scope.$index, scope.row)\">删除</el-button>\r\n                      </div>\r\n                    </template>\r\n              </el-table-column>\r\n                  <el-table-column label=\"阅读状态\" width=\"90\" >\r\n                      <template slot-scope=\"scope\">\r\n                         <div slot=\"reference\">\r\n                           <span title=\"点击设为已阅\" class=\"tasklog-ydzt tasklog-ydzt-wy\" v-if=\"scope.row.ydzt == 0\" @click=\"handleReadlog(scope.$index, scope.row)\" >{{scope.row.ydzt_display}}</span>\r\n                           <span :class=\"{'tasklog-ydzt':true,'tasklog-ydzt-yy':scope.row.ydzt==1}\" v-if=\"scope.row.ydzt!=0\">{{scope.row.ydzt ==1?'已阅':scope.row.ydzt_display}}</span>\r\n                         </div>\r\n                      </template>\r\n                  </el-table-column>\r\n                  <el-table-column prop=\"cjrxm\"  label=\"填写人\" width=\"80\"  ></el-table-column>\r\n                  <el-table-column prop=\"xmbh\" label=\"项目编号\"  show-overflow-tooltip  sortable  width=\"110\"></el-table-column>\r\n                  <el-table-column prop=\"xmmc\" label=\"项目名称\"  show-overflow-tooltip  width=\"260\"></el-table-column>\r\n                  <el-table-column prop=\"gcms\" label=\"内容\" show-overflow-tooltip width=\"500\"></el-table-column>\r\n                  <el-table-column prop=\"cpmc_display\" label=\"产品名称\"  show-overflow-tooltip width=\"180\"></el-table-column>\r\n                  <el-table-column prop=\"rwmc_display\" label=\"任务名称\"  show-overflow-tooltip width=\"150\"></el-table-column>\r\n                  <el-table-column prop=\"gcrq\" label=\"日报日期\" width=\"110\" sortable></el-table-column>\r\n                  <el-table-column prop=\"cjsj\" label=\"填写时间\" width=\"160\" sortable></el-table-column>\r\n                  <el-table-column prop=\"gs\"  label=\"工时(小时)\" width=\"90\" ></el-table-column>\r\n                  <el-table-column  label=\"附件\">\r\n                      <template slot-scope=\"scope\">\r\n                         <div slot=\"reference\" class=\"name-wrapper\">\r\n                           <div @click=\"handleDownFile(scope.$index, scope.row,$event)\">\r\n                             <span title=\"点击下载\" v-for=\"(fj,index) in scope.row.fjData\" :key=\"index\" :data-fj=\"fj.fjbh\">{{fj.fjmc}}</span>\r\n                           </div>\r\n                        </div>\r\n                      </template>\r\n                  </el-table-column>\r\n              </el-table>\r\n            <div style=\"text-align:right;margin:10px 0;\" v-if=\"records > 15\">\r\n               <pagination :pageSize=\"pageSize\" :total=\"records\" @handleCurrentChange=\"handleCurrentChange\"></pagination>\r\n            </div>\r\n         </div>  \r\n         <el-dialog :visible.sync=\"dialogDialyVisible\" title=\"添加日志\" @close=\"handleCloseDialy\" width=\"600px\" :close-on-click-modal=\"false\">\r\n            <daily-parper :disabled=\"isDisabled\" :sign=\"sign\" :logInfo=\"logDetail\" @resetForm=\"resetForm\" @handleSubmit=\"handleSubmit\" @addDailyTasks=\"addDailyTasks\" :taskName=\"taskName\" :closeDialogNum=\"closeDialogNum\" :addBtnShow=\"true\"></daily-parper>\r\n        </el-dialog>\r\n         <el-dialog :visible.sync=\"dialogTaskVisible\" title=\"关联任务\" width=\"900px\" :close-on-click-modal=\"false\">\r\n            <dialogTask :dialogTaskVisible=\"dialogTaskVisible\" @chooseRevelenceTask=\"chooseRevelenceTask\"></dialogTask>\r\n        </el-dialog>   \r\n        <el-dialog :visible.sync=\"tasklogDetailVisible\" title=\"日志详情\" width=\"700px\" :close-on-click-modal=\"false\">\r\n             <div class=\"tasklog-detail\">\r\n                <p><span>日报日期 :</span><span>{{taskDetail.gcrq}}</span></p> \r\n                <p><span>填写时间 :</span><span>{{taskDetail.cjsj}}</span></p> \r\n                <p><span>项目名称 :</span><span>{{taskDetail.xmmc == ''?'无':taskDetail.xmmc}}</span></p> \r\n                <p><span>产品名称 :</span><span>{{taskDetail.cpmc == ''?'无':taskDetail.cpmc}}</span></p> \r\n                <p><span>关联任务 :</span><span>{{taskDetail.rwmc == ''?'无':taskDetail.rwmc}}</span></p>    \r\n                <p><span>工时(小时) :</span><span>{{taskDetail.gs}}</span></p> \r\n                <p><span>日志内容 :</span><span>{{taskDetail.gcms}}</span></p> \r\n                <p><span>附件列表 :</span><span  class=\"name-wrapper\">\r\n                  <span v-for=\"(fj,index) in taskDetail.fjData\" :key=\"index\" :data-fj=\"fj.fjbh\" @click=\"handleDownFile('','',$event)\">{{fj.fjmc}}</span></span>\r\n                </p> \r\n                 <p  style=\"border:none\" v-if=\"taskDetail.ydzt == 2||isJzuser == 0\"> \r\n                  <el-table\r\n                  :data=\"pzList\"\r\n                  border\r\n                  max-height=\"300\"\r\n                  style=\"width:100%\">\r\n                  <el-table-column  prop=\"yhxm\" label=\"姓名\" width=\"80\"></el-table-column>\r\n                  <el-table-column  prop=\"ydsj\" label=\"阅读日期\" width=\"155\"></el-table-column>\r\n                  <el-table-column  prop=\"bz\" label=\"批注\" show-overflow-tooltip></el-table-column>\r\n                  </el-table>\r\n                </p>\r\n                <p flex style=\"border:none\" v-if=\"taskDetail.ydzt != 2\"> \r\n                  <span>批注:</span>\r\n                  <el-input type=\"textarea\" :rows=\"5\" placeholder=\"请输入批注内容\" v-model=\"pzValue\" resize=\"none\"></el-input>\r\n                </p>\r\n                <div style=\"text-align:right\">\r\n                  <el-button size=\"mini\" type=\"primary\" v-if=\"taskDetail.ydzt != 2\" @click=\"handleSaveDetail\">更新批注</el-button>\r\n                  <el-button size=\"mini\" type=\"info\" @click=\"handleCloseDetail\">取消</el-button>\r\n                </div>\r\n             </div>\r\n        </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport dailyParper from '@/components/BusinessPage/dailyParper.vue'\r\nimport dialogTask from '@/components/BusinessPage/dialogTask.vue'\r\nimport pagination from '@/components/BusinessPage/pagination.vue'\r\nimport { addOrUpdateTaskProcess , queryLogTaskProcess ,exportPersonnelLog ,readLog,getLogComment,commentLog,deleteTaskProcess,\r\ngetLogComments} from '@/api/TaskProcess.js'\r\nimport { queryTdcy,queryVisiblePerson } from '@/api/personal.js'\r\n\r\n\r\nexport default {\r\n  data(){\r\n      return {\r\n          fwList:[{ label:'全部', value:''},\r\n                  { label:'战队（组织结构）', value:'0'},\r\n                  { label:'学校成员', value:'2'},\r\n                  { label:'合作伙伴', value:'3'},\r\n                  { label:'项目', value:'1'}],\r\n          startDate:\"\",\r\n          endDate:\"\",\r\n          tableData: [],\r\n          dialogDialyVisible:false,\r\n          dialogTaskVisible:false,\r\n          tasklogDetailVisible:false,\r\n          taskName:\"\",\r\n          relevanceTask:false,\r\n          dailyValue:{},\r\n          pageSize:17,\r\n          records:null  ,\r\n          options: [],\r\n          value: '',\r\n          ydztValue:'',\r\n          fwValue:'',\r\n          TaskRelevance:{},\r\n          rwgc:{},\r\n          total:\"\",\r\n          baseUrl:\"\",\r\n          isRead:\"\",\r\n          keyword:\"\",\r\n          closeDialogNum:0,\r\n          taskDetail:{},\r\n          pzValue:\"\",\r\n          logDetail:{},\r\n          isedit:true,\r\n          rwbh:\"\",\r\n          xmbh:\"\",\r\n          sign:0,\r\n          nowPage:1,\r\n          pzList:[],\r\n          isJzuser:\"\",\r\n          isDisabled:0\r\n      }\r\n  },\r\n  mounted(){\r\n     \r\n  },\r\n  methods:{\r\n    handleReadlog(index,row){ // 阅读日志\r\n      if(row.ydzt == 0){\r\n         readLog({\r\n          wid:row.wid\r\n          }).then(({data})=>{\r\n            if(data.state == 'success'){\r\n               row.ydzt = 1\r\n            }else{\r\n              this.$alert(data.msg, '提示', {\r\n              confirmButtonText: '确定',\r\n              type:'error',\r\n             });\r\n          }\r\n        })\r\n       }\r\n    },\r\n    handleCloseDetail(){\r\n       this.tasklogDetailVisible = false\r\n    },\r\n    // 保存批注\r\n    handleSaveDetail(){\r\n          commentLog({\r\n            wid:this.taskDetail.wid,\r\n            bz:this.pzValue\r\n          }).then(({data})=>{\r\n             if(data.state == 'success'){\r\n                this.tasklogDetailVisible = false\r\n                this.$alert('保存成功', '提示', {\r\n                confirmButtonText: '确定',\r\n                type:'success'\r\n               });\r\n             }\r\n          })  \r\n    },\r\n     //  切换填写人\r\n    handleChoosetxr(){\r\n       this.queryLogTaskProcess(1);\r\n    },\r\n    //  切换阅读状态\r\n    changeTaskydzt(){\r\n      this.queryLogTaskProcess(1);\r\n    },\r\n    //  范围\r\n    changeTaskscope(){\r\n        this.queryLogTaskProcess(1);\r\n    },\r\n  // 查看日志详情\r\n    handleTasklogDetail(index,row){ \r\n       this.tasklogDetailVisible = true\r\n       this.taskDetail = row\r\n       if(row.ydzt == 0){\r\n         readLog({\r\n          wid:row.wid\r\n          }).then(({data})=>{\r\n            if(data.state == 'success'){\r\n               row.ydzt = 1\r\n            }else{\r\n              this.$alert(data.msg, '提示', {\r\n              confirmButtonText: '确定',\r\n              type:'error',\r\n             });\r\n          }\r\n        })\r\n       }\r\n       if(row.ydzt == 2 || this.isJzuser == 0){\r\n        this.getLogComments(this.taskDetail.wid);\r\n       }\r\n       this.getLogComment(this.taskDetail.wid);\r\n      \r\n    },\r\n    // 编辑日报\r\n    handleEditDetail(index,row){\r\n      this.logDetail = row\r\n      this.sign += 1\r\n      this.isedit = true;\r\n      this.dialogDialyVisible = true\r\n    },\r\n    // 添加日报\r\n    handleDailyPaper(){   \r\n         this.dialogDialyVisible = !this.dialogDialyVisible\r\n         this.closeDialogNum += 1\r\n         this.sign -= 1         \r\n         this.isedit = false;\r\n         this.taskName = '';\r\n    },\r\n  //  删除日志\r\n    handleDeleteDetail(index,row){\r\n       this.$confirm('是否删除该条日志?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          deleteTaskProcess({\r\n            wid:row.wid\r\n          }).then(({data})=>{\r\n              if(data.state == 'success'){\r\n                this.queryLogTaskProcess(this.nowPage);\r\n                this.$alert('删除成功', '提示', {\r\n                      confirmButtonText: '确定',\r\n                      type:'success'\r\n                });\r\n              }\r\n          })\r\n        }).catch(() => {});\r\n    },\r\n    //日报提交\r\n    handleSubmit(data){       \r\n          // this.rwgc.xmbh = this.TaskRelevance.xmbh\r\n          // this.rwgc.rwbh = this.TaskRelevance.rwbh\r\n          this.isDisabled = 1\r\n          this.rwgc.gclx = 2\r\n          this.rwgc.gcms = data.gcms\r\n          this.rwgc.gcrq = data.gcrq\r\n          this.rwgc.gs = data.gs\r\n          this.rwgc.fjdata = data.fjdata.join(',')\r\n          this.rwgc.wid = data.wid\r\n          if(this.isedit){\r\n            this.rwgc.xmbh = this.xmbh==''?data.xmbh:this.xmbh\r\n            this.rwgc.rwbh = this.rwbh==''?data.rwbh:this.rwbh\r\n            this.addOrUpdateTaskProcess(this.rwgc);\r\n          }else{\r\n            this.rwgc.wid = '';\r\n            this.rwgc.xmbh = this.xmbh\r\n            this.rwgc.rwbh = this.rwbh\r\n            this.addOrUpdateTaskProcess(this.rwgc);\r\n          }\r\n    },\r\n    // 重置任务\r\n    resetForm(){\r\n        this.taskName = \"\";\r\n        this.rwgc.xmbh = '';\r\n        this.rwgc.rwbh = '';\r\n    },\r\n    // 添加日报（关联任务）\r\n    addDailyTasks(){\r\n       this.dialogTaskVisible = !this.dialogTaskVisible\r\n    },\r\n    // 选择关联任务\r\n    chooseRevelenceTask(data){\r\n      this.taskName = data.rwmc\r\n      // this.TaskRelevance = data\r\n      this.xmbh = data.xmbh;\r\n      this.rwbh = data.rwbh;\r\n      this.dialogTaskVisible = !this.dialogTaskVisible\r\n    }, \r\n    \r\n    handleCloseDialy(){\r\n      \r\n    },\r\n \r\n    //查询\r\n    checkTaskLog(){  \r\n            let oDate1 = new Date(this.startDate);\r\n            let oDate2 = new Date(this.endDate);\r\n            if(oDate1.getTime() > oDate2.getTime()){\r\n                this.$alert('开始时间必须大于结束时间!', '错误提示', {confirmButtonText: '确定',type:'error'});\r\n                return ;\r\n            } \r\n           this.queryLogTaskProcess(1);\r\n    },\r\n    handleEnterlog(){\r\n        this.checkTaskLog();\r\n    },\r\n\r\n    //切换分页\r\n    handleCurrentChange(data){  \r\n       this.nowPage = data\r\n       this.queryLogTaskProcess(data);\r\n    },\r\n\r\n  //下载附件 \r\n   handleDownFile(index,row,e){\r\n       let fjbh = e.target.getAttribute('data-fj');\r\n       window.open(window.baseurl + 'attachment/downloadFile.do?fjId='+fjbh);   \r\n   },\r\n  // 格式日期\r\n    GetDateStr(DayCount) { \r\n        var dd = new Date(); \r\n        dd.setDate( dd.getDate() + DayCount);//获取DayCount天后的日期 \r\n        var y = dd.getFullYear(); \r\n        var m = dd.getMonth()+1;\r\n        var d = dd.getDate(); \r\n        var s = y+\"-\"+(m<10?('0'+m):m)+\"-\"+(d<10?('0'+d):d);\r\n        return  s;\r\n    },\r\n    // 获取任务过程\r\n    queryLogTaskProcess(curPage){\r\n      queryLogTaskProcess({\r\n        curPage:curPage,\r\n        pageSize:this.pageSize,\r\n        startDay:this.startDate,\r\n        endDay:this.endDate,\r\n        cybh:this.value,\r\n        isRead:this.ydztValue,\r\n        keyword:this.keyword,\r\n        fw:this.fwValue\r\n      }).then(({data})=>{\r\n          if(data.state == 'success'){\r\n            this.tableData = data.data.rows\r\n            this.records = data.data.records\r\n            this.total = data.data.total\r\n          }else{\r\n            this.$alert(data.msg, '提示',{\r\n             confirmButtonText: '确定', \r\n             type:'error',\r\n              callback: cancel => {}\r\n            });\r\n          }\r\n      })\r\n    },\r\n  //  获取批注\r\n    getLogComment(wid){\r\n      getLogComment({\r\n        wid:wid,\r\n      }).then(({data})=>{\r\n        if(data.state == 'success'){\r\n          this.pzValue = data.data\r\n        }\r\n      })\r\n    },  \r\n    // 获取所有批注\r\n    getLogComments(wid){\r\n      getLogComments({\r\n        wid:wid\r\n      }).then(({data})=>{\r\n         if(data.state == 'success'){\r\n           if(data.data!=null && data.data.length!=0){\r\n              this.pzList = data.data\r\n           }else{\r\n              this.pzList = [] \r\n           }\r\n        }\r\n      })\r\n    },\r\n    addOrUpdateTaskProcess(rwgc){\r\n          addOrUpdateTaskProcess(rwgc).then(({data})=>{\r\n            if(data.state == 'success'){\r\n              this.isDisabled = 0\r\n              this.$alert('添加成功', '提示', {\r\n                confirmButtonText: '确定',\r\n                type:'success',\r\n                callback: action => {\r\n                  this.taskName = '';\r\n                  this.xmbh = '';\r\n                  this.rwbh = '';\r\n                  this.closeDialogNum += 1\r\n                  this.queryLogTaskProcess(1);\r\n                  this.dialogDialyVisible = !this.dialogDialyVisible\r\n                }\r\n              });\r\n            }else{\r\n               this.isDisabled = 0\r\n               this.$alert(data.msg, '提示', {\r\n                confirmButtonText: '确定',\r\n                type:'error',\r\n                callback: action => {}\r\n              });\r\n            }\r\n          })\r\n    }\r\n  },\r\n  activated(){\r\n        this.isJzuser = sessionStorage.getItem('isJZuser')\r\n        this.baseUrl = window.baseurl\r\n        this.endDate = new Date().getFullYear()+ '-' + \r\n              (\"0\" + (new Date().getMonth() + 1)).slice(-2)+'-'+ (\"0\" + new Date().getDate()).slice(-2);\r\n        this.startDate = this.GetDateStr(-7);\r\n        this.queryLogTaskProcess(1);\r\n  },\r\n  components:{dailyParper,dialogTask,pagination}\r\n}\r\n</script>\r\n<style scoped>\r\n.task-log{\r\n min-width: 1280px;\r\n width: 90%;\r\n margin:10px auto 0;\r\n padding: 10px 10px 0;\r\n background: #fff;\r\n box-shadow:0 2px 12px 0 rgba(0,0,0,.1);\r\n border-radius: 4px;\r\n}\r\n.task-log-addDailyPaper {\r\n  float: right;\r\n  margin-top: 10px;\r\n}\r\n.task-log-addDailyPaper button{\r\n  height: 35px;\r\n  padding: 0 20px;\r\n}\r\n.task-log .task-log-date{\r\n    margin: 10px 0;\r\n}\r\n.task-log .task-log-date button{\r\n    padding: 5px 10px;\r\n    border:1px solid #409EFF;\r\n    background: #409EFF;\r\n}\r\n.task-log-date .el-select{\r\n  width: 120px;\r\n  vertical-align: top;  \r\n}\r\n\r\n.task-log-date .el-date-editor{\r\n   width:160px;\r\n}\r\n.task-log-date a{\r\n    background: forestgreen;\r\n    color: #fff;\r\n    padding: 6px 13px;\r\n    font-size: 12px;\r\n    border-radius: 3px;\r\n}\r\n.name-wrapper span:hover{\r\n  cursor: pointer;\r\n  text-decoration: underline;\r\n}\r\n.name-wrapper span{\r\n  color: #409EFF !important;\r\n  margin-right:15px;\r\n}\r\n.name-wrapper span:hover{\r\n  cursor: pointer;\r\n}\r\n.tasklog-detail{\r\n  padding: 10px;\r\n}\r\n.tasklog-detail p{\r\n  margin: 10px 0 !important;\r\n  border-bottom: 1px dashed #ccc;\r\n}\r\n.tasklog-detail p>span:nth-child(1){\r\n  display: inline-block;\r\n  width:80px;\r\n  font-weight: 700;\r\n  text-align:right;\r\n  margin-right:10px;\r\n}\r\n\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/BusinessPage/taskLog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"task-log\"},[_c('div',{staticClass:\"task-log-addDailyPaper\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleDailyPaper}},[_c('span',{staticClass:\"el-icon-circle-plus\"}),_vm._v(\" 添加日报\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"task-log-date\"},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"size\":\"small\",\"placeholder\":\"选择开始日期\",\"value-format\":\"yyyy-MM-dd\"},model:{value:(_vm.startDate),callback:function ($$v) {_vm.startDate=$$v},expression:\"startDate\"}}),_vm._v(\"\\n          至\\n           \"),_c('el-date-picker',{attrs:{\"type\":\"date\",\"size\":\"small\",\"placeholder\":\"选择结束日期\",\"value-format\":\"yyyy-MM-dd\"},model:{value:(_vm.endDate),callback:function ($$v) {_vm.endDate=$$v},expression:\"endDate\"}}),_vm._v(\" \\n            \"),_c('span',{staticStyle:{\"font-size\":\"14px\"}},[_vm._v(\"阅读状态 :\")]),_vm._v(\" \"),_c('el-select',{staticStyle:{\"width\":\"100px\"},on:{\"change\":_vm.changeTaskydzt},model:{value:(_vm.ydztValue),callback:function ($$v) {_vm.ydztValue=$$v},expression:\"ydztValue\"}},[_c('el-option',{attrs:{\"label\":\"全部\",\"value\":\"\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"未阅\",\"value\":\"0\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"已阅\",\"value\":\"1\"}})],1),_vm._v(\"\\n             \\n             \"),_c('span',{staticStyle:{\"font-size\":\"14px\"}},[_vm._v(\"范围 :\")]),_vm._v(\" \"),_c('el-select',{staticStyle:{\"width\":\"120px\"},on:{\"change\":_vm.changeTaskscope},model:{value:(_vm.fwValue),callback:function ($$v) {_vm.fwValue=$$v},expression:\"fwValue\"}},_vm._l((_vm.fwList),function(fw,index){return _c('el-option',{key:index,attrs:{\"label\":fw.label,\"value\":fw.value}})})),_vm._v(\" \"),_c('el-input',{staticStyle:{\"width\":\"230px\"},attrs:{\"size\":\"small\",\"placeholder\":\"项目编号/项目名称/填写人姓名\"},on:{\"change\":_vm.handleEnterlog},model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=$$v},expression:\"keyword\"}}),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"info\"},on:{\"click\":_vm.checkTaskLog}},[_vm._v(\"查询\")]),_vm._v(\"  \\n            \"),_c('a',{attrs:{\"href\":_vm.baseUrl+'process/exportPersonnelLog.do?startDay='+_vm.startDate+'&endDay='+_vm.endDate+'&isRead='+_vm.ydztValue+'&cybh='+_vm.value+'&fw='+_vm.fwValue,\"target\":\"blank\"}},[_vm._v(\"导出\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"task-log-tabel\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"border\":\"\",\"height\":\"calc(100vh - 185px)\"}},[_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{attrs:{\"flex\":\"\",\"spacearound\":\"\"}},[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.handleTasklogDetail(scope.$index, scope.row)}}},[_vm._v(\"批注\")]),_vm._v(\" \"),(scope.row.editable)?_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.handleEditDetail(scope.$index, scope.row)}}},[_vm._v(\"编辑\")]):_vm._e(),_vm._v(\" \"),(scope.row.editable)?_c('el-button',{staticStyle:{\"color\":\"#f00\"},attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.handleDeleteDetail(scope.$index, scope.row)}}},[_vm._v(\"删除\")]):_vm._e()],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"阅读状态\",\"width\":\"90\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{attrs:{\"slot\":\"reference\"},slot:\"reference\"},[(scope.row.ydzt == 0)?_c('span',{staticClass:\"tasklog-ydzt tasklog-ydzt-wy\",attrs:{\"title\":\"点击设为已阅\"},on:{\"click\":function($event){_vm.handleReadlog(scope.$index, scope.row)}}},[_vm._v(_vm._s(scope.row.ydzt_display))]):_vm._e(),_vm._v(\" \"),(scope.row.ydzt!=0)?_c('span',{class:{'tasklog-ydzt':true,'tasklog-ydzt-yy':scope.row.ydzt==1}},[_vm._v(_vm._s(scope.row.ydzt ==1?'已阅':scope.row.ydzt_display))]):_vm._e()])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"cjrxm\",\"label\":\"填写人\",\"width\":\"80\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"xmbh\",\"label\":\"项目编号\",\"show-overflow-tooltip\":\"\",\"sortable\":\"\",\"width\":\"110\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"xmmc\",\"label\":\"项目名称\",\"show-overflow-tooltip\":\"\",\"width\":\"260\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"gcms\",\"label\":\"内容\",\"show-overflow-tooltip\":\"\",\"width\":\"500\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"cpmc_display\",\"label\":\"产品名称\",\"show-overflow-tooltip\":\"\",\"width\":\"180\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"rwmc_display\",\"label\":\"任务名称\",\"show-overflow-tooltip\":\"\",\"width\":\"150\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"gcrq\",\"label\":\"日报日期\",\"width\":\"110\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"cjsj\",\"label\":\"填写时间\",\"width\":\"160\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"gs\",\"label\":\"工时(小时)\",\"width\":\"90\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"附件\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"name-wrapper\",attrs:{\"slot\":\"reference\"},slot:\"reference\"},[_c('div',{on:{\"click\":function($event){_vm.handleDownFile(scope.$index, scope.row,$event)}}},_vm._l((scope.row.fjData),function(fj,index){return _c('span',{key:index,attrs:{\"title\":\"点击下载\",\"data-fj\":fj.fjbh}},[_vm._v(_vm._s(fj.fjmc))])}))])]}}])})],1),_vm._v(\" \"),(_vm.records > 15)?_c('div',{staticStyle:{\"text-align\":\"right\",\"margin\":\"10px 0\"}},[_c('pagination',{attrs:{\"pageSize\":_vm.pageSize,\"total\":_vm.records},on:{\"handleCurrentChange\":_vm.handleCurrentChange}})],1):_vm._e()],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.dialogDialyVisible,\"title\":\"添加日志\",\"width\":\"600px\",\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.dialogDialyVisible=$event},\"close\":_vm.handleCloseDialy}},[_c('daily-parper',{attrs:{\"disabled\":_vm.isDisabled,\"sign\":_vm.sign,\"logInfo\":_vm.logDetail,\"taskName\":_vm.taskName,\"closeDialogNum\":_vm.closeDialogNum,\"addBtnShow\":true},on:{\"resetForm\":_vm.resetForm,\"handleSubmit\":_vm.handleSubmit,\"addDailyTasks\":_vm.addDailyTasks}})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.dialogTaskVisible,\"title\":\"关联任务\",\"width\":\"900px\",\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.dialogTaskVisible=$event}}},[_c('dialogTask',{attrs:{\"dialogTaskVisible\":_vm.dialogTaskVisible},on:{\"chooseRevelenceTask\":_vm.chooseRevelenceTask}})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.tasklogDetailVisible,\"title\":\"日志详情\",\"width\":\"700px\",\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.tasklogDetailVisible=$event}}},[_c('div',{staticClass:\"tasklog-detail\"},[_c('p',[_c('span',[_vm._v(\"日报日期 :\")]),_c('span',[_vm._v(_vm._s(_vm.taskDetail.gcrq))])]),_vm._v(\" \"),_c('p',[_c('span',[_vm._v(\"填写时间 :\")]),_c('span',[_vm._v(_vm._s(_vm.taskDetail.cjsj))])]),_vm._v(\" \"),_c('p',[_c('span',[_vm._v(\"项目名称 :\")]),_c('span',[_vm._v(_vm._s(_vm.taskDetail.xmmc == ''?'无':_vm.taskDetail.xmmc))])]),_vm._v(\" \"),_c('p',[_c('span',[_vm._v(\"产品名称 :\")]),_c('span',[_vm._v(_vm._s(_vm.taskDetail.cpmc == ''?'无':_vm.taskDetail.cpmc))])]),_vm._v(\" \"),_c('p',[_c('span',[_vm._v(\"关联任务 :\")]),_c('span',[_vm._v(_vm._s(_vm.taskDetail.rwmc == ''?'无':_vm.taskDetail.rwmc))])]),_vm._v(\" \"),_c('p',[_c('span',[_vm._v(\"工时(小时) :\")]),_c('span',[_vm._v(_vm._s(_vm.taskDetail.gs))])]),_vm._v(\" \"),_c('p',[_c('span',[_vm._v(\"日志内容 :\")]),_c('span',[_vm._v(_vm._s(_vm.taskDetail.gcms))])]),_vm._v(\" \"),_c('p',[_c('span',[_vm._v(\"附件列表 :\")]),_c('span',{staticClass:\"name-wrapper\"},_vm._l((_vm.taskDetail.fjData),function(fj,index){return _c('span',{key:index,attrs:{\"data-fj\":fj.fjbh},on:{\"click\":function($event){_vm.handleDownFile('','',$event)}}},[_vm._v(_vm._s(fj.fjmc))])}))]),_vm._v(\" \"),(_vm.taskDetail.ydzt == 2||_vm.isJzuser == 0)?_c('p',{staticStyle:{\"border\":\"none\"}},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.pzList,\"border\":\"\",\"max-height\":\"300\"}},[_c('el-table-column',{attrs:{\"prop\":\"yhxm\",\"label\":\"姓名\",\"width\":\"80\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"ydsj\",\"label\":\"阅读日期\",\"width\":\"155\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"bz\",\"label\":\"批注\",\"show-overflow-tooltip\":\"\"}})],1)],1):_vm._e(),_vm._v(\" \"),(_vm.taskDetail.ydzt != 2)?_c('p',{staticStyle:{\"border\":\"none\"},attrs:{\"flex\":\"\"}},[_c('span',[_vm._v(\"批注:\")]),_vm._v(\" \"),_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":5,\"placeholder\":\"请输入批注内容\",\"resize\":\"none\"},model:{value:(_vm.pzValue),callback:function ($$v) {_vm.pzValue=$$v},expression:\"pzValue\"}})],1):_vm._e(),_vm._v(\" \"),_c('div',{staticStyle:{\"text-align\":\"right\"}},[(_vm.taskDetail.ydzt != 2)?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":_vm.handleSaveDetail}},[_vm._v(\"更新批注\")]):_vm._e(),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"info\"},on:{\"click\":_vm.handleCloseDetail}},[_vm._v(\"取消\")])],1)])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-c6f640a0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/views/BusinessPage/taskLog.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c6f640a0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=0!./taskLog.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./taskLog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./taskLog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c6f640a0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./taskLog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c6f640a0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/BusinessPage/taskLog.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}