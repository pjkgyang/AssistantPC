webpackJsonp([50],{"7BXw":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("aozt");var a=s("9A7R"),i=s("IfOk"),n=s("t5DY"),l=s("oFuF"),r=s("Vnos"),c=s("kAAd"),u={data:function(){return{questionTitle:"提交问题",show:!1,cnjsrq:"",queryLJshow:!0,keyword:"",questionList:[],pageSize:10,CurrentPage:1,total:null,dwlxList:[{label:"1",mc:"学校"},{label:"0",mc:"金智"},{label:"2",mc:"合作伙伴"}],zzrList:[{label:"1",mc:"待我解决问题"},{label:"0",mc:"我的提问"},{label:"3",mc:"我受理过的问题"},{label:"2",mc:"我相关的问题"}],bqlyList:[{label:"1",mc:"我的标签"},{label:"2",mc:"其他人的标签"},{label:"3",mc:"无标签"}],bqly:"",wtfl:"",cxzt:"0",sqgb:"",cpline:[],cplist:[],wtbqlist:[],wtbq:"",wtlb:[],wtlbbg:"",cpxbg:"",cpbg:"",dwlx:"",qusetionInfo:{},wid:"",xmbh:"",xmmc:"",accreditShow:!1,showCondition:"",isJZuser:"",SLbtnDisabled:!1,username:null,baseUrl:"",starDay:"",endDay:""}},props:{},mounted:function(){null!=window.userName?(this.username=window.userName,sessionStorage.setItem("username",window.userName)):this.username=sessionStorage.getItem("username"),this.isJZuser=JSON.parse(sessionStorage.getItem("userInfo")).unitType,Object(l.l)("cpx")&&Object(l.l)("ProblemType")&&Object(l.l)("cp")&&Object(l.l)("WTBQ")?(this.cpline=Object(l.l)("cpx"),this.wtlb=Object(l.l)("ProblemType"),this.cplist=Object(l.l)("cp"),this.wtbqlist=Object(l.l)("WTBQ")):(Object(l.g)("cpx",this.cpline,!0),Object(l.g)("ProblemType",this.wtlb,""),Object(l.g)("cp",this.cplist,!0),Object(l.g)("WTBQ",this.wtbqlist,!0))},methods:{handleExport:function(){this.keyword=this.keyword?this.keyword:"",window.open(window.baseurl+"question/exportQuestionReport.do?&cp="+this.cpbg+"&cpx="+this.cpxbg+"&zt="+this.cxzt+"&wtbq="+this.wtbq+"&sqgb="+this.sqgb+"&keyword="+this.keyword+"&dwlx="+this.dwlx+"&wtlb="+this.wtlbbg+"&starDay="+this.starDay+"&endDay="+this.endDay+"&isAnalyse=true&xmbh=&wtfl="+this.wtfl+"&bqly="+this.bqly)},handleTWsuccess:function(){switch(this.questionTitle){case"我要提问":this.queryAllQuestions(1);break;case"编辑问题":this.queryAllQuestions(this.CurrentPage)}},handleQueryShow:function(){this.queryLJshow=!this.queryLJshow},handleQuestionDetail:function(t){var e=this.$router.resolve({name:"questionDetail",query:{wid:t.wid,bq:1}});window.open(e.href,"_blank")},editQuestion:function(t){var e=this;this.questionTitle="编辑问题",Object(n.b)({wid:t.wid}).then(function(s){var a=s.data;"success"==a.state&&(a.data?Object(i.A)({wid:t.wid}).then(function(t){var s=t.data;"success"==s.state?(e.qusetionInfo=s.data,e.accreditShow=!1,e.show=!0):e.$alert(s.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})}):e.$alert("该条问题已有回复，不可编辑","提示",{confirmButtonText:"确定",callback:function(t){}}))})},deleteQuestion:function(t){var e=this;this.$confirm("是否删除该条问题?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.i)({wids:t.wid}).then(function(t){var s=t.data;"success"==s.state?e.$alert("删除成功","提示",{confirmButtonText:"确定",type:"success",callback:function(t){e.queryAllQuestions(1)}}):e.$alert(s.msg,"提示",{confirmButtonText:"确定",type:"error",callback:function(t){}})})}).catch(function(){})},searchQuestion:function(){this.queryAllQuestions(1),this.CurrentPage=1},handlequeryQuestion:function(){this.queryAllQuestions(1),this.CurrentPage=1},handleCurrentChange:function(t){this.CurrentPage=t,this.queryAllQuestions(t)},changeStarDay:function(t){this.queryAllQuestions(1),this.CurrentPage=1},changeEndDay:function(t){this.queryAllQuestions(1),this.CurrentPage=1},handleCXZT:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.cxzt=e,this.queryAllQuestions(1),this.CurrentPage=1)},handleZXR:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.wtfl=e,this.queryAllQuestions(1),this.CurrentPage=1)},handleBQLY:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.bqly=e,this.queryAllQuestions(1),this.CurrentPage=1)},handleSQGB:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.sqgb=e,this.queryAllQuestions(1),this.CurrentPage=1)},handleWTBQ:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.wtbq=e,this.queryAllQuestions(1),this.CurrentPage=1)},handleCPX:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.cpxbg=e,this.queryAllQuestions(1),this.CurrentPage=1)},handleCP:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.cpbg=e,this.queryAllQuestions(1),this.CurrentPage=1)},handleWTLB:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.wtlbbg=e,this.queryAllQuestions(1),this.CurrentPage=1)},handleDWLX:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.dwlx=e,this.queryAllQuestions(1),this.CurrentPage=1)},queryAllQuestions:function(t){var e=this;Object(i.s)({curPage:t,pageSize:this.pageSize,xmbh:"",cp:this.cpbg,cpx:this.cpxbg,zt:this.cxzt,sqgb:this.sqgb,keyword:this.keyword,dwlx:this.dwlx,wtlb:this.wtlbbg,wtbq:this.wtbq,starDay:this.starDay,endDay:this.endDay,isAnalyse:!0,wtfl:this.wtfl,bqly:this.bqly}).then(function(t){var s=t.data;"success"==s.state&&(null!=s.data.rows&&(e.questionList=s.data.rows),e.total=s.data.records)})}},watch:{},activated:function(){this.keyword=this.$route.params.dwmc,this.queryAllQuestions(1),this.baseUrl=window.baseurl},components:{pagination:a.a,twDialog:r.a,questionCard:c.a}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"project-question"},[s("div",{staticClass:"project-question-query"},[s("div",[s("span",{staticClass:"query-title"},[s("span",{class:{"isshown-query":!0,"el-icon-arrow-down":!t.queryLJshow,"el-icon-arrow-up":t.queryLJshow},on:{click:t.handleQueryShow}}),t._v(" 高级查询")]),t._v(" "),s("el-input",{staticStyle:{width:"493px"},attrs:{size:"small",placeholder:"请输入问题提出人姓名/工号/手机号/标题/项目编号/项目名称/学校名称"},on:{change:t.searchQuestion},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),t._v("　\n              "),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handlequeryQuestion}},[t._v("查询")])],1),t._v(" "),t.queryLJshow?s("div",{staticClass:"query-condition"},[s("div",[s("p",{staticClass:"query-title"},[t._v("提问时间:")]),t._v(" "),s("p",{staticClass:"query-list"},[s("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"选择开始日期","value-format":"yyyy-MM-dd"},on:{change:t.changeStarDay},model:{value:t.starDay,callback:function(e){t.starDay=e},expression:"starDay"}}),t._v(" 　 至　 \n               "),s("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"选择结束日期","value-format":"yyyy-MM-dd"},on:{change:t.changeEndDay},model:{value:t.endDay,callback:function(e){t.endDay=e},expression:"endDay"}})],1)]),t._v(" "),s("div",[s("p",{staticClass:"query-title"},[t._v("问题分类:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleZXR}},[s("span",{class:{"bg-active":""==t.wtfl},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.zzrList,function(e,a){return s("span",{key:a,class:{"bg-active":t.wtfl==e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]),t._v(" "),s("div",[s("p",{staticClass:"query-title"},[t._v("标签来源:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleBQLY}},[s("span",{class:{"bg-active":""==t.bqly},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.bqlyList,function(e,a){return s("span",{key:a,class:{"bg-active":t.bqly==e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]),t._v(" "),s("div",[s("p",{staticClass:"query-title"},[t._v("查询状态:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleCXZT}},[s("span",{class:{"bg-active":""==t.cxzt},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),s("span",{class:{"bg-active":"0"==t.cxzt},attrs:{"data-type":"0"}},[t._v("处理中")]),t._v(" "),s("span",{class:{"bg-active":"1"==t.cxzt},attrs:{"data-type":"1"}},[t._v("已关闭")])])]),t._v(" "),s("div",[s("p",{staticClass:"query-title"},[t._v("申请关闭:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleSQGB}},[s("span",{class:{"bg-active":""==t.sqgb},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),s("span",{class:{"bg-active":"1"==t.sqgb},attrs:{"data-type":"1"}},[t._v("是")]),t._v(" "),s("span",{class:{"bg-active":"0"==t.sqgb},attrs:{"data-type":"0"}},[t._v("否")])])]),t._v(" "),s("div",[s("p",{staticClass:"query-title"},[t._v("问题标签:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleWTBQ}},[s("span",{class:{"bg-active":""==t.wtbq},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.wtbqlist,function(e,a){return s("span",{class:{"bg-active":t.wtbq===e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])}),t._v(" "),s("span",{class:{"bg-active":"-1"==t.wtbq},attrs:{"data-type":"-1"}},[t._v("无")])],2)]),t._v(" "),s("div",[s("p",{staticClass:"query-title"},[t._v("产品线:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleCPX}},[s("span",{class:{"bg-active":""==t.cpxbg},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.cpline,function(e,a){return s("span",{class:{"bg-active":t.cpxbg===e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]),t._v(" "),s("div",[s("p",{staticClass:"query-title"},[t._v("产品:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleCP}},[s("span",{class:{"bg-active":""==t.cpbg},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.cplist,function(e,a){return s("span",{class:{"bg-active":t.cpbg==e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]),t._v(" "),s("div",[s("p",{staticClass:"query-title"},[t._v("问题类别:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleWTLB}},[s("span",{class:{"bg-active":""==t.wtlbbg},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.wtlb,function(e,a){return s("span",{class:{"bg-active":t.wtlbbg==e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]),t._v(" "),s("div",[s("p",{staticClass:"query-title"},[t._v("单位类型:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleDWLX}},[s("span",{class:{"bg-active":""==t.dwlx},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.dwlxList,function(e,a){return s("span",{class:{"bg-active":t.dwlx==e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)])]):t._e()]),t._v(" "),s("div",{staticStyle:{background:"#fff","margin-top":"10px","box-shadow":"0 2px 12px 0 rgba(0,0,0,.1)","border-radius":"4px",padding:"10px 0"}},[s("div",{staticStyle:{padding:"0 10px","text-align":"right"}},[s("el-button",{staticStyle:{"margin-top":"8px"},attrs:{size:"mini",type:"primary"},on:{click:t.handleExport}},[t._v("导出")])],1),t._v(" "),s("hr",{staticStyle:{"border-top":"1px solid #eee",margin:"8px 0 0 0 !important"}}),t._v(" "),s("questionCard",{attrs:{questionList:t.questionList,isShow:!1,wtbqShow:!0},on:{editQuestion:t.editQuestion,deleteQuestion:t.deleteQuestion,handleQuestionDetail:t.handleQuestionDetail}}),t._v(" "),t.total>10?s("div",{staticStyle:{"margin-top":"10px","text-align":"right"}},[s("pagination",{attrs:{currentPage:t.CurrentPage,total:t.total,pageSize:t.pageSize},on:{handleCurrentChange:t.handleCurrentChange}})],1):t._e()],1),t._v(" "),s("twDialog",{attrs:{show:t.show,questionTitle:t.questionTitle,accreditShow:t.accreditShow,questionInfo:t.qusetionInfo},on:{"update:show":function(e){t.show=e},handleTWsuccess:t.handleTWsuccess}})],1)},staticRenderFns:[]};var d=s("Z0/y")(u,o,!1,function(t){s("LIMz")},"data-v-1d5d5dd4",null);e.default=d.exports},LIMz:function(t,e){}});
//# sourceMappingURL=50.c93567793e67588e6759.js.map