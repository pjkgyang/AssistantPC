webpackJsonp([57],{"41lx":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("3cXf"),r=s.n(a),b={data:function(){return{htjbxx:{},fbData:[],ywyData:[],ywyTotal:{},fbnrlist:[],isSave:!0}},mounted:function(){this.queryFbYwxData()},methods:{handleSaveFb:function(){var t=this;this.fbnrlist=[],this.fbData.forEach(function(e){t.fbnrlist.push({htnrwid:e.htnrwid,fbssry:Number(e.fbssry),fbekry:Number(e.fbekry),fbsm:e.fbsm})}),this.$post(this.API.saveFbxx,{xmbh:this.$route.query.xmbh,fbbh:this.htjbxx.fbbh?this.htjbxx.fbbh:"",fbmc:this.htjbxx.fbmc,fbrq:this.htjbxx.fbrq,jhksrq:this.htjbxx.jhksrq,jhjsrq:this.htjbxx.jhjsrq,ssfy:this.htjbxx.ssfy,ekfy:this.htjbxx.ekfy,kbfy:this.htjbxx.kbfy,ssbz:this.htjbxx.ssbz,ekbz:this.htjbxx.ekbz,fbsm:this.htjbxx.fbsm,fbnrlist:r()(this.fbnrlist)}).then(function(e){"success"==e.state?(t.$message({message:"保存成功~",type:"success"}),t.$route.query.fbbh||(t.isSave=!1)):t.$message({message:e.msg,type:"error"})})},handleInputSSry:function(t){var e=this,s=0;this.htjbxx.ssfy=0,this.fbData.forEach(function(s){s.ywybh==t&&(e.htjbxx.ssfy+=Number(s.fbssry))}),this.ywyData.forEach(function(a){a.ywybh==t&&(a.fbssry=e.htjbxx.ssfy),a.ywybh&&(s+=a.fbssry?a.fbssry:0),a.ywybh||(a.fbssry=e.htjbxx.ssfy=s)})},handleInputEKry:function(t){var e=this,s=0;this.htjbxx.ekfy=0,this.fbData.forEach(function(s){s.ywybh==t&&(e.htjbxx.ekfy+=Number(s.fbekry))}),this.ywyData.forEach(function(a){a.ywybh==t&&(a.fbekry=e.htjbxx.ekfy),a.ywybh&&(s+=a.fbekry?a.fbekry:0),a.ywybh||(a.fbekry=e.htjbxx.ekfy=s)})},queryFbYwxData:function(){var t=this;this.$get(this.API.queryFbYwxData,{xmbh:this.$route.query.xmbh,fbbh:this.$route.query.fbbh?this.$route.query.fbbh:""}).then(function(e){"success"==e.state?(t.htjbxx=e.data.fbxx,t.htjbxx.kbfy=t.htjbxx.kbfy?t.htjbxx.kbfy:0,t.ywyData=e.data.fbywy,t.fbData=e.data.fbnr):t.$message({message:e.msg,type:"error"})})}},activated:function(){},components:{}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"fbdetail_container"},[s("div",{staticClass:"fb_info"},[s("div",[s("h4",[t._v("合同内容")]),t._v(" "),s("div",[s("h5",[t._v("分包基本信息")]),t._v(" "),t.isSave?s("div",{attrs:{"text-right":""}},[s("el-button",{staticStyle:{margin:"10px 0"},attrs:{size:"small",type:"danger"},on:{click:t.handleSaveFb}},[t._v("保存")])],1):t._e(),t._v(" "),s("table",[s("tr",[s("th",[t._v("项目编号")]),t._v(" "),s("td",[t._v(t._s(t.$route.query.xmbh))]),t._v(" "),s("th",[t._v("项目名称")]),t._v(" "),s("td",{attrs:{colspan:"3"}},[t._v(t._s(t.$route.query.xmmc))])]),t._v(" "),s("tr",[s("th",[t._v("分包名称")]),t._v(" "),s("td",{attrs:{colspan:"5"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.htjbxx.fbmc,expression:"htjbxx.fbmc"}],staticStyle:{width:"100%"},attrs:{placeholder:"请输入分包名称"},domProps:{value:t.htjbxx.fbmc},on:{input:function(e){e.target.composing||t.$set(t.htjbxx,"fbmc",e.target.value)}}})])]),t._v(" "),s("tr",[s("th",[t._v("分包日期")]),t._v(" "),s("td",[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:t.htjbxx.fbrq,callback:function(e){t.$set(t.htjbxx,"fbrq",e)},expression:"htjbxx.fbrq"}})],1),t._v(" "),s("th",[t._v("计划开始日期")]),t._v(" "),s("td",[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:t.htjbxx.jhksrq,callback:function(e){t.$set(t.htjbxx,"jhksrq",e)},expression:"htjbxx.jhksrq"}})],1),t._v(" "),s("th",[t._v("计划结束日期")]),t._v(" "),s("td",[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:t.htjbxx.jhjsrq,callback:function(e){t.$set(t.htjbxx,"jhjsrq",e)},expression:"htjbxx.jhjsrq"}})],1)]),t._v(" "),s("tr",[s("th",[t._v("实施费用（元）")]),t._v(" "),s("td",[t._v(t._s(t.htjbxx.ssfy?t.htjbxx.ssfy:0))]),t._v(" "),s("th",[t._v("二开费用（元）")]),t._v(" "),s("td",[t._v(t._s(t.htjbxx.ekfy?t.htjbxx.ekfy:0))]),t._v(" "),s("th",[t._v("可变费用（元）")]),t._v(" "),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.htjbxx.kbfy,expression:"htjbxx.kbfy"}],staticStyle:{width:"100%"},attrs:{type:"text",placeholder:"请输入金额"},domProps:{value:t.htjbxx.kbfy},on:{input:function(e){e.target.composing||t.$set(t.htjbxx,"kbfy",e.target.value)}}})])]),t._v(" "),s("tr",[s("th",[t._v("实施费用标准（元）")]),t._v(" "),s("td",[t._v(t._s(t.htjbxx.ssbz))]),t._v(" "),s("th",[t._v("二开费用标准（元）")]),t._v(" "),s("td",[t._v(t._s(t.htjbxx.ekbz))]),t._v(" "),s("th"),t._v(" "),s("td")]),t._v(" "),s("tr",{attrs:{height:"100px"}},[s("th",{attrs:{rowspan:"2"}},[t._v("分包说明")]),t._v(" "),s("td",{attrs:{colspan:"5",rowspan:"2"}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.htjbxx.fbsm,expression:"htjbxx.fbsm"}],staticStyle:{width:"100%",padding:"4px 8px",resize:"none"},attrs:{rows:"4",placeholder:"请输入说明"},domProps:{value:t.htjbxx.fbsm},on:{input:function(e){e.target.composing||t.$set(t.htjbxx,"fbsm",e.target.value)}}})])])])]),t._v(" "),s("div",[s("h5",[t._v("业务域分包统计")]),t._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.ywyData,border:""}},[s("el-table-column",{attrs:{prop:"ywymc",label:"业务域","min-width":"200"}}),t._v(" "),s("el-table-column",{attrs:{prop:"zb",label:"占比",width:"110"}}),t._v(" "),s("el-table-column",{attrs:{prop:"htssry",label:"实施人月(合同)","min-width":"140"}}),t._v(" "),s("el-table-column",{attrs:{prop:"ssckbz",label:"实施参考标准","min-width":"140"}}),t._v(" "),s("el-table-column",{attrs:{prop:"fbssry",label:"实施人月(分包)","min-width":"140"}}),t._v(" "),s("el-table-column",{attrs:{prop:"htekry",label:"二开人月(合同)","min-width":"140"}}),t._v(" "),s("el-table-column",{attrs:{prop:"fbekry",label:"二开人月(分包)","min-width":"140"}})],1)],1),t._v(" "),s("div",[s("h5",[t._v("分包内容")]),t._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.fbData,border:""}},[s("el-table-column",{attrs:{prop:"ywymc",label:"业务域","min-width":"200","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"cpmc",label:"合同内容",width:"160","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"zb",label:"占比(%)",width:"90"}}),t._v(" "),s("el-table-column",{attrs:{prop:"htsm",label:"说明",width:"160","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"xmlb",label:"项目类别",width:"100"}}),t._v(" "),s("el-table-column",{attrs:{prop:"htssry",label:"实施人月(合同)","min-width":"90"}}),t._v(" "),s("el-table-column",{attrs:{prop:"ssckbz",label:"实施参考标准","min-width":"90"}}),t._v(" "),s("el-table-column",{attrs:{label:"实施人月(分包)","min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("input",{directives:[{name:"model",rawName:"v-model",value:e.row.fbssry,expression:"scope.row.fbssry"}],staticStyle:{width:"100%"},attrs:{type:"text",placeholder:"请输入金额"},domProps:{value:e.row.fbssry},on:{input:[function(s){s.target.composing||t.$set(e.row,"fbssry",s.target.value)},function(s){t.handleInputSSry(e.row.ywybh)}]}})]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"htekry",label:"二开人月(合同)","min-width":"90"}}),t._v(" "),s("el-table-column",{attrs:{label:"二开人月(分包)","min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("input",{directives:[{name:"model",rawName:"v-model",value:e.row.fbekry,expression:"scope.row.fbekry"}],staticStyle:{width:"100%"},attrs:{type:"text",placeholder:"请输入金额"},domProps:{value:e.row.fbekry},on:{input:[function(s){s.target.composing||t.$set(e.row,"fbekry",s.target.value)},function(s){t.handleInputEKry(e.row.ywybh)}]}})]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"说明","min-width":"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.row.fbsm,expression:"scope.row.fbsm"}],staticStyle:{width:"100%",padding:"4px 8px"},attrs:{placeholder:"请输入说明"},domProps:{value:e.row.fbsm},on:{input:function(s){s.target.composing||t.$set(e.row,"fbsm",s.target.value)}}})]}}])})],1)],1)])])])])},staticRenderFns:[]};var o=s("Z0/y")(b,l,!1,function(t){s("bKAK")},"data-v-eeead0fa",null);e.default=o.exports},bKAK:function(t,e){}});
//# sourceMappingURL=57.1b7d3da257eb5d5ed0ba.js.map