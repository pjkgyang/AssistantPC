webpackJsonp([118],{jSzW:function(t,e){},"jn/G":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("t5DY"),a("mmiC");var i=a("oFuF"),r=a("aCns"),n={data:function(){return{dataList:{},headList:[],archiveShow:!1,filterList:["keyword","yf","yfDate","rylx"],filterData:{keyword:"",yf:"",bm:"",rylx:[]},currentPage:1,pageSize:15,userGroup:""}},methods:{handleArchive:function(){var t=this;this.$confirm("是否确定封存此月数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$post(t.API.depositAssessmentData,{yf:t.filterData.yf,khlx:"2"}).then(function(e){"success"==e.state?e.data?(t.$alert("封存成功!","提示",{confirmButtonText:"确定",type:"success"}),t.archiveShow=!1):t.$alert("封存失败!","提示",{confirmButtonText:"确定",type:"error"}):t.$alert(e.msg,"提示",{confirmButtonText:"确定",type:"error"})})})},exportTable:function(){this.filterData.yf=this.filterData.yf?this.filterData.yf:"",window.open(window.baseurl+"assessment/exportydjlbb.do?bm="+this.filterData.bm+"&yf="+this.filterData.yf+"&startMonth="+this.filterData.startMonth+"&endMonth="+this.filterData.endMonth+"&rylx="+this.filterData.rylx.join(",")+"&keyword="+this.filterData.keyword)},handleCurrentChange:function(t){this.currentPage=t,this.ydjlb()},handleChangeFilter:function(t,e){this.filterData=t,this.currentPage=1,this.ydjlb(),e&&t.yf&&this.hasDepositData()},ydjlb:function(){var t=this;this.$get(this.API.ydjlb,{curPage:this.currentPage,pageSize:this.pageSize,bm:this.filterData.bm,yf:this.filterData.yf,startMonth:this.filterData.startMonth,endMonth:this.filterData.endMonth,rylx:this.filterData.rylx.join(","),keyword:this.filterData.keyword}).then(function(e){"success"==e.state?t.dataList=e.data:t.$alert(e.msg,"提示",{confirmButtonText:"确定",type:"error"})})},hasDepositData:function(){var t=this;this.$get(this.API.hasDepositData,{yf:this.filterData.yf,khlx:"2"}).then(function(e){"success"==e.state&&(t.userGroup.includes("ProblemAdmin")?t.archiveShow=!e.data:t.archiveShow=!1)})},handleXxwt:function(t,e,a){var i="",r=a[e].en.split(","),n={yf:this.filterData.yf,rywid:t[0]};if("ysjs"==r[0]||"ysdcs"==r[0]||"wgjs"==r[0]||"wgdcs"==r[0])i="/khbbdetail/lcbxq",n.ydjl=1;else if("wtpf"==r[0]||"wtqwjs"==r[0]||"wtqwdcs"==r[0]||"wtcnjs"==r[0]||"wtcndcs"==r[0]||"wtzfs"==r[0]||"wtzfjs"==r[0])i="/khbbdetail/ydjlwtxq";else if("tscls"==r[0])i="/khbbdetail/ts";else if("rbbts"==r[0])i="/rbdetail",n.sfbt="1",n.sfglpz="0",n.rywid=t[0];else{if("zbbts"!=r[0])return;i="/zbdetail",n.sfbt="1",n.sfglpz="0",n.rywid=t[0]}a[e].canRedirect&&(r[0]==r[1]||1==r.length?n[r[0]]=t[e]:r.forEach(function(t,e,a){0==e&&(n[t]=a[1])}));var s=this.$router.resolve({path:i,query:n});window.open(s.href,"_blank")}},mounted:function(){var t=this,e=(new Date).getFullYear()+"-"+((new Date).getMonth()+1<10?"0"+((new Date).getMonth()+1):(new Date).getMonth()+1);this.filterData.yf=Object(i.m)(e),this.$nextTick(function(){t.ydjlb()}),this.userGroup=JSON.parse(sessionStorage.getItem("userInfo")).userGroupTag,(this.userGroup.includes("ProblemAdmin")||this.userGroup.includes("JYGL"))&&this.filterList.push("bm"),this.hasDepositData()},activated:function(){},watch:{},components:{filterComponent:a("NxvJ").a,tableComponents:r.a}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("filterComponent",{attrs:{filterList:t.filterList,placeholder:"请输入姓名/工号"},on:{handleChangeFilter:t.handleChangeFilter}})],1),t._v(" "),a("div",[a("tableComponents",{attrs:{tableData:t.dataList,pageShow:!0,currentPage:t.currentPage,pageSize:t.pageSize,indexArr:[1,2,3],widthArr:[6],Width:"130",Height:0,archiveShow:t.archiveShow},on:{handleCurrentChange:t.handleCurrentChange,handleXxwt:t.handleXxwt,exportTable:t.exportTable,handleArchive:t.handleArchive}})],1)])},staticRenderFns:[]};var h=a("VU/8")(n,s,!1,function(t){a("jSzW")},null,null);e.default=h.exports}});
//# sourceMappingURL=118.136408d91376b409e9c9.js.map