webpackJsonp([15],{"1saR":function(e,t){},Wpcj:function(e,t){},XZD3:function(e,t,s){"use strict";var a=s("V/8j"),l={data:function(){return{schoolNamesOptions:[],schoolNames:"",unit:{dwbh:"",dwmc:""}}},mounted:function(){this.getDwByUser(!0,"")},methods:{changeUnit:function(e){if(e){var t;t=this.schoolNamesOptions.find(function(t){return t.wid===e}),this.unit.dwbh=t.wid,this.unit.dwmc=t.mc,this.$emit("handleChangeUnit",this.unit)}},remoteMethod:function(e){this.getDwByUser("",e)},getDwByUser:function(e,t){var s=this;Object(a.c)({dwlx:"",curPage:1,pageSize:9,keyword:t}).then(function(t){var a=t.data;"success"==a.state&&a.data.rows&&(s.schoolNamesOptions=a.data.rows,s.schoolNames=s.schoolNamesOptions[0].jc,s.unit.dwbh=a.data.rows[0].wid,s.unit.dwmc=a.data.rows[0].mc,e&&s.$emit("handleChangeUnit",s.unit))})}}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("span",{staticClass:"filter-weight"},[e._v("选择学校:")]),e._v(" "),s("el-select",{staticStyle:{width:"300px"},attrs:{filterable:"",remote:"",clearable:"",placeholder:"请选择",size:"small","remote-method":e.remoteMethod},on:{change:e.changeUnit},model:{value:e.schoolNames,callback:function(t){e.schoolNames=t},expression:"schoolNames"}},e._l(e.schoolNamesOptions,function(e,t){return s("el-option",{key:t,attrs:{label:e.mc,value:e.wid}})}))],1)},staticRenderFns:[]};var i=s("VU/8")(l,r,!1,function(e){s("1saR")},null,null);t.a=i.exports},bzVl:function(e,t){},hIV0:function(e,t){},"y+Gh":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("mvHQ"),l=s.n(a),r={name:"treeTable",props:["list"],data:function(){return{isDesc:!1,treeDataSource:[]}},watch:{list:{handler:function(){this.initTreeData()},deep:!0},isDesc:function(e,t){this.$emit("orderByFunc",e)}},computed:{},methods:{initTreeData:function(){var e=JSON.parse(l()(this.list));!function e(t,s){t.map(function(t,a){t.isExpand=!!t.isExpand&&t.isExpand,t.children=t.children||[],t.level=s,t.bLeft=1===s?34:16*(s-2)+34,t.Experience=t.Experience||"无",t.children.length>0&&e(t.children,s+1)})}(e,1),this.treeDataSource=e},actionFunc:function(e,t){this.$emit("actionFunc",e,t)},handlerExpand:function(e){this.$emit("handlerExpand",e)},handlerChooseModel:function(e){this.$emit("handlerChooseModel",e)}},components:{treeItem:function(){return s.e(131).then(s.bind(null,"5dAE"))}},mounted:function(){var e=this;e.$nextTick(function(){e.initTreeData()})}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"tree-list"},[s("div",{staticClass:"tree-wrap",attrs:{id:"scrollWrap"}},[s("div",{staticClass:"tree-body"},[e.treeDataSource.length>0?s("table",[s("tbody",[s("tr",[s("td",e._l(e.treeDataSource,function(t,a){return s("tree-item",{key:"root_node_"+a,attrs:{root:0,num:a,nodes:e.treeDataSource.length,trees:e.treeDataSource,model:t},on:{actionFunc:e.actionFunc,handlerExpand:e.handlerExpand,handlerChooseModel:e.handlerChooseModel,"update:trees":function(t){e.treeDataSource=t},"update:model":function(e){t=e}}})}))])])]):e._e()])])])},staticRenderFns:[]};var o=s("VU/8")(r,i,!1,function(e){s("bzVl")},null,null).exports,n={data:function(){return{dialogVisible:this.show,fwlbList:[],fwdxList:[],form:{fwmc:"",fwdx:[],lxfs:"",bsyj:"",fwzn:0,xxhzc:0,fwznsm:"",fwlb:"",fwnr:""}}},props:{show:{type:Boolean,default:!1}},watch:{show:function(e,t){e&&this.getService(),this.dialogVisible=this.show}},methods:{getService:function(){var e=this;this.$get(this.API.serviceObjects,{}).then(function(t){"success"==t.state?e.fwdxList=t.data:e.$message({message:t.msg,type:"error"})}),this.$get(this.API.serviceCatalogs,{}).then(function(t){"success"==t.state?e.fwlbList=t.data:e.$message({message:t.msg,type:"error"})})},onSubmit:function(){this.valiDate()&&this.$emit("handleCommitService",this.form)},valiDate:function(){return this.form.fwmc?this.form.fwdx.length?/^(\(\d{3,4}\)|\d{3,4}-|\s)?\d{7,14}$/.test(this.form.lxfs)&&/^1(3|4|5|6|7|8|9)\d{9}$/.test(this.form.lxfs)?this.form.bsyj?this.form.fwzn&&this.form.fwznsm?(this.$message({message:"请填写服务指南说明",type:"warning"}),!1):this.form.fwlb?!!/\S/.test(this.form.fwnr)||(this.$message({message:"请填写服务内容",type:"warning"}),!1):(this.$message({message:"请选择服务类别",type:"warning"}),!1):(this.$message({message:"请填写联系方式",type:"warning"}),!1):(this.$message({message:"请填写正确联系方式",type:"warning"}),!1):(this.$message({message:"请选择服务对象",type:"warning"}),!1):(this.$message({message:"请填写服务名称",type:"warning"}),!1)}}},c={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{title:"服务事项基本信息",visible:e.dialogVisible,"append-to-body":!0,"close-on-click-modal":!1,show:e.show,width:"1000px"},on:{"update:visible":function(t){e.dialogVisible=t},close:function(t){e.$emit("update:show",!1)}}},[s("el-form",{ref:"form",staticStyle:{padding:"10px"},attrs:{model:e.form,"label-width":"110px",size:"mini"}},[s("div",{attrs:{flex:""}},[s("el-form-item",{attrs:{label:"服务名称",required:""}},[s("el-input",{staticStyle:{width:"380px"},attrs:{placeholder:"请输入服务名称"},model:{value:e.form.fwmc,callback:function(t){e.$set(e.form,"fwmc",t)},expression:"form.fwmc"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"服务对象",required:""}},[s("el-select",{staticStyle:{width:"380px"},attrs:{multiple:"",placeholder:"请选择服务对象"},model:{value:e.form.fwdx,callback:function(t){e.$set(e.form,"fwdx",t)},expression:"form.fwdx"}},e._l(e.fwdxList,function(e,t){return s("el-option",{key:t,attrs:{label:e.text,value:e.id}})}))],1)],1),e._v(" "),s("div",{attrs:{flex:""}},[s("el-form-item",{attrs:{label:"联系方式",required:""}},[s("el-input",{staticStyle:{width:"380px"},attrs:{type:"number",placeholder:"请输入联系方式"},model:{value:e.form.lxfs,callback:function(t){e.$set(e.form,"lxfs",t)},expression:"form.lxfs"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"办事依据",required:""}},[s("el-input",{staticStyle:{width:"380px"},attrs:{placeholder:"请输入办事依据"},model:{value:e.form.bsyj,callback:function(t){e.$set(e.form,"bsyj",t)},expression:"form.bsyj"}})],1)],1),e._v(" "),s("div",{attrs:{flex:""}},[s("el-form-item",{attrs:{label:"服务指南",required:""}},[s("el-radio-group",{staticStyle:{width:"380px"},model:{value:e.form.fwzn,callback:function(t){e.$set(e.form,"fwzn",t)},expression:"form.fwzn"}},[s("el-radio",{attrs:{label:1}},[e._v("有")]),e._v(" "),s("el-radio",{attrs:{label:0}},[e._v("无")])],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"信息化支持",required:""}},[s("el-radio-group",{staticStyle:{width:"380px"},model:{value:e.form.xxhzc,callback:function(t){e.$set(e.form,"xxhzc",t)},expression:"form.xxhzc"}},[s("el-radio",{attrs:{label:1}},[e._v("有")]),e._v(" "),s("el-radio",{attrs:{label:0}},[e._v("无")])],1)],1)],1),e._v(" "),e.form.fwzn?s("el-form-item",{attrs:{label:"服务指南说明",required:""}},[s("el-input",{attrs:{type:"textarea",placeholder:"服务指南说明"},model:{value:e.form.fwznsm,callback:function(t){e.$set(e.form,"fwznsm",t)},expression:"form.fwznsm"}})],1):e._e(),e._v(" "),s("el-form-item",{attrs:{label:"服务类别"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择服务类别"},model:{value:e.form.fwlb,callback:function(t){e.$set(e.form,"fwlb",t)},expression:"form.fwlb"}},e._l(e.fwlbList,function(e,t){return s("el-option",{key:t,attrs:{label:e.text,value:e.id}})}))],1),e._v(" "),s("el-form-item",{attrs:{label:"服务内容"}},[s("el-input",{attrs:{type:"textarea",placeholder:"请输入服务内容"},model:{value:e.form.fwnr,callback:function(t){e.$set(e.form,"fwnr",t)},expression:"form.fwnr"}})],1),e._v(" "),s("el-form-item",{attrs:{"text-right":""}},[s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")]),e._v(" "),s("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var d=s("VU/8")(n,c,!1,function(e){s("hIV0")},null,null).exports,m={data:function(){return{dialogVisible:this.show,fwlbList:[{mc:"服务类别",label:1}],fwdxList:[{mc:"服务类别",label:1}],form:{jsnf:"",cjgs:"",jszt:"",xxzxdjls:"",ywbmdjls:"",sxsj:"",sxfs:"",fwznzrr:"",fwznwczt:"",fwznwcsj:"",sszrr:"",sswczt:"",sswcsj:"",kfzrr:"",kfwczt:"",kfwcsj:"",syqk:""},rules:{jsnf:[{required:!0,message:"请输入建设年份",trigger:"blur"}],cjgs:[{required:!0,message:"请输入承建公司",trigger:"blur"}],jszt:[{required:!0,message:"请选择建设状态",trigger:"change"}],xxzxdjls:[{required:!0,message:"请输入信息中心对接老师",trigger:"blur"}],ywbmdjls:[{required:!0,message:"请输入业务部门对接老师",trigger:"blur"}]}}},props:{show:{type:Boolean,default:!1}},watch:{show:function(e,t){this.dialogVisible=this.show}},methods:{submitForm:function(e){this.valiDate()&&this.$emit("handleCommitSSjh",this.form)},valiDate:function(){return this.form.jsnf?this.form.cjgs?this.form.jszt?this.form.xxzxdjls?!!this.form.ywbmdjls||(this.$message({message:"请输入业务部门对接老师",type:"warning"}),!1):(this.$message({message:"请输入信息中心对接老师",type:"warning"}),!1):(this.$message({message:"请选择建设状态",type:"warning"}),!1):(this.$message({message:"请输入承建公司",type:"warning"}),!1):(this.$message({message:"请输入建设年份",type:"warning"}),!1)}}},f={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{title:"实施计划",visible:e.dialogVisible,"append-to-body":!0,"close-on-click-modal":!1,show:e.show,width:"1000px"},on:{"update:visible":function(t){e.dialogVisible=t},close:function(t){e.$emit("update:show",!1)}}},[s("el-form",{ref:"form",staticStyle:{padding:"10px"},attrs:{model:e.form,rules:e.rules,"label-width":"110px",size:"mini"}},[s("div",{attrs:{flex:""}},[s("el-form-item",{attrs:{label:"建设年份",required:""}},[s("el-input",{staticStyle:{width:"216px"},attrs:{placeholder:"请输入建设年份"},model:{value:e.form.jsnf,callback:function(t){e.$set(e.form,"jsnf",t)},expression:"form.jsnf"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"承建公司",required:""}},[s("el-input",{staticStyle:{width:"216px"},attrs:{placeholder:"请输入承建公司"},model:{value:e.form.cjgs,callback:function(t){e.$set(e.form,"cjgs",t)},expression:"form.cjgs"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"建设状态",required:""}},[s("el-select",{staticStyle:{width:"216px"},attrs:{placeholder:"请选择建设状态"},model:{value:e.form.jszt,callback:function(t){e.$set(e.form,"jszt",t)},expression:"form.jszt"}},[s("el-option",{attrs:{label:"在建",value:"1"}}),e._v(" "),s("el-option",{attrs:{label:"售后",value:"2"}}),e._v(" "),s("el-option",{attrs:{label:"服务",value:"3"}})],1)],1)],1),e._v(" "),s("div",{attrs:{flex:""}},[s("el-form-item",{attrs:{label:"信息中心对接老师",required:""}},[s("el-input",{staticStyle:{width:"216px"},attrs:{placeholder:"请输入信息中心对接老师"},model:{value:e.form.xxzxdjls,callback:function(t){e.$set(e.form,"xxzxdjls",t)},expression:"form.xxzxdjls"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"业务部门对接老师",required:""}},[s("el-input",{staticStyle:{width:"216px"},attrs:{placeholder:"请输入业务部门对接老师"},model:{value:e.form.ywbmdjls,callback:function(t){e.$set(e.form,"ywbmdjls",t)},expression:"form.ywbmdjls"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"上线时间"}},[s("el-date-picker",{staticStyle:{width:"216px"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.sxsj,callback:function(t){e.$set(e.form,"sxsj",t)},expression:"form.sxsj"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"实现方式"}},[s("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入实现方式"},model:{value:e.form.sxfs,callback:function(t){e.$set(e.form,"sxfs",t)},expression:"form.sxfs"}})],1),e._v(" "),s("div",{attrs:{flex:""}},[s("el-form-item",{attrs:{label:"服务指南整理责任人"}},[s("el-input",{staticStyle:{width:"216px"},attrs:{placeholder:"请输入服务指南整理责任人"},model:{value:e.form.fwznzrr,callback:function(t){e.$set(e.form,"fwznzrr",t)},expression:"form.fwznzrr"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"完成状态"}},[s("el-select",{staticStyle:{width:"216px"},attrs:{placeholder:"请选择完成状态"},model:{value:e.form.fwznwczt,callback:function(t){e.$set(e.form,"fwznwczt",t)},expression:"form.fwznwczt"}},[s("el-option",{attrs:{label:"已完成",value:"1"}}),e._v(" "),s("el-option",{attrs:{label:"未完成",value:"0"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"完成时间"}},[s("el-date-picker",{staticStyle:{width:"216px"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.fwznwcsj,callback:function(t){e.$set(e.form,"fwznwcsj",t)},expression:"form.fwznwcsj"}})],1)],1),e._v(" "),s("div",{attrs:{flex:""}},[s("el-form-item",{attrs:{label:"实施责任人"}},[s("el-input",{staticStyle:{width:"216px"},attrs:{placeholder:"请输入实施责任人"},model:{value:e.form.sszrr,callback:function(t){e.$set(e.form,"sszrr",t)},expression:"form.sszrr"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"完成状态"}},[s("el-select",{staticStyle:{width:"216px"},attrs:{placeholder:"请选择完成状态"},model:{value:e.form.sswczt,callback:function(t){e.$set(e.form,"sswczt",t)},expression:"form.sswczt"}},[s("el-option",{attrs:{label:"已完成",value:"1"}}),e._v(" "),s("el-option",{attrs:{label:"未完成",value:"0"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"完成时间"}},[s("el-date-picker",{staticStyle:{width:"216px"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.sswcsj,callback:function(t){e.$set(e.form,"sswcsj",t)},expression:"form.sswcsj"}})],1)],1),e._v(" "),s("div",{attrs:{flex:""}},[s("el-form-item",{attrs:{label:"开发责任人"}},[s("el-input",{staticStyle:{width:"216px"},attrs:{placeholder:"请输入开发责任人"},model:{value:e.form.kfzrr,callback:function(t){e.$set(e.form,"kfzrr",t)},expression:"form.kfzrr"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"完成状态"}},[s("el-select",{staticStyle:{width:"216px"},attrs:{placeholder:"请选择完成状态"},model:{value:e.form.kfwczt,callback:function(t){e.$set(e.form,"kfwczt",t)},expression:"form.kfwczt"}},[s("el-option",{attrs:{label:"已完成",value:"1"}}),e._v(" "),s("el-option",{attrs:{label:"未完成",value:"0"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"完成时间"}},[s("el-date-picker",{staticStyle:{width:"216px"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.kfwcsj,callback:function(t){e.$set(e.form,"kfwcsj",t)},expression:"form.kfwcsj"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"使用情况"}},[s("el-input",{attrs:{type:"textarea",rows:"4",placeholder:"请输入使用情况"},model:{value:e.form.syqk,callback:function(t){e.$set(e.form,"syqk",t)},expression:"form.syqk"}})],1),e._v(" "),s("el-form-item",{attrs:{"text-right":""}},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v("保存")]),e._v(" "),s("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var u={data:function(){return{jbxxShow:!1,ssjhShow:!1,treeDataSource:[],currentPage:1,pageSize:15,records:0,tableData:[],unit:{},curDept:{}}},methods:{handleChangeUnit:function(e){this.curDept={},this.unit=e,this.treeDept(),this.pageServiceItem()},handleCommitService:function(e){var t=this,s=e;s.fwdx=e.fwdx.join(","),s.bmbh=this.curDept.id,s.bmmc=this.curDept.title,this.$post(this.API.saveServiceItem,s).then(function(e){"success"==e.state?(t.$message({message:"添加成功",type:"success"}),t.pageServiceItem()):t.$message({message:e.msg,type:"error"})})},handleCurrentChange:function(e){this.currentPage=e,this.pageServiceItem()},handlerExpand:function(e){e.isExpand=!e.isExpand},handlerChooseModel:function(e){this.curDept=e},handleAddService:function(){this.jbxxShow=!0},handleOperate:function(e,t){"edit"==e?this.jbxxShow=!0:"ssjh"==e&&(this.ssjhShow=!0)},pageServiceItem:function(){var e=this;this.$get(this.API.pageServiceItem,{curPage:this.currentPage,pageSize:this.pageSize,dwbh:this.unit.dwbh}).then(function(t){"success"==t.state&&(console.log(t),t.data&&t.data.rows?e.tableData=t.data.rows:e.tableData=[],e.records=t.data.records)})},treeDept:function(){var e=this;this.$get(this.API.treeDeptWithUnit,{dwbh:this.unit.dwbh,dwmc:this.unit.dwmc,zts:"1,3"}).then(function(t){"success"==t.state&&(e.treeDataSource=t.data)})}},components:{treeTable:o,jbxxDailog:d,ssjhDailog:s("VU/8")(m,f,!1,function(e){s("zesa")},null,null).exports,chooseSchool:s("XZD3").a}},h={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pd-10 jh-pannel"},[s("div",{staticClass:"mg-12"},[s("chooseSchool",{on:{handleChangeUnit:e.handleChangeUnit}})],1),e._v(" "),s("div",[s("div",{staticClass:"tree"},[s("tree-table",{ref:"recTree",attrs:{list:e.treeDataSource},on:{"update:list":function(t){e.treeDataSource=t},handlerExpand:e.handlerExpand,handlerChooseModel:e.handlerChooseModel}})],1),e._v(" "),s("div",{staticClass:"form"},[e.curDept.parentId?s("div",[s("el-button",{staticClass:"mg-12",attrs:{size:"mini",type:"primary"},on:{click:e.handleAddService}},[e._v("添加服务事项")])],1):e._e(),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[s("el-table-column",{attrs:{fixed:"left",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){e.handleOperate("edit",t.row)}}},[e._v("编辑")]),e._v(" "),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){e.handleOperate("ssjh",t.row)}}},[e._v("编辑实施计划")]),e._v(" "),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){e.handleOperate("check",t.row)}}},[e._v("查看")])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"date",label:"服务对象",width:"180"}}),e._v(" "),s("el-table-column",{attrs:{prop:"name",label:"服务事项",width:"180"}}),e._v(" "),s("el-table-column",{attrs:{prop:"address",label:"服务类别",width:"180"}}),e._v(" "),s("el-table-column",{attrs:{prop:"date",label:"服务指南",width:"180"}}),e._v(" "),s("el-table-column",{attrs:{prop:"name",label:"信息化支持",width:"180"}}),e._v(" "),s("el-table-column",{attrs:{prop:"address",label:"建设状态",width:"180"}}),e._v(" "),s("el-table-column",{attrs:{prop:"date",label:"上线时间",width:"180"}}),e._v(" "),s("el-table-column",{attrs:{prop:"name",label:"承建公司",width:"180"}})],1),e._v(" "),s("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total, prev, pager, next",total:e.records},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)]),e._v(" "),s("jbxxDailog",{attrs:{show:e.jbxxShow},on:{"update:show":function(t){e.jbxxShow=t},handleCommitService:e.handleCommitService}}),e._v(" "),s("ssjhDailog",{attrs:{show:e.ssjhShow},on:{"update:show":function(t){e.ssjhShow=t}}})],1)},staticRenderFns:[]};var p=s("VU/8")(u,h,!1,function(e){s("Wpcj")},null,null);t.default=p.exports},zesa:function(e,t){}});
//# sourceMappingURL=15.d8f9db0f7d1a83f60604.js.map