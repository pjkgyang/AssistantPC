webpackJsonp([137],{kJzo:function(t,e){},mCBY:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{fwdxList:[],fwlbList:[],fwznList:[{id:"",label:"全部"},{id:"1",label:"有"},{id:"0",label:"无"}],xxhzcList:[{id:"",label:"全部"},{id:"1",label:"有"},{id:"0",label:"无"}],jsztList:[{id:"",label:"全部"},{id:1,label:"在建"},{id:2,label:"售后"},{id:3,label:"服务"}],filterData:{fwlb:"",fwdx:[],bmbh:"",fwzn:"",xxhzc:"",jszt:"",jsnfStart:"",jsnfEnd:"",keyword:""},checkAll:!1,isIndeterminate:!0,unitData:{},tableData:[],props:{value:"id",label:"title"},options:[],currentPage:1,pageSize:15,records:0}},mounted:function(){this.$route.query.id?(this.pageSize=20,this.filterData.bmbh=this.$route.query.id,this.unitData.dwbh=this.$route.query.bh,this.filterData.xxhzc=this.$route.query.xxh?this.$route.query.xxh:"",this.filterData.fwzn=this.$route.query.fwzn?this.$route.query.fwzn:"",this.filterData.jsnfStart=this.$route.query.s,this.filterData.jsnfEnd=this.$route.query.e,this.pageServiceItem()):this.getService()},methods:{handleSearch:function(){this.currentPage=1,this.pageServiceItem()},handleExport:function(){},handleCheckAllChange:function(){},handleCheckedFwdxChange:function(){},CheckFwlb:function(t){this.currentPage=1,this.filterData.fwlb=t,this.pageServiceItem()},CheckFwzn:function(t){this.currentPage=1,this.filterData.fwzn=t,this.pageServiceItem()},CheckXxhzc:function(t){this.currentPage=1,this.filterData.xxhzc=t,this.pageServiceItem()},CheckZt:function(t){this.currentPage=1,this.filterData.jszt=t,this.pageServiceItem()},handleCurrentChange:function(t){this.currentPage=t,this.pageServiceItem()},handleChangeUnit:function(t){this.unitData=t,this.treeDept(),this.pageServiceItem()},pageServiceItem:function(){var t=this;this.$get(this.API.pageServiceItemPlan,{curPage:this.currentPage,pageSize:this.pageSize,dwbh:this.unitData.dwbh,bmbh:this.filterData.bmbh,fwdx:this.filterData.fwdx.join(","),fwlb:this.filterData.fwlb,fwzn:this.filterData.fwzn,xxhzc:this.filterData.xxhzc,jszt:this.filterData.jszt,jsnfStart:this.filterData.jsnfStart,jsnfEnd:this.filterData.jsnfEnd,keyword:this.filterData.keyword,onlyNewest:1}).then(function(e){"success"==e.state?(e.data.rows?t.tableData=e.data.rows:t.tableData=[],t.records=e.data.records):t.$message({message:e.msg,type:"error"})})},getService:function(){var t=this;this.$get(this.API.serviceObjects,{}).then(function(e){"success"==e.state?t.fwdxList=e.data:t.$message({message:e.msg,type:"error"})}),this.$get(this.API.serviceCatalogs,{}).then(function(e){"success"==e.state?t.fwlbList=e.data:t.$message({message:e.msg,type:"error"})})},treeDept:function(){var t=this;this.$get(this.API.treeDeptWithUnit,{dwbh:this.unitData.dwbh,dwmc:this.unitData.dwmc,zts:"1,3"}).then(function(e){"success"==e.state&&(t.options=e.data)})}},components:{chooseSchool:a("XZD3").a}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fwsxtj-pannel"},[a("div",{staticClass:"pannelPaddingBg-10"},[t.$route.query.id?t._e():a("div",[a("div",{staticStyle:{padding:"12px 40px"}},[a("chooseSchool",{on:{handleChangeUnit:t.handleChangeUnit}})],1),t._v(" "),a("div",{attrs:{flex:""}},[a("span",{staticClass:"query-title",staticStyle:{padding:"2px 4px","margin-right":"10px"}},[t._v("高级查询:")]),t._v(" "),a("el-input",{staticClass:"search-input",staticStyle:{width:"500px"},attrs:{placeholder:"请输入项目编号/项目名称/合同编号/项目经理/学校","prefix-icon":"el-icon-search",size:"mini"},on:{change:t.handleSearch},model:{value:t.filterData.keyword,callback:function(e){t.$set(t.filterData,"keyword",e)},expression:"filterData.keyword"}}),t._v("　\n        "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleSearch}},[t._v("搜索")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleExport}},[t._v("导出")])],1),t._v(" "),a("div",{staticClass:"mg-12",attrs:{colcenter:""}},[a("span",{staticClass:"query-title"},[t._v("服务对象:")]),t._v(" "),a("p",{staticStyle:{width:"90%"},attrs:{flex:""}},[a("el-checkbox-group",{on:{change:t.handleCheckedFwdxChange},model:{value:t.filterData.fwdx,callback:function(e){t.$set(t.filterData,"fwdx",e)},expression:"filterData.fwdx"}},t._l(t.fwdxList,function(e,i){return a("el-checkbox",{key:i,attrs:{label:e.id}},[t._v(t._s(e.text))])}))],1)]),t._v(" "),a("div",{staticClass:"mg-12",attrs:{flex:""}},[a("span",{staticClass:"query-title"},[t._v("服务类别:")]),t._v(" "),a("p",{staticClass:"query-list"},[a("span",{class:{"bg-active":""==t.filterData.fwlb}},[t._v("全部")]),t._v(" "),t._l(t.fwlbList,function(e,i){return a("span",{key:i,class:{"bg-active":e.id==t.filterData.fwlb},on:{click:function(a){t.CheckFwlb(e.id)}}},[t._v(t._s(e.text))])})],2)]),t._v(" "),a("div",{staticClass:"mg-12",attrs:{flex:""}},[a("span",{staticClass:"query-title"},[t._v("服务指南:")]),t._v(" "),a("p",{staticClass:"query-list"},t._l(t.fwznList,function(e,i){return a("span",{key:i,class:{"bg-active":e.id==t.filterData.fwzn},on:{click:function(a){t.CheckFwzn(e.id)}}},[t._v(t._s(e.label))])}))]),t._v(" "),a("div",{staticClass:"mg-12",attrs:{flex:""}},[a("span",{staticClass:"query-title"},[t._v("信息化支持:")]),t._v(" "),a("p",{staticClass:"query-list"},t._l(t.xxhzcList,function(e,i){return a("span",{key:i,class:{"bg-active":e.id==t.filterData.xxhzc},on:{click:function(a){t.CheckXxhzc(e.id)}}},[t._v(t._s(e.label))])}))]),t._v(" "),a("div",{staticClass:"mg-12",attrs:{flex:""}},[a("span",{staticClass:"query-title"},[t._v("在建状态:")]),t._v(" "),a("p",{staticClass:"query-list"},t._l(t.jsztList,function(e,i){return a("span",{key:i,class:{"bg-active":e.id==t.filterData.jszt},on:{click:function(a){t.CheckZt(e.id)}}},[t._v(t._s(e.label))])}))]),t._v(" "),a("div",{staticClass:"mg-12",attrs:{flex:""}},[a("span",{staticClass:"query-title"},[t._v("建设年份:")]),t._v(" "),a("p",{staticClass:"query-list"},[a("el-date-picker",{attrs:{size:"mini",align:"right",type:"year",placeholder:"选择开始年"},model:{value:t.filterData.jsnfStart,callback:function(e){t.$set(t.filterData,"jsnfStart",e)},expression:"filterData.jsnfStart"}}),t._v("到\n          "),a("el-date-picker",{attrs:{size:"mini",align:"right",type:"year",placeholder:"选择结束年"},model:{value:t.filterData.jsnfEnd,callback:function(e){t.$set(t.filterData,"jsnfEnd",e)},expression:"filterData.jsnfEnd"}})],1)])]),t._v(" "),a("div",{staticClass:"pd-10"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"fwmc",label:"服务名称","min-width":"220"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bmmc",label:"部门名称",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bsyj",label:"办事依据","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fwdx",label:"服务对象","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fwlb",label:"服务类别",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fwzn",label:"服务指南",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s("0"==e.row.fwzn?"无":"有"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"xxhzc",label:"信息化支持",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s("0"==e.row.xxhzc?"无":"有"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"xxhsxsj",label:"上线时间",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"xxhjszt",label:"建设状态",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cjgs",label:"承建公司"}}),t._v(" "),a("el-table-column",{attrs:{prop:"syqk",label:"使用情况",width:"200","show-overflow-tooltip":""}})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"total, prev, pager, next",total:t.records},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)])])},staticRenderFns:[]};var l=a("VU/8")(i,s,!1,function(t){a("kJzo")},null,null);e.default=l.exports}});
//# sourceMappingURL=137.ace554c14c2d3470d4e7.js.map