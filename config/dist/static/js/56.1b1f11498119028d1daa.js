webpackJsonp([56],{"0sM7":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("aozt");var a=s("9A7R"),i=s("IfOk"),n=s("t5DY"),l=s("oFuF"),c=s("Vnos"),o=s("3fu1"),r=s("9+vf"),u=s("kAAd"),d={data:function(){return{questionTitle:"提交问题",show:!1,gxrShow:!1,sqgbShow:!1,cnjsrq:"",question:{wtlb:"",sfjj:"",wtjb:"",cp:"",yxfw:"",sfbug:"",bbh:"",title:"",nr:"",wid:"",qwjjrq:"",qwjjrqO:"",cnjsrq:""},queryLJshow:!0,keyword:"",questionList:[],pageSize:10,CurrentPage:1,total:null,wxyztlist:[],gczdList:[],wtflList:[{label:"1",mc:"待我解决问题"},{label:"0",mc:"我的提问"},{label:"3",mc:"我受理过的问题"},{label:"2",mc:"我相关的问题"},{label:"4",mc:"待我受理的问题"}],dwlxList:[{label:"1",mc:"学校"},{label:"0",mc:"金智"},{label:"2",mc:"合作伙伴"}],wjjztlist:[],cpline:[],cplist:[],wtlb:[],cnqxList:[],cnqx:"",wtlbbg:"",sfjj:"",sfcb:"",cpxbg:"",cpbg:"",sfbug:"",cxzt:"0",sqgb:"",wxyztbg:"",wjjztbg:"",gczd:"",wtfl:"",dwlx:"",qusetionInfo:{},wid:"",xmbh:"",xmmc:"",tjkf:"",accreditShow:!1,showCondition:"",isJZuser:"",baseUrl:"",starDay:"",endDay:"",date:[],userGroupTag:"",fwzl:1,wtInfo:{},index:""}},props:{},mounted:function(){var t=this;this.isJZuser=sessionStorage.getItem("isJZuser"),this.userGroupTag=JSON.parse(sessionStorage.getItem("userInfo")).userGroupTag,Object(i.P)().then(function(e){var s=e.data;t.showCondition=s.data,1!=s.data&&2!=s.data||(null==Object(l.n)("UnResponsiveStatus")?(Object(l.i)("UnResponsiveStatus",t.wxyztlist,""),Object(l.i)("ProblemSolutionState",t.wjjztlist,""),Object(l.i)("cpx",t.cpline,!0),Object(l.i)("gczd",t.gczdList,!0)):(t.wxyztlist=Object(l.n)("UnResponsiveStatus"),t.wjjztlist=Object(l.n)("ProblemSolutionState"),t.cpline=Object(l.n)("cpx"),t.gczdList=Object(l.n)("gczd")))}),Object(l.n)("ProblemType")&&Object(l.n)("cp")&&Object(l.n)("DeadlineStatus")?(this.wtlb=Object(l.n)("ProblemType"),this.cplist=Object(l.n)("cp"),this.cnqxList=Object(l.n)("DeadlineStatus")):(Object(l.i)("ProblemType",this.wtlb,""),Object(l.i)("cp",this.cplist,!0),Object(l.i)("DeadlineStatus",this.cnqxList,""))},methods:{handleReject:function(t,e,s){var a=this;Object(i.b)({wid:"",zbwid:t.wid,sm:s}).then(function(t){var s=t.data;"success"==s.state?a.$alert("已成功驳回！","提示",{confirmButtonText:"确定",type:"success",callback:function(t){a.questionList[e].sqgbCount=0}}):a.$alert(s.msg,"提示",{confirmButtonText:"确定",type:"error"})})},handleClose:function(t,e){this.wtInfo=t,this.index=e,this.gxrShow=!this.gxrShow},closeQuestion:function(){this.gxrShow=!this.gxrShow,this.questionList[this.index].fbzt=1,this.questionList[this.index].sqgbCount=0},handleExport:function(){this.keyword=this.keyword?this.keyword:"",window.open(window.baseurl+"question/exportQuestionReport.do?noResponse="+this.wxyztbg+"&urgent="+this.sfjj+"&cp="+this.cpbg+"&cpx="+this.cpxbg+"&bug="+this.sfbug+"&jjzt="+this.wjjztbg+"&zt="+this.cxzt+"&keyword="+this.keyword+"&qyzd="+this.gczd+"&wtfl="+this.wtfl+"&dwlx="+this.dwlx+"&cb="+this.sfcb+"&wtlb="+this.wtlbbg+"&sqgb="+this.sqgb+"&deadline="+this.cnqx+"&starDay="+this.starDay+"&endDay="+this.endDay+"&xmbh=")},handleTWsuccess:function(){switch(this.questionTitle){case"我要提问":this.queryAllQuestions(1);break;case"编辑问题":this.queryAllQuestions(this.CurrentPage)}},handleQueryShow:function(){this.queryLJshow=!this.queryLJshow},handleQuestion:function(){var t=this;Object(i.e)().then(function(e){var s=e.data;"success"==s.state&&(s.data>=1?t.$alert("您有"+s.data+"个问题已解决申请待确认，如果已解决请点击“关闭”，如果未解决请点击“驳回”，所有申请处理后可以提新问题，谢谢支持！"," 提示",{confirmButtonText:"确定",type:"warning",callback:function(e){t.sqgbShow=!t.sqgbShow}}):(t.accreditShow=!1,t.questionTitle="我要提问",t.show=!0))})},handleQuestionDetail:function(t){var e=this.$router.resolve({name:"questionDetail",query:{wid:t.wid}});window.open(e.href,"_blank")},editQuestion:function(t){var e=this;this.questionTitle="编辑问题",Object(n.b)({wid:t.wid}).then(function(s){var a=s.data;"success"==a.state&&(a.data?Object(i.B)({wid:t.wid}).then(function(t){var s=t.data;"success"==s.state?(e.qusetionInfo=s.data,e.accreditShow=!1,e.show=!0):e.$alert(s.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})}):e.$alert("该条问题已有回复，不可编辑","提示",{confirmButtonText:"确定",callback:function(t){}}))})},deleteQuestion:function(t){var e=this;this.$confirm("是否删除该条问题?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.k)({wids:t.wid}).then(function(t){var s=t.data;"success"==s.state?e.$alert("删除成功","提示",{confirmButtonText:"确定",type:"success",callback:function(t){e.queryAllQuestions(1)}}):e.$alert(s.msg,"提示",{confirmButtonText:"确定",type:"error",callback:function(t){}})})}).catch(function(){})},searchQuestion:function(){this.queryAllQuestions(1)},handlequeryQuestion:function(){this.queryAllQuestions(1)},handleCurrentChange:function(t){this.queryAllQuestions(t)},handleDatepick:function(){this.date.length?(this.starDay=this.date[0]?this.date[0]:"",this.endDay=this.date[1]?this.date[1]:""):this.starDay=this.endDay="",this.queryAllQuestions(1)},handleSFJJ:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.sfjj=e,this.queryAllQuestions(1))},handleSFCB:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.sfcb=e,this.queryAllQuestions(1))},handleTJKF:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.tjkf=e,this.queryAllQuestions(1))},handleCPX:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.cpxbg=e,this.queryAllQuestions(1))},handleCP:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.cpbg=e,this.queryAllQuestions(1))},handleWTLB:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.wtlbbg=e,this.queryAllQuestions(1))},handleSFBUG:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.sfbug=e,this.queryAllQuestions(1))},handleCXZT:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.cxzt=e,this.queryAllQuestions(1))},handleSQGB:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.sqgb=e,this.queryAllQuestions(1))},handleWXYZT:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.wxyztbg=e,this.queryAllQuestions(1))},handleWJJZT:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.wjjztbg=e,this.queryAllQuestions(1))},handleCNQX:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.cnqx=e,this.queryAllQuestions(1))},handleGCZD:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.gczd=e,this.queryAllQuestions(1))},handleDWLX:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.dwlx=e,this.queryAllQuestions(1))},handleZXR:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.wtfl=e,this.queryAllQuestions(1))},queryAllQuestions:function(t){var e=this;Object(i.t)({curPage:t,pageSize:this.pageSize,xmbh:"",urgent:this.sfjj,cp:this.cpbg,cpx:this.cpxbg,bug:this.sfbug,noResponse:this.wxyztbg,jjzt:this.wjjztbg,zt:this.cxzt,keyword:this.keyword,qyzd:this.gczd,wtfl:this.wtfl,dwlx:this.dwlx,cb:this.sfcb,wtlb:this.wtlbbg,sqgb:this.sqgb,deadline:this.cnqx,starDay:this.starDay,endDay:this.endDay,tjkf:this.tjkf}).then(function(t){var s=t.data;"success"==s.state&&(s.data&&0!=s.data.rows.length?e.questionList=s.data.rows:e.questionList=[],e.total=s.data.records)})}},watch:{},activated:function(){this.$route.params&&(this.keyword=this.$route.params.dwmc),this.queryAllQuestions(1),this.baseUrl=window.baseurl},components:{pagination:a.a,twDialog:c.a,gxrDialog:o.a,sqgbwtDialog:r.a,questionCard:u.a}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"project-question"},[s("div",{staticClass:"project-question-query"},[s("div",[s("span",{staticClass:"query-title"},[s("span",{class:{"isshown-query":!0,"el-icon-arrow-down":!t.queryLJshow,"el-icon-arrow-up":t.queryLJshow},on:{click:t.handleQueryShow}}),t._v(" 高级查询")]),t._v(" "),s("el-input",{staticStyle:{width:"493px"},attrs:{size:"small",placeholder:"请输入问题提出人姓名/工号/手机号/标题/项目编号/项目名称/学校名称"},on:{change:t.searchQuestion},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),t._v("　\n      "),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handlequeryQuestion}},[t._v("查询")])],1),t._v(" "),t.queryLJshow?s("div",{staticClass:"query-condition"},[s("div",[s("p",{staticClass:"query-title"},[t._v("提问时间:")]),t._v(" "),s("p",[s("el-date-picker",{attrs:{size:"mini",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:t.handleDatepick},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)]),t._v(" "),s("div",[s("p",{staticClass:"query-title"},[t._v("问题分类:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleZXR}},[s("span",{class:{"bg-active":""==t.wtfl},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.wtflList,function(e,a){return s("span",{key:a,class:{"bg-active":t.wtfl==e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]),t._v(" "),s("div",[s("p",{staticClass:"query-title"},[t._v("查询状态:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleCXZT}},[s("span",{class:{"bg-active":""==t.cxzt},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),s("span",{class:{"bg-active":"0"==t.cxzt},attrs:{"data-type":"0"}},[t._v("处理中")]),t._v(" "),s("span",{class:{"bg-active":"1"==t.cxzt},attrs:{"data-type":"1"}},[t._v("已关闭")])])]),t._v(" "),s("div",[s("p",{staticClass:"query-title"},[t._v("申请关闭:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleSQGB}},[s("span",{class:{"bg-active":""==t.sqgb},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),s("span",{class:{"bg-active":"1"==t.sqgb},attrs:{"data-type":"1"}},[t._v("是")]),t._v(" "),s("span",{class:{"bg-active":"0"==t.sqgb},attrs:{"data-type":"0"}},[t._v("否")])])]),t._v(" "),s("div",[s("p",{staticClass:"query-title"},[t._v("是否催办:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleSFCB}},[s("span",{class:{"bg-active":""==t.sfcb},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),s("span",{class:{"bg-active":"1"==t.sfcb},attrs:{"data-type":"1"}},[t._v("是")]),t._v(" "),s("span",{class:{"bg-active":"0"==t.sfcb},attrs:{"data-type":"0"}},[t._v("否")])])]),t._v(" "),s("div",[s("p",{staticClass:"query-title"},[t._v("提交开发:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleTJKF}},[s("span",{class:{"bg-active":""==t.tjkf},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),s("span",{class:{"bg-active":"1"==t.tjkf},attrs:{"data-type":"1"}},[t._v("是")]),t._v(" "),s("span",{class:{"bg-active":"0"==t.tjkf},attrs:{"data-type":"0"}},[t._v("否")])])]),t._v(" "),1==t.showCondition||2==t.showCondition?s("div",[s("p",{staticClass:"query-title"},[t._v("产品线:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleCPX}},[s("span",{class:{"bg-active":""==t.cpxbg},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.cpline,function(e,a){return s("span",{class:{"bg-active":t.cpxbg===e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]):t._e(),t._v(" "),s("div",[s("p",{staticClass:"query-title"},[t._v("产品:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleCP}},[s("span",{class:{"bg-active":""==t.cpbg},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.cplist,function(e,a){return s("span",{class:{"bg-active":t.cpbg==e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]),t._v(" "),1==t.showCondition||2==t.showCondition?s("div",[s("p",{staticClass:"query-title"},[t._v("问题类别:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleWTLB}},[s("span",{class:{"bg-active":""==t.wtlbbg},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.wtlb,function(e,a){return s("span",{class:{"bg-active":t.wtlbbg==e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]):t._e(),t._v(" "),1==t.showCondition||2==t.showCondition?s("div",[s("p",{staticClass:"query-title"},[t._v("未响应状态:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleWXYZT}},[s("span",{class:{"bg-active":""==t.wxyztbg},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.wxyztlist,function(e,a){return s("span",{class:{"bg-active":t.wxyztbg==e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]):t._e(),t._v(" "),1==t.showCondition||2==t.showCondition?s("div",[s("p",{staticClass:"query-title"},[t._v("未解决状态:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleWJJZT}},[s("span",{class:{"bg-active":""==t.wjjztbg},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.wjjztlist,function(e,a){return s("span",{class:{"bg-active":t.wjjztbg==e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]):t._e(),t._v(" "),0==t.isJZuser?s("div",[s("p",{staticClass:"query-title"},[t._v("到期查询:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleCNQX}},[s("span",{class:{"bg-active":""==t.cnqx},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.cnqxList,function(e,a){return s("span",{class:{"bg-active":t.cnqx==e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]):t._e(),t._v(" "),t.userGroupTag.includes("ProblemAdmin")||t.userGroupTag.includes("QYZ")?s("div",[s("p",{staticClass:"query-title"},[t._v("区域工程:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleGCZD}},[s("span",{class:{"bg-active":""==t.gczd},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.gczdList,function(e,a){return s("span",{key:a,class:{"bg-active":t.gczd==e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]):t._e(),t._v(" "),1==t.showCondition||2==t.showCondition?s("div",[s("p",{staticClass:"query-title"},[t._v("单位类型:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleDWLX}},[s("span",{class:{"bg-active":""==t.dwlx},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.dwlxList,function(e,a){return s("span",{class:{"bg-active":t.dwlx==e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]):t._e()]):t._e()]),t._v(" "),s("div",{staticStyle:{background:"#fff","margin-top":"10px","box-shadow":"0 2px 12px 0 rgba(0,0,0,.1)","border-radius":"4px",padding:"10px 0"}},[s("div",{staticStyle:{padding:"0 10px"}},[s("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"danger"},on:{click:t.handleQuestion}},[t._v("我要提问")]),t._v(" "),this.userGroupTag.includes("ProblemAdmin")||t.userGroupTag.includes("GCCPZJ")||t.userGroupTag.includes("QYZ")?s("el-button",{staticStyle:{float:"right","margin-top":"8px"},attrs:{size:"mini",type:"primary"},on:{click:t.handleExport}},[t._v("导出")]):t._e()],1),t._v(" "),s("hr",{staticStyle:{"border-top":"1px solid #eee",margin:"8px 0 0 0 !important"}}),t._v(" "),s("questionCard",{attrs:{questionList:t.questionList},on:{handleQuestionDetail:t.handleQuestionDetail,handleReject:t.handleReject,handleClose:t.handleClose,editQuestion:t.editQuestion,deleteQuestion:t.deleteQuestion}}),t._v(" "),t.total>10?s("div",{staticStyle:{"margin-top":"10px","text-align":"left"}},[s("pagination",{attrs:{currentPage:t.CurrentPage,total:t.total,pageSize:t.pageSize},on:{handleCurrentChange:t.handleCurrentChange}})],1):t._e()],1),t._v(" "),s("twDialog",{attrs:{show:t.show,questionTitle:t.questionTitle,accreditShow:t.accreditShow,questionInfo:t.qusetionInfo},on:{"update:show":function(e){t.show=e},handleTWsuccess:t.handleTWsuccess}}),t._v(" "),s("gxrDialog",{attrs:{show:t.gxrShow,wtInfo:t.wtInfo},on:{"update:show":function(e){t.gxrShow=e},closeQuestion:t.closeQuestion}}),t._v(" "),s("sqgbwtDialog",{attrs:{show:t.sqgbShow},on:{"update:show":function(e){t.sqgbShow=e}}})],1)},staticRenderFns:[]};var p=s("Z0/y")(d,h,!1,function(t){s("YSVk")},"data-v-d53a7ea4",null);e.default=p.exports},YSVk:function(t,e){}});
//# sourceMappingURL=56.1b1f11498119028d1daa.js.map