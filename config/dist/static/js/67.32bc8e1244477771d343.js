webpackJsonp([67],{ebPU:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("IfOk"),r=a("Q3je"),i={data:function(){return{visible:this.show,tableHeight:window.innerHeight-30,currentPage:1,pageSize:20,total:0,tableData:[],selectMuiltple:[],lcbShow:!1}},props:{show:{type:Boolean,default:!1}},mounted:function(){this.$route.query.lcbqr?(this.pageProjectPanelMilestoneDetail(),this.getProject()):this.pageHomePageTaskDetail()},methods:{handleSelectionChange:function(t){var e=this;t.forEach(function(t){e.selectMuiltple.push(t.lcbbh)})},handleLcbqr:function(){var t=this;this.$confirm("您确定要确认任务完成吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.c)({lcbbh:t.selectMuiltple.join(",")}).then(function(e){"success"==e.data.state&&t.$alert("确认成功","提示",{confirmButtonText:"确定",callback:function(e){t.pageProjectPanelMilestoneDetail()}})})}).catch(function(){})},handleSizeChange:function(t){this.currentPage=1,this.pageSize=t,this.$route.query.lcbqr?this.pageProjectPanelMilestoneDetail():this.pageHomePageTaskDetail()},handleCurrentChange:function(t){this.currentPage=t,this.$route.query.lcbqr?this.pageProjectPanelMilestoneDetail():this.pageHomePageTaskDetail()},pageProjectPanelMilestoneDetail:function(){var t=this;this.$get(this.API.pageProjectPanelMilestoneDetail,{curPage:this.currentPage,pageSize:this.pageSize,xmbh:this.$route.query.xmbh,sfqr:this.$route.query.sfqr}).then(function(e){"success"==e.state&&(e.data.rows?t.tableData=e.data.rows:t.tableData=[],t.total=e.data.records)})},pageHomePageTaskDetail:function(){var t=this;this.$get(this.API.pageHomePageTaskDetail,{curPage:this.currentPage,pageSize:this.pageSize,xmbh:this.$route.query.xmbh,isAll:this.$route.query.isAll,personType:this.$route.query.personType,filterType:this.$route.query.filterType}).then(function(e){"success"==e.state&&(e.data.rows?t.tableData=e.data.rows:t.tableData=[],t.total=e.data.records)})},getProject:function(){var t=this;Object(l.q)({xmbh:this.$route.query.xmbh}).then(function(e){var a=e.data;"success"==a.state&&(a.data.jfzrrxm==sessionStorage.username?t.lcbShow=!0:t.lcbShow=!1)})}},watch:{show:function(t,e){this.visible=this.show}},components:{}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pd-10"},[a("div",{staticClass:"dialog-jd"},[this.$route.query.lcbqr?a("h4",[t._v("进度确认 — "+t._s(0==this.$route.query.sfqr?"待确认里程碑详情":"已确认里程碑详情"))]):a("h4",[t._v(t._s(1==this.$route.query.personType?"实施 — ":"用户 — ")+" "+t._s(1==this.$route.query.filterType?"催办":2==this.$route.query.filterType?"已超期":7==this.$route.query.filterType?"待确认任务数":8==this.$route.query.filterType?"已确认任务数":0==this.$route.query.filterType?"总数":5==this.$route.query.filterType?"个人任务总数":"未完成个人任务总数")+"\n    ")]),t._v(" "),this.$route.query.lcbqr?t._e():a("el-table",{key:"ssyh-table",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","min-height":500,"max-height":t.tableHeight}},[a("el-table-column",{attrs:{prop:"xmbh",label:"项目编号",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"xmmc",label:"项目名称","min-width":"340","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"cpmc_display",label:"产品名称",width:"240","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"xmnr",label:"项目内容",width:"240","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"lcbms_display",label:"里程碑",width:"160","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"rwmc_display",label:"任务名称",width:"160","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"zt_display",label:"状态",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cjrxm",label:"创建人",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cjsj",label:"创建时间",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ssrxm",label:"责任人",width:"90"}})],1),t._v(" "),"1"==this.$route.query.lcbqr?a("div",[a("div",{staticClass:"mg-12",attrs:{"text-right":""}},["0"==this.$route.query.sfqr&&t.lcbShow?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleLcbqr}},[t._v("里程碑确认")]):t._e()],1),t._v(" "),a("el-table",{key:"jdqr-table",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","min-height":500,"max-height":t.tableHeight},on:{"selection-change":t.handleSelectionChange}},["0"==this.$route.query.sfqr&&t.lcbShow?a("el-table-column",{attrs:{type:"selection",width:"55"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{prop:"xmbh",label:"项目编号",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"xmmc",label:"项目名称","min-width":"300","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"cpmc_display",label:"产品名称",width:"240","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"lcbms_display",label:"里程碑","min-width":"300","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"zt_display",label:"状态",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"qrrxm",label:"确认人",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"qrsj",label:"确认时间",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{label:"是否确认",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{size:"mini",type:"1"==e.row.sfqr?"success":"primary","disable-transitions":""}},[t._v("\n              "+t._s("0"==e.row.sfqr?"未确认":1==e.row.sfqr?"已确认":"未知"))])]}}])})],1)],1):t._e(),t._v(" "),t.total>20?a("div",{staticClass:"mg-12",attrs:{"text-right":""}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[20,35,50,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()],1)])},staticRenderFns:[]};var s=a("Z0/y")(i,o,!1,function(t){a("uHPQ")},"data-v-9b324400",null);e.default=s.exports},uHPQ:function(t,e){}});
//# sourceMappingURL=67.32bc8e1244477771d343.js.map