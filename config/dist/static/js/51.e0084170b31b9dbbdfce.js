webpackJsonp([51],{SEH7:function(t,e){},xq5x:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("GRVU");var s=i("JCAW"),a={data:function(){return{visible:this.show,dialogVisible:!1,recordList:[],multipleSelection:[],currentPage:1,pageSize:10,total:0,keyword:"",czlx:0,ryInfo:{},userGroupTag:""}},methods:{handleClose:function(){this.visible=!1},handleSizeChange:function(t){this.pageSize=t,this.currentPage=1,this.getExperlogs()},handleCurrentChange:function(t){this.currentPage=1,this.getExperlogs()},handlePraise:function(t,e){this.$emit("handlePraise",t,e)},handleClickTab:function(){this.getExperlogs()},handleClick:function(t){this.ryInfo=t,this.getExperlogs(),this.dialogVisible=!this.dialogVisible},getExperlogs:function(){var t=this;this.$get(this.API.experlogs,{curPage:this.currentPage,pageSize:this.pageSize,keyword:this.keyword,czlx:0==this.czlx?"":this.czlx,rybh:this.ryInfo.bh,cpbh:this.ryInfo.cpbh,rylx:this.rylx}).then(function(e){"success"==e.state&&(e.data.rows?t.recordList=e.data.rows:t.recordList=[],t.total=e.data.records)})}},props:{show:{type:Boolean,default:!1},tableData:{type:Array,default:function(){return[]}}},watch:{show:function(t,e){this.visible=this.show,t&&(this.userGroupTag=JSON.parse(sessionStorage.userInfo).userGroupTag)}},components:{setpsComponent:s.a}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{title:"评价及查看",width:"700px",top:"30px",visible:t.visible,"append-to-body":!0,"close-on-click-modal":!1,show:t.show},on:{"update:visible":function(e){t.visible=e},close:function(e){t.$emit("update:show",!1)}}},[i("div",{staticClass:"dialog-pj"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[i("el-table-column",{attrs:{label:"姓名","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticStyle:{width:"70%",margin:"0 auto"},attrs:{flex:""}},[i("span",{staticStyle:{width:"30%"}},[t._v(t._s(e.row.xm))]),t._v("　\n              "),i("span",[i("span",{staticClass:"zjlist-pj zjlist-pj-hp",attrs:{title:"点击好评"},on:{click:function(i){t.handlePraise(e.row,"1")}}},[i("span"),t._v(" ("+t._s(e.row.good)+")")]),t._v(" \n                "),i("span",{staticClass:"zjlist-pj zjlist-pj-cp",attrs:{title:"点击差评"},on:{click:function(i){t.handlePraise(e.row,"0")}}},[i("span"),t._v(" ("+t._s(e.row.bad)+")")])])])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.userGroupTag.includes("JYGL")?i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.handleClick(e.row)}}},[t._v("查看记录")]):i("span",[t._v("暂无操作权限")])]}}])})],1),t._v(" "),i("section",{staticClass:"pj-btn-group"},[i("el-button",{attrs:{size:"small"},on:{click:t.handleClose}},[t._v("关闭")])],1)],1)]),t._v(" "),i("el-dialog",{attrs:{title:"评价记录",width:"700px",visible:t.dialogVisible,"append-to-body":!0,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticStyle:{margin:"10px 30px"}},[i("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClickTab},model:{value:t.czlx,callback:function(e){t.czlx=e},expression:"czlx"}},[i("el-tab-pane",{attrs:{label:"全部",name:"0"}}),t._v(" "),i("el-tab-pane",{attrs:{label:"好评",name:"1"}}),t._v(" "),i("el-tab-pane",{attrs:{label:"差评",name:"2"}})],1),t._v(" "),i("div",{staticStyle:{"max-height":"450px","overflow-y":"auto"}},[i("setpsComponent",{attrs:{jdList:t.recordList,zjlbShow:!0}}),t._v(" "),t.recordList.length?t._e():i("div",{attrs:{"text-center":""}},[t._v("\n            暂无内容\n        ")])],1),t._v(" "),t.recordList.length?i("div",{attrs:{"text-right":""}},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,50],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e(),t._v(" "),i("div",{staticClass:"mg-12",attrs:{"text-right":""}},[i("el-button",{attrs:{size:"mini"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("关闭")])],1)],1)])],1)},staticRenderFns:[]};var l=i("VU/8")(a,n,!1,function(t){i("SEH7")},"data-v-93af2902",null).exports,o=i("+oxQ"),r={data:function(){return{zjpjShow:!1,pjsmShow:!1,itemList:[],fjbh:"",fjobj:{},baseUrl:null,listIndex:9999,tableData:[],rylx:"",title:"",type:""}},props:{xmbh:{type:String,default:""}},mounted:function(){this.baseUrl=window.baseurl,this.queryCpZjData()},methods:{queryCpZjData:function(){var t=this;this.$get(this.API.queryCpZjData,{curPage:1,pageSize:99}).then(function(e){"success"==e.state&&(e.data.rows&&e.data?t.itemList=e.data.rows:t.itemList=[])})},getExperts:function(t){var e=this;this.$get(this.API.experts,{cpbh:t,rylx:this.rylx}).then(function(t){"success"==t.state&&(t.data?e.tableData=t.data:e.tableData=[])})},handleCheckDetail:function(t,e){this.rylx=e,this.getExperts(t),this.zjpjShow=!this.zjpjShow},handlePraise:function(t,e){this.xminfo=t,this.title=1==e?"好评说明":"优化建议",this.type=e,this.pjsmShow=!this.pjsmShow},handleClickSure:function(t){var e=this;this.$post("1"==this.type?this.API.expertgood:this.API.expertbad,{rylx:this.rylx,sm:t,rybh:this.xminfo.bh,ryxm:this.xminfo.xm,cpbh:this.xminfo.cpbh,cpmc:this.xminfo.cpx}).then(function(t){"success"==t.state?(e.pjsmShow=!e.pjsmShow,e.$alert("评价成功","提示",{confirmButtonText:"确定",type:"success",callback:function(t){e.getExperts(e.xminfo.cpbh)}})):e.$alert(t.msg,"提示",{confirmButtonText:"确定",type:"error"})})}},components:{zjpjDialog:l,pjsmDialog:o.a}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{width:"90%",margin:"10px auto 0",padding:"20px 10px",background:"#fff","border-radius":"5px","box-shadow":"0 0 5px #ccc"}},[i("ul",{staticClass:"item-list"},[t._m(0),t._v(" "),t.itemList.length?i("div",{staticClass:"list_content"},t._l(t.itemList,function(e,s){return i("li",{attrs:{flex:"",spacebetween:""},on:{mouseover:function(e){t.listIndex=s}}},[i("p",{staticClass:"item-name textellipsis",attrs:{title:e.cpx}},[t._v(t._s(e.cpmc))]),t._v(" "),i("p",{staticClass:"item-size textellipsis",attrs:{title:e.gczj}},[t._v(t._s(e.gczj)+"\n          "),t.listIndex==s&&"-"!=e.gczj?i("a",{attrs:{href:"javaScript:;;"},on:{click:function(i){t.handleCheckDetail(e.cpbh,"0")}}},[i("img",{attrs:{src:"static/img/pj.png",alt:""}}),t._v("评价及查看")]):t._e()]),t._v(" "),i("p",{staticClass:"item-cpzj textellipsis",attrs:{title:e.cpzj}},[t._v("\n          "+t._s(e.cpzj)+"\n          "),t.listIndex==s&&"-"!=e.cpzj?i("a",{attrs:{href:"javaScript:;;"},on:{click:function(i){t.handleCheckDetail(e.cpbh,"1")}}},[i("img",{attrs:{src:"static/img/pj.png",alt:""}}),t._v("评价及查看")]):t._e()]),t._v(" "),i("p",{staticClass:"item-cpjl textellipsis",attrs:{title:e.cpjl}},[t._v("\n          "+t._s(e.cpjl)+"\n          "),t.listIndex==s&&"-"!=e.cpjl?i("a",{attrs:{href:"javaScript:;;"},on:{click:function(i){t.handleCheckDetail(e.cpbh,"2")}}},[i("img",{attrs:{src:"static/img/pj.png",alt:""}}),t._v("评价及查看")]):t._e()])])})):t._e(),t._v(" "),t.itemList.length?t._e():i("div",{staticClass:"emptyContent"},[i("img",{attrs:{src:"static/img/kong.png",alt:""}}),t._v(" "),i("p",[t._v("暂无数据")])])]),t._v(" "),i("zjpjDialog",{attrs:{show:t.zjpjShow,tableData:t.tableData},on:{"update:show":function(e){t.zjpjShow=e},handlePraise:t.handlePraise}}),t._v(" "),i("pjsmDialog",{attrs:{show:t.pjsmShow,title:t.title},on:{"update:show":function(e){t.pjsmShow=e},handleClickSure:t.handleClickSure}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-header",attrs:{flex:"",spacebetween:""}},[e("p",{staticClass:"item-name"},[this._v("产品")]),this._v(" "),e("p",{staticClass:"item-size"},[this._v("工程专家")]),this._v(" "),e("p",{staticClass:"item-cpzj"},[this._v("产品专家")]),this._v(" "),e("p",{staticClass:"item-cpjl"},[this._v("产品经理")])])}]};var h=i("VU/8")(r,c,!1,function(t){i("zTOM")},"data-v-282c34d3",null);e.default=h.exports},zTOM:function(t,e){}});
//# sourceMappingURL=51.e0084170b31b9dbbdfce.js.map