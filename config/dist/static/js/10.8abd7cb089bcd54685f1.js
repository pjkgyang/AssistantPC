webpackJsonp([10],{"8Wo/":function(t,e,a){"use strict";(function(t){var s=a("3cXf"),n=a.n(s),i=a("BxWF"),o=a("V/8j");e.a={data:function(){return{loginShow:!0,userInfo:{},userNav:[],navshow:!0,disabled:!1,hash:""}},methods:{handleScroll:function(){var e=window.pageYOffset||t(".main_page").scrollTop()||document.body.scrollTop;this.disabled=e>200},handleBtn:function(){var e=setInterval(function(){var a=t(".main_page").scrollTop()||document.body.scrollTop;(a-=50)>0?t(".main_page").scrollTop(a):(t(".main_page").scrollTop(0),clearInterval(e),e=null)},.1)},handleCommand:function(t){"退出"==t.split("&&")[0]?(window.location.href=window.baseurl+"sys/logout.do?from="+encodeURIComponent("http://careful.wisedu.com/#/"),sessionStorage.clear()):"个人中心"==t.split("&&")[0]?this.$router.push({path:"/businesspage/personalSetting"}):"../home/main.do"==t.split("&&")[0]?window.open("http://careful.wisedu.com/emap/sys/assistantauth/home/main.do?sid="+t.split("&&")[1]):window.open(t.split("&&")[0])}},mounted:function(){var e=this;this.hash=window.location.hash;var a=this;!window.location.hash.includes("questionDetail")||window.location.hash.includes("h=1")?(Object(o.d)().then(function(t){200==t.status&&("success"==t.data.state?(e.userInfo=t.data.data,e.loginShow=!1,window.userId=t.data.data.userName,window.logo=t.data.data.logo,window.uid=t.data.data.uid,sessionStorage.setItem("username",t.data.data.nickName),sessionStorage.setItem("isJZuser",t.data.data.unitType),sessionStorage.setItem("userInfo",n()(t.data.data))):e.$alert(data.msg+"获取用户失败,请联系管理员 ","提示",{confirmButtonText:"确定",type:error,callback:function(t){window.location.href=window.baseurl+"sys/logout.do?from="+encodeURIComponent("http://careful.wisedu.com/#/")}}))}),Object(o.i)().then(function(t){var a=t.data;"success"==a.state&&0!=a.data.length&&null!=a.data&&(e.userNav=a.data,e.userNav.forEach(function(t,a,s){84==t.privid&&e.userNav.splice(a,1)}))}),t(".main_page").scroll(function(){a.handleScroll()})):this.navshow=!1},components:{headerUser:i.a}}}).call(e,a("L7Pj"))},BxWF:function(t,e,a){"use strict";var s=a("3cXf"),n=a.n(s),i=a("oFuF"),o=a("auNG"),r=a("V/8j"),u=a("YkBq"),l=a("Juj9"),c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._l(t.routes,function(e,s){return[e.childNodes&&e.childNodes.length&&!e.url?[a("el-submenu",{attrs:{index:t.navIndex?t.navIndex:String(s),"show-timeout":100,"hide-timeout":100}},[a("template",{slot:"title"},[e.icon?a("i",{staticClass:"item.icon"}):t._e(),t._v(t._s(e.privname))]),t._v(" "),t._l(e.childNodes,function(n,i){return[n.childNodes&&n.childNodes.length?a("nav-item",{attrs:{navIndex:s+"-"+i,routes:[n]}}):a("router-link",{attrs:{to:n.url}},[a("el-menu-item",{attrs:{index:n.url?n.url:""}},[e.icon?a("i",{staticClass:"item.icon"}):t._e(),t._v(t._s(n.privname))])],1)]})],2)]:[a("router-link",{attrs:{to:e.url}},[a("el-menu-item",{attrs:{index:e.url}},[e.icon?a("i",{staticClass:"item.icon"}):t._e(),t._v(t._s(e.privname))])],1)]]})],2)},staticRenderFns:[]},d=a("Z0/y")({name:"navItem",props:["routes","navIndex"]},c,!1,null,null,null).exports,p={data:function(){return{menus:[{dropName:"跳转到xxx",path:"http://www.baidu.com"},{dropName:"跳转到xxx",path:""}],navActive:"/businesspage/projects",title:"",inputValue:"",errorImg:'this.src="'+a("eJJ4")+'"',baseUrl:"",noticNum:"",noticeList:"",total:null,visible:!1,noticeVisible:!1,menuList:[],jf:"",menuData:[]}},computed:{onRoutes:function(){return this.$route.path.includes("/businesspage/report")?"/businesspage/report":this.$route.path.includes("/businesspage/task")?"/businesspage/projects":this.$route.path.includes("/businesspage/toplist")?"/businesspage/toplist":this.$route.path}},props:{userInfo:{type:Object,default:function(){return{}}},shown:{type:Boolean,default:!0},input:{type:String,default:""},userNav:{type:Array,default:function(){return[]}}},mounted:function(){var t=this;window.location.hash.includes("/businesspage/report")?this.title="/businesspage/report":window.location.hash.includes("/businesspage/task")?this.title="/businesspage/projects":this.title=window.location.hash.split("#")[1],this.baseUrl=window.baseurl,this.getMessages(),i.a.$on("changeNoticeNum",function(e){t.getMessages()}),i.a.$on("readAllMessages",function(e){t.noticNum=0}),Object(r.h)().then(function(e){var a=e.data;"success"==a.state&&(null!=a.data&&0!=a.data.length?(t.menuList=a.data,"#/"==window.location.hash&&(a.data[0].url?t.$router.push({path:a.data[0].url}):a.data[0].childNodes[0].url?t.$router.push({path:a.data[0].childNodes[0].url}):t.$router.push({path:a.data[0].childNodes[0].childNodes[0].url})),t.menuList.forEach(function(t,e,a){"91"==t.privid&&(window.menu=a[e]),"123"==t.privid&&(window.menuTop=a[e])}),sessionStorage.setItem("menuList",n()(t.menuList))):t.$router.push({path:"/"}))}),Object(u.o)().then(function(e){var a=e.data;"success"==a.state&&(t.jf=a.data)})},watch:{$route:function(t,e){this.getMessages(),this.navActive=window.location.hash.split("#")[1],window.location.hash.includes("/businesspage/report")?this.title="/businesspage/report":window.location.hash.includes("/businesspage/task")?this.title="/businesspage/projects":this.title=window.location.hash.split("#")[1],"MonthReportWrite"!=t.name?document.title="金智教育工程小助手":document.title="月报-月计划制订"}},methods:{handleSelect:function(t,e){},handleNotice:function(){this.$router.push({path:"/businesspage/systemMsg"}),this.title="/businesspage/systemMsg"},handleCommand:function(t){this.$emit("handleCommand",t)},handleRouter:function(t){var e=t.target.getAttribute("data-router");this.$router.push({path:e})},getInputVal:function(t){"13"==t.keyCode&&(i.a.$emit("searchInfo",this.inputValue),i.a.$emit("hoshRouter",this.inputValue))},getInputXmKB:function(t){"13"==t.keyCode&&(this.$router.push({path:"/businesspage/projects"}),i.a.$emit("searchXMKB",this.inputValue))},homeLogin:function(){window.location.href="http://careful.wisedu.com/emap/sys/assistantauth/home/login.do?redirect_url="+encodeURIComponent("http://careful.wisedu.com/#/")},getMessages:function(){var t=this;Object(o.a)({curPage:1,pageSize:10,isread:0}).then(function(e){var a=e.data;"success"==a.state&&(t.noticNum=a.data.records)})}},components:{NavBarItem:l.a,navItem:d}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("div",{staticClass:"header-left"},[t._m(0),t._v(" "),a("div",{staticClass:"header-navmenu"},[t._e(),t._v(" "),a("div",{staticClass:"header-navmenu-elmenu"},[a("el-menu",{ref:"navbar",attrs:{"text-color":"#708087","active-text-color":"#CD3333",router:!0,"default-active":t.onRoutes,mode:"horizontal","menu-trigger":"hover","unique-opened":""},on:{select:t.handleSelect}},[a("nav-item",{attrs:{routes:t.menuList,navIndex:""}})],1)],1)])]),t._v(" "),a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("div",{staticStyle:{"margin-right":"15px",position:"relative"}},["/businesspage/dataTab"==t.title?a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"searchKeyword",attrs:{type:"text",placeholder:"请输入搜索内容"},domProps:{value:t.inputValue},on:{keyup:t.getInputVal,input:function(e){e.target.composing||(t.inputValue=e.target.value)}}}):t._e(),t._v(" "),"/businesspage/projects"==t.title?a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"searchKeyword",attrs:{type:"text",placeholder:"请输入搜索内容"},domProps:{value:t.inputValue},on:{keyup:t.getInputXmKB,input:function(e){e.target.composing||(t.inputValue=e.target.value)}}}):t._e(),t._v(" "),"/businesspage/dataTab"==t.title||"/businesspage/projects"==t.title?a("span",{staticClass:"el-icon-search",staticStyle:{position:"absolute",top:"6px",left:"5px"}}):t._e()]),t._v(" "),a("div",[a("p",{staticClass:"notice",on:{click:t.handleNotice}},[a("el-badge",{staticClass:"item",attrs:{value:0==t.noticNum?"":t.noticNum,max:99}},[a("span",{staticClass:"el-icon-bell",staticStyle:{"font-size":"20px"},attrs:{title:"通知"}})])],1)]),t._v(" "),-1!=t.jf?a("div",{staticStyle:{margin:"0 8px","font-size":"13px",color:"#f00"}},[a("span",[t._v("积分:")]),t._v(t._s(t.jf)+"\n         ")]):t._e(),t._v(" "),t.shown?a("div",{staticClass:"userLogin"},[a("img",{attrs:{src:"static/img/avatar1.png"}}),t._v(" "),a("a",{attrs:{href:"javascript:;;"},on:{click:t.homeLogin}},[t._v("登录")])]):t._e(),t._v(" "),t.shown?t._e():a("div",{staticClass:"info"},[a("el-col",{attrs:{span:12}},[a("el-dropdown",{on:{command:t.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[a("img",{attrs:{src:t.userInfo.logo,onerror:t.errorImg}}),a("span",{staticStyle:{color:"#000","white-space":"nowrap"}},[t._v(" "+t._s(t.userInfo.nickName))])]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t._l(t.userNav,function(e,s){return a("el-dropdown-item",{key:s,attrs:{command:e.homepage+"&&"+e.privid}},[t._v(t._s(e.privname))])}),t._v(" "),a("el-dropdown-item",{attrs:{command:"个人中心",divided:0!=t.userNav.length}},[t._v("个人中心")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"退出",divided:0!=t.userNav.length}},[t._v("\n                    退出\n                  ")])],2)],1)],1)],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title_menu"},[e("p",[e("img",{attrs:{src:"static/img/logo2.png",alt:"logo"}}),this._v("　"),e("span",[this._v("金智教育工程小助手")])])])}]};var m=a("Z0/y")(p,h,!1,function(t){a("c1Vh")},"data-v-291bdc65",null);e.a=m.exports},c1Vh:function(t,e){},"sR+d":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("8Wo/"),n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"100%","min-height":"100%"}},[t.navshow?a("div",[a("div",{staticClass:"main_TopNav"},[a("header-user",{attrs:{userNav:t.userNav,userInfo:t.userInfo,shown:t.loginShow},on:{handleCommand:t.handleCommand}})],1)]):t._e(),t._v(" "),a("div",{class:{main_page:!t.hash.includes("questionDetail"),"main_page-questionDetail":t.hash.includes("questionDetail")}},[a("keep-alive",[a("router-view")],1),t._v(" "),a("transition",{attrs:{name:"scroll-fade",mode:"out-in"}},[t.disabled?a("div",{staticClass:"scrollTop",attrs:{title:"回到顶部"},on:{click:t.handleBtn}},[a("i",{staticClass:"el-icon-arrow-up"})]):t._e()])],1)])},staticRenderFns:[]};var i=function(t){a("zB+0")},o=a("Z0/y")(s.a,n,!1,i,"data-v-7c6de2b9",null);e.default=o.exports},"zB+0":function(t,e){}});
//# sourceMappingURL=10.8abd7cb089bcd54685f1.js.map