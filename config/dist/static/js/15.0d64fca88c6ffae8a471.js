webpackJsonp([15],{EzRL:function(t,e){},PN8J:function(t,e){},Q4s5:function(t,e){},Vv54:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("ZLEe"),i=s.n(a),n=s("9A7R"),o={data:function(){return{total:0,bodyData:[],tableHeight:window.innerHeight-this.Height}},updated:function(){},methods:{exportTable:function(){this.$emit("exportTable","")},handleArchive:function(){this.$emit("handleArchive","")},handleRouter:function(t,e,s){this.$emit("handleXxwt",t,e,s)},handleCurrentChange:function(t){this.$emit("handleCurrentChange",t)}},computed:{},props:{tableData:{type:Object,default:function(){return{}}},currentPage:{type:Number,default:1},pageSize:{type:Number,default:13},pageShow:{type:Boolean,default:!0},indexArr:{type:Array,default:function(){return[0,2]}},Height:{type:Number,default:350},widthArr:{type:Array,default:function(){return[2,3,4,9]}},Width:{type:String,default:"190"},rowWidth:{type:String,default:"240"},exportShow:{type:Boolean,default:!0},archiveShow:{type:Boolean,default:!1}},watch:{tableData:function(t,e){var s=t.body;s.rows?(this.bodyData=s.rows,this.total=s.records):(this.bodyData=s,this.total=0)}},components:{pagination:n.a}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"mb-12",attrs:{"text-right":""}},[t.archiveShow?s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleArchive}},[t._v(t._s(20==t.indexArr[0]?"确认":"封存"))]):t._e(),t._v(" "),t.exportShow?s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.exportTable}},[t._v("导出")]):t._e()],1),t._v(" "),s("div",{staticClass:"out-table"},[s("el-table",{staticClass:"report-ele-table",attrs:{data:t.bodyData,border:"",width:"100%","max-height":0==t.Height?"auto":t.tableHeight}},t._l(t.tableData.head,function(e,a){return e.hidden?t._e():s("el-table-column",{key:a,attrs:{label:e.zh,"min-width":t.widthArr.includes(a)?t.rowWidth:0==a?200:t.Width,"show-overflow-tooltip":"",fixed:!!t.indexArr.includes(a)},scopedSlots:t._u([{key:"default",fn:function(i){return[e.canRedirect?s("a",{attrs:{href:"javaScript:void(0)"},on:{click:function(e){t.handleRouter(i.row,a,"sqjs")}}},[t._v(t._s(""==i.row[a]?"结算申请":i.row[a]))]):s("span",[t._v(t._s(i.row[a]))]),t._v(" "),""==i.row[a]?s("a",{attrs:{href:"javaScript:void(0)"},on:{click:function(e){t.handleRouter(i.row,a,"jscx")}}},[t._v("　　结算申请查询")]):t._e()]}}])})}))],1),t._v(" "),t.pageShow?s("div",{staticStyle:{"text-align":"right"}},[s("pagination",{attrs:{currentPage:t.currentPage,pageSize:t.pageSize,total:t.total},on:{handleCurrentChange:t.handleCurrentChange}})],1):t._e()])},staticRenderFns:[]};var l=s("Z0/y")(o,r,!1,function(t){s("uxQS")},"data-v-41ec9d32",null).exports,h={data:function(){return{visible:this.show,options:[],form:{jsd:"",sskssj:"",ssjssj:"",sqjssm:""}}},methods:{handleClose:function(){this.visible=!1},handleClickSure:function(){this.validate()&&this.$emit("handleClickSure",this.form)},validate:function(){return this.form.jsd?this.form.sskssj?this.form.ssjssj?!!this.form.sqjssm||(this.$alert("请填写结算说明","提示",{confirmButtonText:"确定",type:"warning"}),!1):(this.$alert("请选择结束时间","提示",{confirmButtonText:"确定",type:"warning"}),!1):(this.$alert("请选择开始时间","提示",{confirmButtonText:"确定",type:"warning"}),!1):(this.$alert("请选择结算点","提示",{confirmButtonText:"确定",type:"warning"}),!1)}},props:{show:{type:Boolean,default:!1},data:{type:Object,default:function(){return{fbmc:"",fbbh:"",xmbh:""}}}},watch:{show:function(t,e){var s=this;this.visible=this.show,t?this.$get(this.API.settlementPoints,{xmbh:this.data.xmbh,fbbh:this.data.fbbh}).then(function(t){"success"==t.state&&(t.data?s.options=t.data:s.options=[])}):(this.form.jsd="",this.form.sskssj="",this.form.ssjssj="",this.form.sqjssm="")}},components:{}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-dialog",{attrs:{title:"项目结算",width:"700px",top:"30px",visible:t.visible,"append-to-body":!0,"close-on-click-modal":!1,show:t.show},on:{"update:visible":function(e){t.visible=e},close:function(e){t.$emit("update:show",!1)}}},[s("div",{staticClass:"dialog-jssq"},[s("section",{attrs:{flex:""}},[s("span",{staticClass:"jssq-title"},[t._v("分包名称：")]),t._v(" "),s("span",{staticClass:"jssq-content"},[s("el-input",{staticStyle:{width:"500px"},attrs:{readonly:"",size:"mini"},model:{value:t.data.fbmc,callback:function(e){t.$set(t.data,"fbmc",e)},expression:"data.fbmc"}})],1)]),t._v(" "),s("section",{attrs:{flex:""}},[s("span",{staticClass:"jssq-title before-require"},[t._v("结算点：")]),t._v(" "),s("span",{staticClass:"jssq-content"},[s("el-select",{staticStyle:{width:"500px"},attrs:{size:"mini",placeholder:"请选择"},model:{value:t.form.jsd,callback:function(e){t.$set(t.form,"jsd",e)},expression:"form.jsd"}},t._l(t.options,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]),t._v(" "),s("section",{attrs:{flex:""}},[s("span",{staticClass:"jssq-title before-require"},[t._v("实施开始时间：")]),t._v(" "),s("span",{staticClass:"jssq-content"},[s("el-date-picker",{staticStyle:{width:"500px"},attrs:{size:"mini",type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:t.form.sskssj,callback:function(e){t.$set(t.form,"sskssj",e)},expression:"form.sskssj"}})],1)]),t._v(" "),s("section",{attrs:{flex:""}},[s("span",{staticClass:"jssq-title before-require"},[t._v("实施结束时间：")]),t._v(" "),s("span",{staticClass:"jssq-content"},[s("el-date-picker",{staticStyle:{width:"500px"},attrs:{size:"mini",type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:t.form.ssjssj,callback:function(e){t.$set(t.form,"ssjssj",e)},expression:"form.ssjssj"}})],1)]),t._v(" "),s("section",{attrs:{flex:""}},[s("span",{staticClass:"jssq-title before-require"},[t._v("结算申请说明：")]),t._v(" "),s("span",{staticClass:"jssq-content"},[s("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",rows:2,placeholder:"请输入结算说明"},model:{value:t.form.sqjssm,callback:function(e){t.$set(t.form,"sqjssm",e)},expression:"form.sqjssm"}})],1)]),t._v(" "),s("section",{staticClass:"jssq-btn-group"},[s("el-button",{attrs:{size:"small"},on:{click:t.handleClose}},[t._v("取消")]),t._v(" "),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.handleClickSure}},[t._v("确定")])],1)])])],1)},staticRenderFns:[]};var d=s("Z0/y")(h,c,!1,function(t){s("XldJ")},"data-v-6ca5f2aa",null).exports,u=s("aCns"),f={data:function(){return{visible:this.show,tableWidth:"80vw",tableData:{}}},methods:{handleClose:function(){this.visible=!1},handleXxwt:function(t,e,s){}},props:{show:{type:Boolean,default:!1},wid:{type:String,default:""}},watch:{show:function(t,e){var s=this;this.visible=this.show,t&&this.$get(this.API.settlementTeamMembers,{curPage:1,pageSize:999,wid:this.wid}).then(function(t){"success"==t.state&&(s.tableData=t.data)})}},components:{tableComponents:u.a}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-dialog",{attrs:{title:"申请团队成员",width:t.tableWidth,top:"30px",visible:t.visible,"append-to-body":!0,"close-on-click-modal":!1,show:t.show},on:{"update:visible":function(e){t.visible=e},close:function(e){t.$emit("update:show",!1)}}},[s("div",{staticClass:"dialog-jssqcx"},[s("div",[s("tableComponents",{attrs:{tableData:t.tableData,exportShow:!1,widthArr:[2],indexArr:[],Width:"130",Height:260,pageShow:!1},on:{handleXxwt:t.handleXxwt}})],1)])])],1)},staticRenderFns:[]};var w=s("Z0/y")(f,p,!1,function(t){s("PN8J")},"data-v-72d3c6cd",null).exports,b={data:function(){return{visible:this.show,tdcyShow:!1,tableData:{},tableWidth:"80vw",wid:""}},methods:{handleClose:function(){this.visible=!1},handleExport:function(){window.open(window.baseurl+"settlement/exportSettlementApplicationRecord.do?fbbh="+this.fbbh)},handleXxwt:function(t,e,s){this.wid=t[0],this.tdcyShow=!this.tdcyShow}},props:{show:{type:Boolean,default:!1},fbbh:{type:String,default:""}},watch:{show:function(t,e){var s=this;this.visible=this.show,t&&this.$get(this.API.settlementApplicationRecord,{curPage:1,pageSize:99,fbbh:this.fbbh}).then(function(t){"success"==t.state&&(console.log(t),s.tableData=t.data)})}},components:{tableComponents:u.a,jscyDialog:w}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-dialog",{attrs:{title:"结算申请记录",width:t.tableWidth,top:"30px",visible:t.visible,"append-to-body":!0,"close-on-click-modal":!1,show:t.show},on:{"update:visible":function(e){t.visible=e},close:function(e){t.$emit("update:show",!1)}}},[s("div",{staticClass:"dialog-jssqcx"},[s("div",[s("div",{attrs:{"text-right":""}},[s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handleExport}},[t._v("导出")])],1),t._v(" "),s("tableComponents",{attrs:{tableData:t.tableData,exportShow:!1,widthArr:[2],Width:"130",Height:270,pageShow:!1,rowWidth:"320"},on:{handleXxwt:t.handleXxwt}})],1),t._v(" "),s("jscyDialog",{attrs:{show:t.tdcyShow,wid:t.wid},on:{"update:show":function(e){t.tdcyShow=e}}})],1)])],1)},staticRenderFns:[]};var v={data:function(){return{filterList:["keyword","fbxz"],show:!1,jscxShow:!1,currentPage:1,pageSize:20,rowData:{},dataList:{},filterWord:{keyword:"",fbxz:""}}},methods:{handleChangeFilter:function(t){this.filterWord=t,this.currentPage=1,this.getSettlementApplication()},handleExport:function(){window.open(window.baseurl+"settlement/exportSettlementApplication.do?fbxz="+this.filterWord.fbxz+"&keyword="+this.filterWord.keyword)},handleClickSure:function(t){var e=this;t.fbbh=this.rowData.fbbh,t.xmbh=this.rowData.xmbh,this.$post(this.API.saveSettlementApplication,t).then(function(t){"success"==t.state&&i()(t.data).forEach(function(s){var a=this;e.$alert(t.data[s],"提示",{confirmButtonText:"确定",type:"true"==s?"success":"error",callback:function(t){"true"==s&&(a.show=!1)}})})})},handleCurrentChange:function(t){this.currentPage=t,this.getSettlementApplication()},handleXxwt:function(t,e,s){"已终止"!=t[3]||"sqjs"!=s?(this.rowData.fbmc=t[4],this.rowData.fbbh=t[3],this.rowData.xmbh=t[1],"sqjs"==s?this.show=!this.show:this.jscxShow=!this.jscxShow):this.$message({message:"该项目已经终止，不允许提交结算申请！",type:"warning"})},getSettlementApplication:function(){var t=this;this.$get(this.API.settlementApplication,{curPage:this.currentPage,pageSize:this.pageSize,fbxz:this.filterWord.fbxz,keyword:this.filterWord.keyword}).then(function(e){"success"==e.state&&(t.dataList=e.data)})}},mounted:function(){this.getSettlementApplication()},components:{tableComponents:l,xmjsDialog:d,jssqcxDialog:s("Z0/y")(b,m,!1,function(t){s("Q4s5")},"data-v-4d738077",null).exports,filterComponent:s("NxvJ").a}},x={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[s("filterComponent",{attrs:{filterList:t.filterList,placeholder:"请输入项目编号/项目名称/分包编号"},on:{handleChangeFilter:t.handleChangeFilter}})],1),t._v(" "),s("div",{attrs:{"text-right":""}},[s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handleExport}},[t._v("导出")])],1),t._v(" "),s("tableComponents",{attrs:{tableData:t.dataList,pageShow:!0,currentPage:t.currentPage,pageSize:t.pageSize,indexArr:[0],widthArr:[2,4],Width:"130",Height:250,rowWidth:"260",archiveShow:!1,exportShow:!1},on:{handleCurrentChange:t.handleCurrentChange,handleXxwt:t.handleXxwt}}),t._v(" "),s("xmjsDialog",{attrs:{show:t.show,data:t.rowData},on:{"update:show":function(e){t.show=e},handleClickSure:t.handleClickSure}}),t._v(" "),s("jssqcxDialog",{attrs:{show:t.jscxShow,fbbh:t.rowData.fbbh},on:{"update:show":function(e){t.jscxShow=e}}})],1)},staticRenderFns:[]};var y=s("Z0/y")(v,x,!1,function(t){s("EzRL")},"data-v-e9a8a750",null);e.default=y.exports},XldJ:function(t,e){},uxQS:function(t,e){}});
//# sourceMappingURL=15.0d64fca88c6ffae8a471.js.map