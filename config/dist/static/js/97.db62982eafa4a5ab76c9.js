webpackJsonp([97],{"41lx":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("3cXf"),r=a.n(s),l={data:function(){return{htjbxx:{},fbData:[],ywyData:[],ywyTotal:{},fbnrlist:[],isSave:!1}},mounted:function(){this.queryFbYwxData()},methods:{handleSaveFb:function(){var t=this;this.fbnrlist=[],this.fbData.forEach(function(e){t.fbnrlist.push({htnrwid:e.htnrwid,fbssry:Number(e.fbssry),fbekry:Number(e.fbekry),fbsm:e.fbsm})}),console.log(this.fbnrlist),this.$post(this.API.saveFbxx,{xmbh:this.$route.query.xmbh,fbmc:this.htjbxx.fbmc,fbrq:this.htjbxx.fbrq,jhksrq:this.htjbxx.jhksrq,jhjsrq:this.htjbxx.jhjsrq,ssfy:this.htjbxx.ssfy,ekfy:this.htjbxx.ekfy,kbfy:this.htjbxx.kbfy,SSBZ:this.htjbxx.SSBZ,EKBZ:this.htjbxx.EKBZ,fbnrlist:r()(this.fbnrlist)}).then(function(e){"success"==e.state?t.isSave=!1:t.$message({content:e.msg,type:"error"})})},handleInputSSry:function(t){var e=this,a=0;this.htjbxx.ssfy=0,this.fbData.forEach(function(a){a.ywybh==t&&(e.htjbxx.ssfy+=Number(a.fbssry))}),this.ywyData.forEach(function(s){s.ywybh==t&&(s.fbssry=e.htjbxx.ssfy),s.ywybh&&(a+=s.fbssry?s.fbssry:0),s.ywybh||(s.fbssry=e.htjbxx.ssfy=a)})},handleInputEKry:function(t){var e=this,a=0;this.htjbxx.ekfy=0,this.fbData.forEach(function(a){a.ywybh==t&&(e.htjbxx.ekfy+=Number(a.fbekry))}),this.ywyData.forEach(function(s){s.ywybh==t&&(s.fbekry=e.htjbxx.ekfy),s.ywybh&&(a+=s.fbekry?s.fbekry:0),s.ywybh||(s.fbekry=e.htjbxx.ekfy=a)})},queryFbYwxData:function(){var t=this;this.$get(this.API.queryFbYwxData,{xmbh:this.$route.query.xmbh}).then(function(e){"success"==e.state?(t.htjbxx=e.data.fbxx,t.ywyData=e.data.fbywy,t.fbData=e.data.fbnr):t.$message({message:e.msg,type:"error"})})}},activated:function(){},components:{}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"fbdetail_container"},[a("div",{staticClass:"fb_info"},[a("div",[a("h4",[t._v("合同内容")]),t._v(" "),a("div",[a("h5",[t._v("分包基本信息")]),t._v(" "),t.isSave?t._e():a("div",{attrs:{"text-right":""}},[a("el-button",{staticStyle:{margin:"10px 0"},attrs:{size:"small",type:"danger"},on:{click:t.handleSaveFb}},[t._v("保存")])],1),t._v(" "),a("table",[a("tr",[a("th",[t._v("项目编号")]),t._v(" "),a("td",[t._v(t._s(t.$route.query.xmbh))]),t._v(" "),a("th",[t._v("项目名称")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.$route.query.xmmc))])]),t._v(" "),a("tr",[a("th",[t._v("分包名称")]),t._v(" "),a("td",{attrs:{colspan:"5"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.htjbxx.fbmc,expression:"htjbxx.fbmc"}],staticStyle:{width:"100%"},attrs:{placeholder:"请输入分包名称"},domProps:{value:t.htjbxx.fbmc},on:{input:function(e){e.target.composing||t.$set(t.htjbxx,"fbmc",e.target.value)}}})])]),t._v(" "),a("tr",[a("th",[t._v("分包日期")]),t._v(" "),a("td",[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:t.htjbxx.fbrq,callback:function(e){t.$set(t.htjbxx,"fbrq",e)},expression:"htjbxx.fbrq"}})],1),t._v(" "),a("th",[t._v("计划开始日期")]),t._v(" "),a("td",[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:t.htjbxx.jhksrq,callback:function(e){t.$set(t.htjbxx,"jhksrq",e)},expression:"htjbxx.jhksrq"}})],1),t._v(" "),a("th",[t._v("计划结束日期")]),t._v(" "),a("td",[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:t.htjbxx.jhjsrq,callback:function(e){t.$set(t.htjbxx,"jhjsrq",e)},expression:"htjbxx.jhjsrq"}})],1)]),t._v(" "),a("tr",[a("th",[t._v("实施费用（元）")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.ssfy))]),t._v(" "),a("th",[t._v("二开费用（元）")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.ekfy))]),t._v(" "),a("th",[t._v("可变费用（元）")]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.htjbxx.kbfy,expression:"htjbxx.kbfy"}],staticStyle:{width:"100%"},attrs:{type:"text",placeholder:"请输入金额"},domProps:{value:t.htjbxx.kbfy},on:{input:function(e){e.target.composing||t.$set(t.htjbxx,"kbfy",e.target.value)}}})])]),t._v(" "),a("tr",[a("th",[t._v("实施费用标准（元）")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.SSBZ))]),t._v(" "),a("th",[t._v("二开费用标准（元）")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.EKBZ))]),t._v(" "),a("th"),t._v(" "),a("td")]),t._v(" "),a("tr",{attrs:{height:"100px"}},[a("th",{attrs:{rowspan:"2"}},[t._v("分包说明")]),t._v(" "),a("td",{attrs:{colspan:"5",rowspan:"2"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.htjbxx.fbsm,expression:"htjbxx.fbsm"}],staticStyle:{width:"100%",padding:"4px 8px",resize:"none"},attrs:{rows:"4",placeholder:"请输入说明"},domProps:{value:t.htjbxx.fbsm},on:{input:function(e){e.target.composing||t.$set(t.htjbxx,"fbsm",e.target.value)}}})])])])]),t._v(" "),a("div",[a("h5",[t._v("业务域分包统计")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.ywyData,border:""}},[a("el-table-column",{attrs:{prop:"ywymc",label:"业务域","min-width":"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"zb",label:"占比",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{prop:"htssry",label:"实施人月(合同)","min-width":"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ssckbz",label:"实施参考标准","min-width":"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fbssry",label:"实施人月(分包)","min-width":"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"htekry",label:"二开人月(合同)","min-width":"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fbekry",label:"二开人月(分包)","min-width":"140"}})],1)],1),t._v(" "),a("div",[a("h5",[t._v("分包内容")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.fbData,border:""}},[a("el-table-column",{attrs:{prop:"ywymc",label:"业务域","min-width":"200","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"cpmc",label:"合同内容",width:"160","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"zb",label:"占比(%)",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"htsm",label:"说明",width:"160","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"xmlb",label:"项目类别",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"htssry",label:"实施人月(合同)","min-width":"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ssckbz",label:"实施参考标准","min-width":"90"}}),t._v(" "),a("el-table-column",{attrs:{label:"实施人月(分包)","min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.row.fbssry,expression:"scope.row.fbssry"}],staticStyle:{width:"100%"},attrs:{type:"text",placeholder:"请输入金额"},domProps:{value:e.row.fbssry},on:{input:[function(a){a.target.composing||t.$set(e.row,"fbssry",a.target.value)},function(a){t.handleInputSSry(e.row.ywybh)}]}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"htekry",label:"二开人月(合同)","min-width":"90"}}),t._v(" "),a("el-table-column",{attrs:{label:"二开人月(分包)","min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.row.fbekry,expression:"scope.row.fbekry"}],staticStyle:{width:"100%"},attrs:{type:"text",placeholder:"请输入金额"},domProps:{value:e.row.fbekry},on:{input:[function(a){a.target.composing||t.$set(e.row,"fbekry",a.target.value)},function(a){t.handleInputEKry(e.row.ywybh)}]}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"说明","min-width":"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.row.fbsm,expression:"scope.row.fbsm"}],staticStyle:{width:"100%",padding:"4px 8px"},attrs:{placeholder:"请输入说明"},domProps:{value:e.row.fbsm},on:{input:function(a){a.target.composing||t.$set(e.row,"fbsm",a.target.value)}}})]}}])})],1)],1)])])])])},staticRenderFns:[]};var i=a("Z0/y")(l,o,!1,function(t){a("4KWW")},"data-v-30cdc0a8",null);e.default=i.exports},"4KWW":function(t,e){}});
//# sourceMappingURL=97.db62982eafa4a5ab76c9.js.map