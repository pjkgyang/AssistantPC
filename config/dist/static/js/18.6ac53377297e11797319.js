webpackJsonp([18],{"+YRN":function(t,e){},"8Wo/":function(t,e,s){"use strict";(function(t){var a=s("3cXf"),n=s.n(a),i=s("BxWF"),o=s("V/8j");e.a={data:function(){return{loginShow:!0,userInfo:{},userNav:[],navshow:!0,disabled:!1,hash:""}},methods:{handleScroll:function(){var e=window.pageYOffset||t(".main_page").scrollTop()||document.body.scrollTop;this.disabled=e>200},handleBtn:function(){var e=setInterval(function(){var s=t(".main_page").scrollTop()||document.body.scrollTop;(s-=50)>0?t(".main_page").scrollTop(s):(t(".main_page").scrollTop(0),clearInterval(e),e=null)},.1)},handleCommand:function(t){"退出"==t.split("&&")[0]?(window.location.href=window.baseurl+"sys/logout.do?from="+encodeURIComponent("http://careful.wisedu.com/#/"),sessionStorage.clear()):"个人中心"==t.split("&&")[0]?this.$router.push({path:"/businesspage/personalSetting"}):"../home/main.do"==t.split("&&")[0]?window.open("http://careful.wisedu.com/emap/sys/assistantauth/home/main.do?sid="+t.split("&&")[1]):window.open(t.split("&&")[0])}},mounted:function(){var e=this;this.hash=window.location.hash;var s=this;!window.location.hash.includes("questionDetail")&&"/zdsfw"!=this.$route.path||window.location.hash.includes("h=1")?(Object(o.d)().then(function(t){200==t.status&&("success"==t.data.state?(e.userInfo=t.data.data,e.loginShow=!1,window.userId=t.data.data.userName,window.logo=t.data.data.logo,window.uid=t.data.data.uid,sessionStorage.setItem("username",t.data.data.nickName),sessionStorage.setItem("isJZuser",t.data.data.unitType),sessionStorage.setItem("userInfo",n()(t.data.data))):e.$alert(data.msg+"获取用户失败,请联系管理员 ","提示",{confirmButtonText:"确定",type:error,callback:function(t){window.location.href=window.baseurl+"sys/logout.do?from="+encodeURIComponent("http://careful.wisedu.com/#/")}}))}),Object(o.i)().then(function(t){var s=t.data;"success"==s.state&&0!=s.data.length&&null!=s.data&&(e.userNav=s.data,e.userNav.forEach(function(t,s,a){84==t.privid&&e.userNav.splice(s,1)}))}),t(".main_page").scroll(function(){s.handleScroll()})):this.navshow=!1},components:{headerUser:i.a}}}).call(e,s("L7Pj"))},BxWF:function(t,e,s){"use strict";var a=s("3cXf"),n=s.n(a),i=s("oFuF"),o=s("auNG"),r=s("V/8j"),u=s("YkBq"),l=s("Juj9"),c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._l(t.routes,function(e,a){return[e.childNodes&&e.childNodes.length&&!e.url?[s("el-submenu",{attrs:{index:t.navIndex?t.navIndex:String(a),"show-timeout":100,"hide-timeout":100}},[s("template",{slot:"title"},[e.icon?s("i",{staticClass:"item.icon"}):t._e(),t._v(t._s(e.privname))]),t._v(" "),t._l(e.childNodes,function(n,i){return[n.childNodes&&n.childNodes.length?s("nav-item",{attrs:{navIndex:a+"-"+i,routes:[n]}}):s("router-link",{attrs:{to:n.url.includes("http://")||n.url.includes("https://")?"":n.url}},[s("el-menu-item",{attrs:{index:n.url?n.url:""}},[e.icon?s("i",{staticClass:"item.icon"}):t._e(),t._v(t._s(n.privname))])],1)]})],2)]:[s("router-link",{attrs:{to:e.url}},[s("el-menu-item",{attrs:{index:e.url}},[e.icon?s("i",{staticClass:"item.icon"}):t._e(),t._v(t._s(e.privname))])],1)]]})],2)},staticRenderFns:[]},d=s("Z0/y")({name:"navItem",props:["routes","navIndex"]},c,!1,null,null,null).exports,p={data:function(){return{menus:[{dropName:"跳转到xxx",path:"http://www.baidu.com"},{dropName:"跳转到xxx",path:""}],navActive:"/businesspage/projects",title:"",inputValue:"",errorImg:'this.src="'+s("eJJ4")+'"',baseUrl:"",noticNum:"",noticeList:"",total:null,visible:!1,noticeVisible:!1,menuList:[],jf:"",menuData:[],routesArr:""}},computed:{onRoutes:function(){return this.$route.path.includes("/businesspage/report")?"/businesspage/report":this.$route.path.includes("/businesspage/task")?"/businesspage/projects":this.$route.path.includes("/businesspage/toplist")?"/businesspage/toplist":this.$route.path}},props:{userInfo:{type:Object,default:function(){return{}}},shown:{type:Boolean,default:!0},input:{type:String,default:""},userNav:{type:Array,default:function(){return[]}}},mounted:function(){var t=this;console.log("==="),window.location.hash.includes("/businesspage/report")?this.title="/businesspage/report":window.location.hash.includes("/businesspage/task")?this.title="/businesspage/projects":this.title=window.location.hash.split("#")[1],this.baseUrl=window.baseurl,this.getMessages(),i.a.$on("changeNoticeNum",function(t){}),i.a.$on("readAllMessages",function(e){t.noticNum=0}),Object(r.h)().then(function(e){var s=e.data;"success"==s.state&&(null!=s.data&&0!=s.data.length?(t.menuList=s.data,"#/"==window.location.hash&&(s.data[0].url?t.$router.push({path:s.data[0].url}):s.data[0].childNodes[0].url?t.$router.push({path:s.data[0].childNodes[0].url}):t.$router.push({path:s.data[0].childNodes[0].childNodes[0].url})),sessionStorage.setItem("menuList",n()(t.menuList))):t.$router.push({path:"/"}))}),Object(u.q)().then(function(e){var s=e.data;"success"==s.state&&(t.jf=s.data)})},watch:{$route:function(t,e){this.routesArr="",this.navActive=window.location.hash.split("#")[1],window.location.hash.includes("/businesspage/report")?this.title="/businesspage/report":window.location.hash.includes("/businesspage/task")?this.title="/businesspage/projects":this.title=window.location.hash.split("#")[1]}},methods:{handleSelect:function(t,e){if(-1==t.indexOf("http://")&&-1==t.indexOf("https://"))window.menu=null,this.menuList.forEach(function(e,s,a){e.url==t&&(window.menu=e)});else{var s=Object(i.e)("assistant"+window.userId,"WISEDUUSER");window.open(t.includes("?")?t+"&sign="+s:t+"?sign="+s)}},handleNotice:function(){this.$router.push({path:"/businesspage/systemMsg"}),this.title="/businesspage/systemMsg"},handleCommand:function(t){this.$emit("handleCommand",t)},handleRouter:function(t){var e=t.target.getAttribute("data-router");this.$router.push({path:e})},getInputVal:function(t){"13"==t.keyCode&&(i.a.$emit("searchInfo",this.inputValue),i.a.$emit("hoshRouter",this.inputValue))},getInputXmKB:function(t){"13"==t.keyCode&&(this.$router.push({path:"/businesspage/projects"}),i.a.$emit("searchXMKB",this.inputValue))},homeLogin:function(){window.location.href="http://careful.wisedu.com/emap/sys/assistantauth/home/login.do?redirect_url="+encodeURIComponent("http://careful.wisedu.com/#/")},getMessages:function(){var t=this;Object(o.a)({curPage:1,pageSize:10,isread:0}).then(function(e){var s=e.data;"success"==s.state&&(t.noticNum=s.data.records)})},jugeRouter:function(t,e){var s=this;t.childNodes.length?t.childNodes.forEach(function(t){s.jugeRouter(t)}):this.routesArr+=t.url+","}},components:{NavBarItem:l.a,navItem:d}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header"},[s("div",{staticClass:"header-left"},[t._m(0),t._v(" "),s("div",{staticClass:"header-navmenu"},[t._e(),t._v(" "),s("div",{staticClass:"header-navmenu-elmenu"},[s("el-menu",{ref:"navbar",attrs:{"text-color":"#708087","active-text-color":"#CD3333",router:!0,"default-active":t.onRoutes,mode:"horizontal","menu-trigger":"hover","unique-opened":""},on:{select:t.handleSelect}},[s("nav-item",{attrs:{routes:t.menuList,navIndex:""}})],1)],1)])]),t._v(" "),s("div",{staticStyle:{display:"flex","align-items":"center"}},[s("div",{staticStyle:{"margin-right":"15px",position:"relative"}},["/businesspage/dataTab"==t.title?s("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"searchKeyword",attrs:{type:"text",placeholder:"请输入搜索内容"},domProps:{value:t.inputValue},on:{keyup:t.getInputVal,input:function(e){e.target.composing||(t.inputValue=e.target.value)}}}):t._e(),t._v(" "),"/businesspage/projects"==t.title?s("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"searchKeyword",attrs:{type:"text",placeholder:"请输入搜索内容"},domProps:{value:t.inputValue},on:{keyup:t.getInputXmKB,input:function(e){e.target.composing||(t.inputValue=e.target.value)}}}):t._e(),t._v(" "),"/businesspage/dataTab"==t.title||"/businesspage/projects"==t.title?s("span",{staticClass:"el-icon-search",staticStyle:{position:"absolute",top:"6px",left:"5px"}}):t._e()]),t._v(" "),s("div",[s("p",{staticClass:"notice",on:{click:t.handleNotice}},[s("el-badge",{staticClass:"item",attrs:{value:0==t.noticNum?"":t.noticNum,max:99}},[s("span",{staticClass:"el-icon-bell",staticStyle:{"font-size":"20px"},attrs:{title:"通知"}})])],1)]),t._v(" "),-1!=t.jf?s("div",{staticStyle:{margin:"0 8px","font-size":"13px",color:"#f00"}},[s("span",[t._v("积分:")]),t._v(t._s(t.jf)+"\n    ")]):t._e(),t._v(" "),t.shown?s("div",{staticClass:"userLogin"},[s("img",{attrs:{src:"static/img/avatar1.png"}}),t._v(" "),s("a",{attrs:{href:"javascript:;;"},on:{click:t.homeLogin}},[t._v("登录")])]):t._e(),t._v(" "),t.shown?t._e():s("div",{staticClass:"info"},[s("el-col",{attrs:{span:12}},[s("el-dropdown",{on:{command:t.handleCommand}},[s("span",{staticClass:"el-dropdown-link"},[s("img",{attrs:{src:t.userInfo.logo,onerror:t.errorImg}}),t._v(" "),s("span",{staticStyle:{color:"#000","white-space":"nowrap"}},[t._v(" "+t._s(t.userInfo.nickName))])]),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t._l(t.userNav,function(e,a){return s("el-dropdown-item",{key:a,attrs:{command:e.homepage+"&&"+e.privid}},[t._v(t._s(e.privname))])}),t._v(" "),s("el-dropdown-item",{attrs:{command:"个人中心",divided:0!=t.userNav.length}},[t._v("个人中心")]),t._v(" "),s("el-dropdown-item",{attrs:{command:"退出",divided:0!=t.userNav.length}},[t._v("\n              退出\n            ")])],2)],1)],1)],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title_menu"},[e("p",[e("img",{attrs:{src:"static/img/logo2.png",alt:"logo"}}),this._v("　\n        "),e("span",[this._v("金智教育工程小助手")])])])}]};var m=s("Z0/y")(p,h,!1,function(t){s("+YRN")},"data-v-28cc9cc3",null);e.a=m.exports},rpsg:function(t,e){},"sR+d":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("8Wo/"),n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{height:"100%","min-height":"100%"}},[t.navshow?s("div",[s("div",{staticClass:"main_TopNav"},[s("header-user",{attrs:{userNav:t.userNav,userInfo:t.userInfo,shown:t.loginShow},on:{handleCommand:t.handleCommand}})],1)]):t._e(),t._v(" "),s("div",{class:{main_page:!t.hash.includes("questionDetail"),"main_page-questionDetail":t.hash.includes("questionDetail")}},[s("keep-alive",[s("router-view")],1),t._v(" "),s("transition",{attrs:{name:"scroll-fade",mode:"out-in"}},[t.disabled?s("div",{staticClass:"scrollTop",attrs:{title:"回到顶部"},on:{click:t.handleBtn}},[s("i",{staticClass:"el-icon-arrow-up"})]):t._e()])],1)])},staticRenderFns:[]};var i=function(t){s("rpsg")},o=s("Z0/y")(a.a,n,!1,i,"data-v-b310e10e",null);e.default=o.exports}});
//# sourceMappingURL=18.6ac53377297e11797319.js.map