webpackJsonp([47],{"74uQ":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={data:function(){return{visible:this.show,form:{mc:"",sfjz:"0"}}},methods:{handleClose:function(){this.visible=!1},handleCommit:function(){var t=this;this.validate()&&(this.form.dwmc=this.curDept.dwmc,this.form.dwbh=this.curDept.dwbh,this.$post(this.API.saveCjdw,this.form).then(function(e){"success"==e.state?(t.$message({message:"保存成功",type:"success"}),t.visible=!1,t.form.mc="",t.form.sfjz="0",t.$emit("handleCommit","")):t.$alert(e.msg,"提示",{confirmButtonText:"确定",type:"error"})}))},validate:function(){return!/^[\s]*$/.test(this.form.mc)||(this.$alert("请填写单位名称","提示",{confirmButtonText:"确定",type:"warning"}),!1)}},props:{show:{type:Boolean,default:!1},dataInfo:{type:Object,default:function(){return{}}},curDept:{type:Object,default:function(){return{}}}},watch:{show:function(t,e){this.visible=this.show,t?this.dataInfo.mc&&(this.form.mc=this.dataInfo.mc,this.form.sfjz=this.dataInfo.sfjz,this.form.wid=this.dataInfo.wid):delete this.form.wid}},components:{}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:"添加承建单位",width:"700px",top:"30px",visible:t.visible,"append-to-body":!0,"close-on-click-modal":!1,show:t.show},on:{"update:visible":function(e){t.visible=e},close:function(e){t.$emit("update:show",!1)}}},[a("div",{staticClass:"dialog-pj"},[a("el-form",{ref:"form",attrs:{model:t.form,size:"mini","label-width":"80px"}},[a("el-form-item",{attrs:{label:"单位名称"}},[a("el-input",{attrs:{placeholder:"请输入单位名称"},model:{value:t.form.mc,callback:function(e){t.$set(t.form,"mc",e)},expression:"form.mc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否金智"}},[a("el-radio-group",{model:{value:t.form.sfjz,callback:function(e){t.$set(t.form,"sfjz",e)},expression:"form.sfjz"}},[a("el-radio",{attrs:{label:"1"}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:"0"}},[t._v("否")])],1)],1),t._v(" "),a("el-form-item",{attrs:{"text-right":""}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleCommit}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")])],1)],1)],1)])],1)},staticRenderFns:[]};var o={data:function(){return{cjgsShow:!1,currentPage:1,pageSize:15,records:0,filterData:{txrqStart:"",txrqEnd:""},tableData:[],curData:{},curDept:{}}},mounted:function(){this.pageCjdw()},methods:{handleChangeUnit:function(t){this.curDept=t},handleCommit:function(){this.currentPage=1,this.pageCjdw()},handleAddCjgs:function(){this.curData={},this.cjgsShow=!0},handleEditCjgs:function(t){this.curData=t,this.cjgsShow=!0},handleDeleteCjgs:function(t){var e=this;this.$confirm("是否确认删除此计划?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$post(e.API.deleteCjdw,{wid:t.wid}).then(function(t){"success"==t.state?(e.$message({message:"删除成功",type:"success"}),e.pageCjdw()):e.$message({message:t.msg,type:"error"})})}).catch(function(){})},handleCurrentChange:function(t){this.currentPage=t,this.pageCjdw()},pageCjdw:function(){var t=this;this.$get(this.API.pageCjdw,{curPage:this.currentPage,pageSize:this.pageSize,dwmc:this.curDept.dwmc,dwbh:this.curDept.dwbh}).then(function(e){"success"==e.state&&(e.data.rows?t.tableData=e.data.rows:t.tableData=[],t.records=e.data.records)})}},components:{cjgsDiloag:a("VU/8")(n,s,!1,function(t){a("7c5d")},"data-v-92eaf738",null).exports,chooseSchool:a("XZD3").a}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pannelPadding-10"},[a("div",{staticClass:"pannelPaddingBg-10"},[a("div",{staticClass:"mg-12"},[a("chooseSchool",{on:{handleChangeUnit:t.handleChangeUnit}}),t._v(" "),a("br"),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handleAddCjgs}},[t._v("添加承建单位")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"mc",label:"承建公司"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cjrxm",label:"创建人","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"cjsj",label:"创建时间","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"bmmc",label:"是否金智"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s("0"==e.row.sfjz?"否":"是"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"left",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleEditCjgs(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{staticStyle:{color:"#f00"},attrs:{type:"text",size:"small"},on:{click:function(a){t.handleDeleteCjgs(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"total, prev, pager, next",total:t.records},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1),t._v(" "),a("cjgsDiloag",{attrs:{show:t.cjgsShow,dataInfo:t.curData,curDept:t.curDept},on:{"update:show":function(e){t.cjgsShow=e},handleCommit:t.handleCommit}})],1)},staticRenderFns:[]};var r=a("VU/8")(o,i,!1,function(t){a("8cAD")},null,null);e.default=r.exports},"7c5d":function(t,e){},"8cAD":function(t,e){}});
//# sourceMappingURL=47.2b236c2db0e659401446.js.map