webpackJsonp([110],{"0sM7":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});e("mtWM");var a=e("9A7R"),i=e("IfOk"),n=e("t5DY"),l=e("oFuF"),c=e("Vnos"),o=e("3fu1"),r=e("9+vf"),u=e("kAAd"),d={data:function(){return{questionTitle:"提交问题",show:!1,gxrShow:!1,sqgbShow:!1,cnjsrq:"",question:{wtlb:"",sfjj:"",wtjb:"",cp:"",yxfw:"",sfbug:"",bbh:"",title:"",nr:"",wid:"",qwjjrq:"",qwjjrqO:"",cnjsrq:""},queryLJshow:!0,keyword:"",questionList:[],pageSize:10,CurrentPage:1,total:null,wxyztlist:[],gczdList:[],wtflList:[{label:"1",mc:"待我解决问题"},{label:"0",mc:"我的提问"},{label:"3",mc:"我受理过的问题"},{label:"2",mc:"我相关的问题"},{label:"4",mc:"待我受理的问题"}],dwlxList:[{label:"1",mc:"学校"},{label:"0",mc:"金智"},{label:"2",mc:"合作伙伴"}],wtjblist:[],wjjztlist:[],cpline:[],cplist:[],wtlb:[],cnqxList:[],cnqx:"",wtlbbg:"",sfjj:"",sfcb:"",cpxbg:"",cpbg:"",sfbug:"",cxzt:"0",sqgb:"",sqgq:"",wxyztbg:"",wjjztbg:"",gczd:"",wtfl:"",dwlx:"",qusetionInfo:{},wid:"",xmbh:"",xmmc:"",tjkf:"",wtjb:"",accreditShow:!1,showCondition:"",isJZuser:"",baseUrl:"",starDay:"",endDay:"",date:[],userGroupTag:"",fwzl:1,wtInfo:{},index:""}},props:{},mounted:function(){var t=this;this.isJZuser=sessionStorage.getItem("isJZuser"),this.userGroupTag=JSON.parse(sessionStorage.getItem("userInfo")).userGroupTag,Object(i.P)().then(function(s){var e=s.data;t.showCondition=e.data,1!=e.data&&2!=e.data||(null==Object(l.n)("UnResponsiveStatus")?(Object(l.i)("UnResponsiveStatus",t.wxyztlist,""),Object(l.i)("ProblemSolutionState",t.wjjztlist,""),Object(l.i)("cpx",t.cpline,!0),Object(l.i)("gczd",t.gczdList,!0)):(t.wxyztlist=Object(l.n)("UnResponsiveStatus"),t.wjjztlist=Object(l.n)("ProblemSolutionState"),t.cpline=Object(l.n)("cpx"),t.gczdList=Object(l.n)("gczd")))}),Object(l.n)("ProblemType")&&Object(l.n)("cp")&&Object(l.n)("DeadlineStatus")?(this.wtlb=Object(l.n)("ProblemType"),this.cplist=Object(l.n)("cp"),this.cnqxList=Object(l.n)("DeadlineStatus")):(Object(l.i)("ProblemType",this.wtlb,""),Object(l.i)("cp",this.cplist,!0),Object(l.i)("DeadlineStatus",this.cnqxList,"")),Object(l.n)("ProblemLevel")?this.wtjblist=Object(l.n)("ProblemLevel"):Object(l.i)("ProblemLevel",this.wtjblist,"")},methods:{handleReject:function(t,s,e){var a=this;Object(i.b)({wid:"",zbwid:t.wid,sm:e}).then(function(t){var e=t.data;"success"==e.state?a.$alert("已成功驳回！","提示",{confirmButtonText:"确定",type:"success",callback:function(t){a.questionList[s].sqgbCount=0}}):a.$alert(e.msg,"提示",{confirmButtonText:"确定",type:"error"})})},handleClose:function(t,s){this.wtInfo=t,this.index=s,this.gxrShow=!this.gxrShow},closeQuestion:function(){this.gxrShow=!this.gxrShow,this.questionList[this.index].fbzt=1,this.questionList[this.index].sqgbCount=0},handleExport:function(){this.keyword=this.keyword?this.keyword:"",window.open(window.baseurl+"question/exportQuestionReport.do?noResponse="+this.wxyztbg+"&urgent="+this.sfjj+"&cp="+this.cpbg+"&cpx="+this.cpxbg+"&bug="+this.sfbug+"&jjzt="+this.wjjztbg+"&zt="+this.cxzt+"&keyword="+this.keyword+"&qyzd="+this.gczd+"&wtfl="+this.wtfl+"&dwlx="+this.dwlx+"&cb="+this.sfcb+"&wtlb="+this.wtlbbg+"&sqgb="+this.sqgb+"&deadline="+this.cnqx+"&starDay="+this.starDay+"&endDay="+this.endDay+"&xmbh=")},handleTWsuccess:function(){switch(this.questionTitle){case"我要提问":this.queryAllQuestions(1);break;case"编辑问题":this.queryAllQuestions(this.CurrentPage)}},handleQueryShow:function(){this.queryLJshow=!this.queryLJshow},handleQuestion:function(){var t=this;Object(i.e)().then(function(s){var e=s.data;"success"==e.state&&(e.data>=1?t.$alert("您有"+e.data+"个问题已解决申请待确认，如果已解决请点击“关闭”，如果未解决请点击“驳回”，所有申请处理后可以提新问题，谢谢支持！"," 提示",{confirmButtonText:"确定",type:"warning",callback:function(s){t.sqgbShow=!t.sqgbShow}}):(t.accreditShow=!1,t.questionTitle="我要提问",t.show=!0))})},handleQuestionDetail:function(t){var s=this.$router.resolve({name:"questionDetail",query:{wid:t.wid}});window.open(s.href,"_blank")},editQuestion:function(t){var s=this;this.questionTitle="编辑问题",Object(n.b)({wid:t.wid}).then(function(e){var a=e.data;"success"==a.state&&(a.data?Object(i.B)({wid:t.wid}).then(function(t){var e=t.data;"success"==e.state?(s.qusetionInfo=e.data,s.accreditShow=!1,s.show=!0):s.$alert(e.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})}):s.$alert("该条问题已有回复，不可编辑","提示",{confirmButtonText:"确定",callback:function(t){}}))})},deleteQuestion:function(t){var s=this;this.$confirm("是否删除该条问题?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.k)({wids:t.wid}).then(function(t){var e=t.data;"success"==e.state?s.$alert("删除成功","提示",{confirmButtonText:"确定",type:"success",callback:function(t){s.queryAllQuestions(1)}}):s.$alert(e.msg,"提示",{confirmButtonText:"确定",type:"error",callback:function(t){}})})}).catch(function(){})},searchQuestion:function(){this.queryAllQuestions(1)},handlequeryQuestion:function(){this.queryAllQuestions(1)},handleCurrentChange:function(t){this.queryAllQuestions(t)},handleDatepick:function(){this.date.length?(this.starDay=this.date[0]?this.date[0]:"",this.endDay=this.date[1]?this.date[1]:""):this.starDay=this.endDay="",this.queryAllQuestions(1)},handleSFJJ:function(t){var s=t.target.getAttribute("data-type");null!=s&&(this.sfjj=s,this.queryAllQuestions(1))},handleSFCB:function(t){var s=t.target.getAttribute("data-type");null!=s&&(this.sfcb=s,this.queryAllQuestions(1))},handleTJKF:function(t){var s=t.target.getAttribute("data-type");null!=s&&(this.tjkf=s,this.queryAllQuestions(1))},handleCPX:function(t){var s=t.target.getAttribute("data-type");null!=s&&(this.cpxbg=s,this.queryAllQuestions(1))},handleWtjb:function(t){var s=t.target.getAttribute("data-type");null!=s&&(this.wtjb=s,this.queryAllQuestions(1))},handleCP:function(t){var s=t.target.getAttribute("data-type");null!=s&&(this.cpbg=s,this.queryAllQuestions(1))},handleWTLB:function(t){var s=t.target.getAttribute("data-type");null!=s&&(this.wtlbbg=s,this.queryAllQuestions(1))},handleSFBUG:function(t){var s=t.target.getAttribute("data-type");null!=s&&(this.sfbug=s,this.queryAllQuestions(1))},handleCXZT:function(t){var s=t.target.getAttribute("data-type");null!=s&&(this.cxzt=s,this.queryAllQuestions(1))},handleSQGB:function(t){var s=t.target.getAttribute("data-type");null!=s&&(this.sqgb=s,this.queryAllQuestions(1))},handleSQGQ:function(t){var s=t.target.getAttribute("data-type");null!=s&&(this.sqgq=s,this.queryAllQuestions(1))},handleWXYZT:function(t){var s=t.target.getAttribute("data-type");null!=s&&(this.wxyztbg=s,this.queryAllQuestions(1))},handleWJJZT:function(t){var s=t.target.getAttribute("data-type");null!=s&&(this.wjjztbg=s,this.queryAllQuestions(1))},handleCNQX:function(t){var s=t.target.getAttribute("data-type");null!=s&&(this.cnqx=s,this.queryAllQuestions(1))},handleGCZD:function(t){var s=t.target.getAttribute("data-type");null!=s&&(this.gczd=s,this.queryAllQuestions(1))},handleDWLX:function(t){var s=t.target.getAttribute("data-type");null!=s&&(this.dwlx=s,this.queryAllQuestions(1))},handleZXR:function(t){var s=t.target.getAttribute("data-type");null!=s&&(this.wtfl=s,this.queryAllQuestions(1))},queryAllQuestions:function(t){var s=this;Object(i.t)({curPage:t,pageSize:this.pageSize,xmbh:"",urgent:this.sfjj,cp:this.cpbg,cpx:this.cpxbg,bug:this.sfbug,noResponse:this.wxyztbg,jjzt:this.wjjztbg,zt:this.cxzt,keyword:this.keyword,qyzd:this.gczd,wtfl:this.wtfl,dwlx:this.dwlx,cb:this.sfcb,wtlb:this.wtlbbg,wtjb:this.wtjb,sqgb:this.sqgb,deadline:this.cnqx,starDay:this.starDay,endDay:this.endDay,tjkf:this.tjkf,sqgq:this.sqgq}).then(function(t){var e=t.data;"success"==e.state&&(e.data&&0!=e.data.rows.length?s.questionList=e.data.rows:s.questionList=[],s.total=e.data.records)})}},watch:{},activated:function(){this.$route.params&&(this.keyword=this.$route.params.dwmc),this.queryAllQuestions(1),this.baseUrl=window.baseurl},components:{pagination:a.a,twDialog:c.a,gxrDialog:o.a,sqgbwtDialog:r.a,questionCard:u.a}},h={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"project-question"},[e("div",{staticClass:"project-question-query"},[e("div",[e("span",{staticClass:"query-title"},[e("span",{class:{"isshown-query":!0,"el-icon-arrow-down":!t.queryLJshow,"el-icon-arrow-up":t.queryLJshow},on:{click:t.handleQueryShow}}),t._v(" 高级查询")]),t._v(" "),e("el-input",{staticStyle:{width:"493px"},attrs:{size:"small",placeholder:"请输入问题提出人姓名/工号/手机号/标题/项目编号/项目名称/学校名称"},on:{change:t.searchQuestion},model:{value:t.keyword,callback:function(s){t.keyword=s},expression:"keyword"}}),t._v("　\n        "),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handlequeryQuestion}},[t._v("查询")])],1),t._v(" "),t.queryLJshow?e("div",{staticClass:"query-condition"},[e("div",[e("p",{staticClass:"query-title"},[t._v("提问时间:")]),t._v(" "),e("p",[e("el-date-picker",{attrs:{size:"mini",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:t.handleDatepick},model:{value:t.date,callback:function(s){t.date=s},expression:"date"}})],1)]),t._v(" "),e("div",[e("p",{staticClass:"query-title"},[t._v("问题分类:")]),t._v(" "),e("p",{staticClass:"query-list",on:{click:t.handleZXR}},[e("span",{class:{"bg-active":""==t.wtfl},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.wtflList,function(s,a){return e("span",{key:a,class:{"bg-active":t.wtfl==s.label},attrs:{"data-type":s.label}},[t._v(t._s(s.mc))])})],2)]),t._v(" "),e("div",[e("p",{staticClass:"query-title"},[t._v("查询状态:")]),t._v(" "),e("p",{staticClass:"query-list",on:{click:t.handleCXZT}},[e("span",{class:{"bg-active":""==t.cxzt},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),e("span",{class:{"bg-active":"0"==t.cxzt},attrs:{"data-type":"0"}},[t._v("处理中")]),t._v(" "),e("span",{class:{"bg-active":"1"==t.cxzt},attrs:{"data-type":"1"}},[t._v("已关闭")])])]),t._v(" "),e("div",[e("p",{staticClass:"query-title"},[t._v("申请关闭:")]),t._v(" "),e("p",{staticClass:"query-list",on:{click:t.handleSQGB}},[e("span",{class:{"bg-active":""==t.sqgb},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),e("span",{class:{"bg-active":"1"==t.sqgb},attrs:{"data-type":"1"}},[t._v("是")]),t._v(" "),e("span",{class:{"bg-active":"0"==t.sqgb},attrs:{"data-type":"0"}},[t._v("否")]),t._v(" "),e("span",{class:{"bg-active":"2"==t.sqgb},attrs:{"data-type":"2"}},[t._v("已驳回")])])]),t._v(" "),e("div",[e("p",{staticClass:"query-title"},[t._v("申请挂起:")]),t._v(" "),e("p",{staticClass:"query-list",on:{click:t.handleSQGQ}},[e("span",{class:{"bg-active":""==t.sqgq},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),e("span",{class:{"bg-active":"1"==t.sqgq},attrs:{"data-type":"1"}},[t._v("是")]),t._v(" "),e("span",{class:{"bg-active":"0"==t.sqgq},attrs:{"data-type":"0"}},[t._v("否")]),t._v(" "),e("span",{class:{"bg-active":"2"==t.sqgq},attrs:{"data-type":"2"}},[t._v("已驳回")])])]),t._v(" "),e("div",[e("p",{staticClass:"query-title"},[t._v("是否催办:")]),t._v(" "),e("p",{staticClass:"query-list",on:{click:t.handleSFCB}},[e("span",{class:{"bg-active":""==t.sfcb},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),e("span",{class:{"bg-active":"1"==t.sfcb},attrs:{"data-type":"1"}},[t._v("是")]),t._v(" "),e("span",{class:{"bg-active":"0"==t.sfcb},attrs:{"data-type":"0"}},[t._v("否")])])]),t._v(" "),e("div",[e("p",{staticClass:"query-title"},[t._v("提交开发:")]),t._v(" "),e("p",{staticClass:"query-list",on:{click:t.handleTJKF}},[e("span",{class:{"bg-active":""==t.tjkf},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),e("span",{class:{"bg-active":"1"==t.tjkf},attrs:{"data-type":"1"}},[t._v("是")]),t._v(" "),e("span",{class:{"bg-active":"0"==t.tjkf},attrs:{"data-type":"0"}},[t._v("否")])])]),t._v(" "),1==t.showCondition||2==t.showCondition?e("div",[e("p",{staticClass:"query-title"},[t._v("产品线:")]),t._v(" "),e("p",{staticClass:"query-list",on:{click:t.handleCPX}},[e("span",{class:{"bg-active":""==t.cpxbg},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.cpline,function(s,a){return e("span",{class:{"bg-active":t.cpxbg===s.label},attrs:{"data-type":s.label}},[t._v(t._s(s.mc))])})],2)]):t._e(),t._v(" "),e("div",[e("p",{staticClass:"query-title"},[t._v("产品:")]),t._v(" "),e("p",{staticClass:"query-list",on:{click:t.handleCP}},[e("span",{class:{"bg-active":""==t.cpbg},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.cplist,function(s,a){return e("span",{class:{"bg-active":t.cpbg==s.label},attrs:{"data-type":s.label}},[t._v(t._s(s.mc))])})],2)]),t._v(" "),1==t.showCondition||2==t.showCondition?e("div",[e("p",{staticClass:"query-title"},[t._v("问题类别:")]),t._v(" "),e("p",{staticClass:"query-list",on:{click:t.handleWTLB}},[e("span",{class:{"bg-active":""==t.wtlbbg},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.wtlb,function(s,a){return e("span",{class:{"bg-active":t.wtlbbg==s.label},attrs:{"data-type":s.label}},[t._v(t._s(s.mc))])})],2)]):t._e(),t._v(" "),e("div",[e("p",{staticClass:"query-title"},[t._v("问题级别:")]),t._v(" "),e("p",{staticClass:"query-list",on:{click:t.handleWtjb}},[e("span",{class:{"bg-active":""==t.wtjb},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.wtjblist,function(s,a){return e("span",{class:{"bg-active":t.wtjb===s.label},attrs:{"data-type":s.label}},[t._v(t._s(s.mc))])})],2)]),t._v(" "),1==t.showCondition||2==t.showCondition?e("div",[e("p",{staticClass:"query-title"},[t._v("未响应状态:")]),t._v(" "),e("p",{staticClass:"query-list",on:{click:t.handleWXYZT}},[e("span",{class:{"bg-active":""==t.wxyztbg},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.wxyztlist,function(s,a){return e("span",{class:{"bg-active":t.wxyztbg==s.label},attrs:{"data-type":s.label}},[t._v(t._s(s.mc))])})],2)]):t._e(),t._v(" "),1==t.showCondition||2==t.showCondition?e("div",[e("p",{staticClass:"query-title"},[t._v("未解决状态:")]),t._v(" "),e("p",{staticClass:"query-list",on:{click:t.handleWJJZT}},[e("span",{class:{"bg-active":""==t.wjjztbg},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.wjjztlist,function(s,a){return e("span",{class:{"bg-active":t.wjjztbg==s.label},attrs:{"data-type":s.label}},[t._v(t._s(s.mc))])})],2)]):t._e(),t._v(" "),0==t.isJZuser?e("div",[e("p",{staticClass:"query-title"},[t._v("到期查询:")]),t._v(" "),e("p",{staticClass:"query-list",on:{click:t.handleCNQX}},[e("span",{class:{"bg-active":""==t.cnqx},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.cnqxList,function(s,a){return e("span",{class:{"bg-active":t.cnqx==s.label},attrs:{"data-type":s.label}},[t._v(t._s(s.mc))])})],2)]):t._e(),t._v(" "),t.userGroupTag.includes("ProblemAdmin")||t.userGroupTag.includes("QYZ")?e("div",[e("p",{staticClass:"query-title"},[t._v("区域工程:")]),t._v(" "),e("p",{staticClass:"query-list",on:{click:t.handleGCZD}},[e("span",{class:{"bg-active":""==t.gczd},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.gczdList,function(s,a){return e("span",{key:a,class:{"bg-active":t.gczd==s.label},attrs:{"data-type":s.label}},[t._v(t._s(s.mc))])})],2)]):t._e(),t._v(" "),1==t.showCondition||2==t.showCondition?e("div",[e("p",{staticClass:"query-title"},[t._v("单位类型:")]),t._v(" "),e("p",{staticClass:"query-list",on:{click:t.handleDWLX}},[e("span",{class:{"bg-active":""==t.dwlx},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.dwlxList,function(s,a){return e("span",{class:{"bg-active":t.dwlx==s.label},attrs:{"data-type":s.label}},[t._v(t._s(s.mc))])})],2)]):t._e()]):t._e()]),t._v(" "),e("div",{staticStyle:{background:"#fff","margin-top":"10px","box-shadow":"0 2px 12px 0 rgba(0,0,0,.1)","border-radius":"4px",padding:"10px 0"}},[e("div",{staticStyle:{padding:"0 10px"}},[e("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"danger"},on:{click:t.handleQuestion}},[t._v("我要提问")]),t._v(" "),this.userGroupTag.includes("ProblemAdmin")||t.userGroupTag.includes("GCCPZJ")||t.userGroupTag.includes("QYZ")?e("el-button",{staticStyle:{float:"right","margin-top":"8px"},attrs:{size:"mini",type:"primary"},on:{click:t.handleExport}},[t._v("导出")]):t._e()],1),t._v(" "),e("hr",{staticStyle:{"border-top":"1px solid #eee",margin:"8px 0 0 0 !important"}}),t._v(" "),e("questionCard",{attrs:{questionList:t.questionList},on:{handleQuestionDetail:t.handleQuestionDetail,handleReject:t.handleReject,handleClose:t.handleClose,editQuestion:t.editQuestion,deleteQuestion:t.deleteQuestion}}),t._v(" "),t.total>10?e("div",{staticStyle:{"margin-top":"10px","text-align":"left"}},[e("pagination",{attrs:{currentPage:t.CurrentPage,total:t.total,pageSize:t.pageSize},on:{handleCurrentChange:t.handleCurrentChange}})],1):t._e()],1),t._v(" "),e("twDialog",{attrs:{show:t.show,questionTitle:t.questionTitle,accreditShow:t.accreditShow,questionInfo:t.qusetionInfo},on:{"update:show":function(s){t.show=s},handleTWsuccess:t.handleTWsuccess}}),t._v(" "),e("gxrDialog",{attrs:{show:t.gxrShow,wtInfo:t.wtInfo},on:{"update:show":function(s){t.gxrShow=s},closeQuestion:t.closeQuestion}}),t._v(" "),e("sqgbwtDialog",{attrs:{show:t.sqgbShow},on:{"update:show":function(s){t.sqgbShow=s}}})],1)},staticRenderFns:[]};var b=e("VU/8")(d,h,!1,function(t){e("U77G")},"data-v-34acad0e",null);s.default=b.exports},U77G:function(t,s){}});
//# sourceMappingURL=110.0569482a728fb79479a0.js.map