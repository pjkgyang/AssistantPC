webpackJsonp([25],{SM7C:function(t,e){},XOpp:function(t,e,a){"use strict";(function(t){var s=a("mtWM"),o=(a.n(s),a("nfA5")),i=a("TNFc"),r=a("IfOk");e.a={data:function(){return{dialogQuestionVisible:!1,visible:!1,isClearFile:!1,xmInfo:{},formData:{xmmc:"",xmbh:"",tzrq:"",fjData:"",sm:""}}},props:{show:{type:Boolean,default:!1},type:{type:String,default:""},xmData:{type:Object,default:function(){return{}}}},methods:{handleEdit:function(t){this.xmInfo=t,this.formData.xmmc=t.xmmc,this.formData.xmbh=t.xmbh,this.dialogQuestionVisible=!1},addQuestiontItem:function(){this.dialogQuestionVisible=!0},handleCommit:function(){this.formData.sm=t("#summernote").summernote("code"),this.validate()&&this.$emit("handleCommit",this.formData)},handleCancel:function(){this.visible=!1,t("#summernote").summernote("code",""),this.formData.sm="",this.formData.xmmc="",this.formData.tzrq=""},handleUploadFile:function(t){this.formData.fjData=t.join(",")},validate:function(){return this.formData.xmmc?this.formData.tzrq||"tz"!=this.type?!("<p><br></p>"==this.formData.sm||!/[\u4e00-\u9fa5]/.test(this.formData.sm))||(this.$message({message:"请填写正确停滞说明",type:"warning"}),!1):(this.$message({message:"请选择停滞日期",type:"warning"}),!1):(this.$message({message:"请选择项目",type:"warning"}),!1)}},watch:{show:function(){var e=this;this.visible=this.show,this.show?(this.$nextTick(function(){t("#summernote").summernote({dialogsInBody:!0,placeholder:"请输入内容",focus:!0,height:200,width:"100%",minHeight:260,lang:"zh-CN",toolbar:[["style",["bold","italic","underline","clear"]],["font",["strikethrough","superscript","subscript"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["picture"],["link",["linkDialogShow","unlink"]]]})}),this.xmData.xmbh?(this.formData.xmbh=this.xmData.xmbh,this.formData.xmmc=this.xmData.xmmc,Object(r.q)({xmbh:this.xmData.xmbh}).then(function(t){"success"==t.data.state&&(e.xmInfo=t.data.data)})):(this.xmInfo={},this.formData.xmbh="",this.formData.xmmc="")):(t("#summernote").summernote("destroy"),this.isClearFile=!this.isClearFile)}},components:{itemChoose:o.a,uploadFile:i.a}}}).call(e,a("7t+N"))},XYEa:function(t,e,a){"use strict";var s=a("XOpp"),o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dialog-container xmtz_info"},[a("el-dialog",{attrs:{title:"tz"==t.type?"停滞申请":"停滞重启",width:"1100px",top:"30px",visible:t.visible,"close-on-click-modal":!1,show:t.show},on:{"update:visible":function(e){t.visible=e},close:function(e){t.$emit("update:show",!1)}}},[a("div",{staticClass:"Question pd-10"},[a("table",[a("tr",[a("th",{staticClass:"before-require"},[t._v("选择项目")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"text",readonly:"",placeholder:"请选择项目"},model:{value:t.formData.xmmc,callback:function(e){t.$set(t.formData,"xmmc",e)},expression:"formData.xmmc"}},[t.xmData.xmbh?t._e():a("el-button",{staticStyle:{width:"30px",padding:"0 12px"},attrs:{slot:"append",icon:"el-icon-circle-plus-outline"},on:{click:t.addQuestiontItem},slot:"append"})],1)],1)]),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:!!t.formData.xmmc,expression:"!!formData.xmmc"}]},[a("th",[t._v("项目状态")]),t._v(" "),a("td",[t._v(t._s(t.xmInfo.xmzt))]),t._v(" "),a("th",[t._v("学校")]),t._v(" "),a("td",[t._v(t._s(t.xmInfo.dwmc||t.xmInfo.yh||t.xmInfo.xx))])]),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:!!t.formData.xmmc,expression:"!!formData.xmmc"}]},[a("th",[t._v("项目类别")]),t._v(" "),a("td",[t._v(t._s(t.xmInfo.xmlb))]),t._v(" "),a("th",[t._v("甲方责任人")]),t._v(" "),a("td",[t._v(t._s(t.xmInfo.jfzrrxm?t.xmInfo.jfzrrxm:"无"))])]),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:!!t.formData.xmmc,expression:"!!formData.xmmc"}]},[a("th",[t._v("项目经理")]),t._v(" "),a("td",[t._v(t._s(t.xmInfo.yfzrrxm||t.xmInfo.xmjl))]),t._v(" "),a("th",[t._v("客户经理")]),t._v(" "),a("td",[t._v(t._s(t.xmInfo.khjl))])]),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:!!t.formData.xmmc,expression:"!!formData.xmmc"}]},[a("th",[t._v("签署日期")]),t._v(" "),a("td",[t._v(t._s(t.xmInfo.qssj))]),t._v(" "),a("th",[t._v("启动日期")]),t._v(" "),a("td",[t._v(t._s(t.xmInfo.qdrq))])]),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:!!t.formData.xmmc,expression:"!!formData.xmmc"}]},[a("th",[t._v("服务开始日期")]),t._v(" "),a("td",[t._v(t._s(t.xmInfo.fwksrq))]),t._v(" "),a("th",[t._v("服务期限（月）")]),t._v(" "),a("td",[t._v(t._s(t.xmInfo.fwqx))])]),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:!!t.formData.xmmc,expression:"!!formData.xmmc"}]},[a("th",[t._v("合同编号")]),t._v(" "),a("td",[t._v(t._s(t.xmInfo.htbh))]),t._v(" "),a("th",[t._v("合同金额（元）")]),t._v(" "),a("td",[t._v(t._s(t.xmInfo.htje))])]),t._v(" "),"tz"==t.type?a("tr",[a("th",{staticClass:"before-require"},[t._v("停滞到")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:t.formData.tzrq,callback:function(e){t.$set(t.formData,"tzrq",e)},expression:"formData.tzrq"}})],1)]):t._e(),t._v(" "),"cq"==t.type&&t.formData.xmmc?a("tr",[a("th",[t._v("停滞到")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.xmInfo.tzsj)+"\n\t\t\t\t\t")])]):t._e(),t._v(" "),"tz"==t.type?a("tr",[a("th",[t._v("上传附件")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[a("uploadFile",{attrs:{istb:t.isClearFile},on:{handleUploadFile:t.handleUploadFile}})],1)]):t._e(),t._v(" "),a("tr",[a("th",{staticClass:"before-require",staticStyle:{"vertical-align":"top"}},[t._v("详情")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[a("div",{attrs:{id:"summernote"}})])])]),t._v(" "),a("div",{staticClass:"pd-10",attrs:{"text-right":""}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.handleCommit}},[t._v("确定")]),t._v(" \n\t\t\t\t"),a("el-button",{attrs:{size:"small"},on:{click:t.handleCancel}},[t._v("取消")])],1)])]),t._v(" "),a("el-dialog",{attrs:{title:"选择项目",visible:t.dialogQuestionVisible,"close-on-click-modal":!1,width:"800px",top:"30px","append-to-body":""},on:{"update:visible":function(e){t.dialogQuestionVisible=e}}},[a("div",{staticStyle:{padding:"10px"}},[a("itemChoose",{attrs:{isCq:"cq"==t.type},on:{handleEdit:t.handleEdit}})],1)])],1)},staticRenderFns:[]};var i=function(t){a("iLwf")},r=a("VU/8")(s.a,o,!1,i,"data-v-66617c9f",null);e.a=r.exports},etqZ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("XYEa"),o=a("0dLS"),i={data:function(){return{show:!1,smShow:!1,currentPage:1,pageSize:15,records:0,ztList:[{mc:"全部",id:""},{mc:" 流程中",id:1},{mc:"审批通过",id:2},{mc:"审批不通过",id:3}],formdata:{keyword:"",ksrq:"",jsrq:"",sqlb:0,zt:1},type:"tz",wid:"",dqwid:"",xmData:{},isRestart:!1,tableData:[{}]}},mounted:function(){this.pageProjectStopWorkflow()},methods:{handleCurrentChange:function(t){this.currentPage=t,this.pageProjectStopWorkflow()},handleSearchLcb:function(){this.currentPage=1,this.pageProjectStopWorkflow()},handleSelectionChange:function(){},handleCommitTzOrCq:function(t){var e=this,a={},s="";"tz"==this.type?(a.xmbh=t.xmbh,a.tzsj=t.tzrq,a.fjData=t.fjData,a.sm=t.sm):(a.xmbh=t.xmbh,a.sm=t.sm),this.isRestart?(a.wid=this.wid,s="tz"==this.type?this.API.restartProjectStopProgress:this.API.restartProjectRestartProgress):s="tz"==this.type?this.API.startProjectStopProgress:this.API.startProjectRestartProgress,this.$post(s,a).then(function(t){"success"==t.state?(e.$message({message:"提交成功",type:"success"}),e.show=!1,e.pageProjectStopWorkflow()):e.$message({message:t.msg,type:"error"})})},handleClick:function(t,e){var a=this;if(this.wid=t.wid,"process"==e){var s=this.$router.resolve({path:"/projectStagnationDetail",query:{wid:t.wid}});window.open(s.href,"_blank")}else"pass"==e?this.$confirm("是否确定审批通过?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.agreeOrreject("pass",t.dqlcwid)}).catch(function(){}):(this.dqwid=t.dqlcwid,this.smShow=!0)},handleCommitSm:function(t){this.agreeOrreject("reject",this.dqwid,t)},handleChangeSqlb:function(){this.currentPage=1,this.pageProjectStopWorkflow()},handleCheckZt:function(t){this.formdata.zt!=t&&(this.formdata.zt=t,this.currentPage=1,this.pageProjectStopWorkflow())},handleExport:function(){this.formdata.sqlb=this.formdata.sqlb?this.formdata.sqlb:"",window.open(this.API.exportProjectStopWorkflow+"?fqsjStart="+this.formdata.ksrq+"&fqsjEnd="+this.formdata.jsrq+"&lx="+this.formdata.sqlb+"&zt="+this.formdata.zt+"&keyword="+this.formdata.keyword)},handleApply:function(t,e){this.type=t,e?(this.wid=e.wid,this.xmData=e,this.isRestart=!0):(this.xmData={},this.isRestart=!1),this.show=!0},agreeOrreject:function(t,e,a){var s=this;this.$post("pass"==t?this.API.agree:this.API.reject,{wid:this.wid,lcwid:e,sm:a}).then(function(e){"success"==e.state?(s.$message({message:"审批结果已提交",type:"success"}),"pass"!=t&&(s.smShow=!1),s.pageProjectStopWorkflow()):(s.$message({message:e.msg,type:"warning"}),s.pageProjectStopWorkflow())})},pageProjectStopWorkflow:function(){var t=this;this.$get(this.API.pageProjectStopWorkflow,{curPage:this.currentPage,pageSize:this.pageSize,fqsjStart:this.formdata.ksrq,fqsjEnd:this.formdata.jsrq,lx:this.formdata.sqlb?this.formdata.sqlb:"",zt:this.formdata.zt,keyword:this.formdata.keyword}).then(function(e){"success"==e.state?(t.tableData=e.data.rows?e.data.rows:[],t.records=e.data.records):t.$message({message:e.msg,type:"error"})})}},components:{tzDialog:s.a,smDialog:o.a}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pd-10"},[a("div",{staticClass:"pannelPaddingBg-10"},[a("div",[a("div",[a("span",{staticClass:"query-title"},[t._v("高级查询:")]),t._v(" "),a("el-input",{staticStyle:{width:"463px"},attrs:{size:"mini",placeholder:"请输入项目编号/项目名称/里程碑描述/项目内容/项目经理/责任人"},on:{change:t.handleSearchLcb},model:{value:t.formdata.keyword,callback:function(e){t.$set(t.formdata,"keyword",e)},expression:"formdata.keyword"}}),t._v("\n\t\t\t\t　\n\t\t\t\t"),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handleSearchLcb}},[t._v("查询")])],1),t._v(" "),a("div",{staticClass:"mg-12",attrs:{flex:""}},[a("p",{staticClass:"query-title"},[t._v("日期:")]),t._v(" "),a("p",[a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"开始日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:t.formdata.ksrq,callback:function(e){t.$set(t.formdata,"ksrq",e)},expression:"formdata.ksrq"}}),t._v("\n\t\t\t\t\t至\n\t\t\t\t\t"),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"结束日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:t.formdata.jsrq,callback:function(e){t.$set(t.formdata,"jsrq",e)},expression:"formdata.jsrq"}})],1)]),t._v(" "),a("div",[a("p",{staticClass:"query-title"},[t._v("申请类别:")]),t._v(" "),a("el-radio-group",{on:{change:t.handleChangeSqlb},model:{value:t.formdata.sqlb,callback:function(e){t.$set(t.formdata,"sqlb",e)},expression:"formdata.sqlb"}},[a("el-radio",{attrs:{label:0}},[t._v("全部")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("项目停滞")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("项目重启")])],1)],1),t._v(" "),a("div",{attrs:{flex:""}},[a("p",{staticClass:"query-title"},[t._v("状态:")]),t._v(" "),a("p",{staticClass:"query-list"},t._l(t.ztList,function(e,s){return a("span",{key:s,class:{"bg-active":t.formdata.zt==e.id},on:{click:function(a){t.handleCheckZt(e.id)}}},[t._v(t._s(e.mc))])}))])]),t._v(" "),a("div",{staticClass:"pd-10"},[a("div",{staticClass:"mg-12"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){t.handleApply("tz")}}},[t._v("发起项目停滞")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){t.handleApply("cq")}}},[t._v("发起项目重启")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handleExport}},[t._v("导出")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{fixed:"left",label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.canRestart&&1==e.row.lx?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleApply("tz",e.row)}}},[t._v("重启项目停滞")]):t._e(),t._v(" "),1==e.row.canRestart&&2==e.row.lx?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleApply("cq",e.row)}}},[t._v("重启项目重启")]):t._e(),t._v(" "),1==e.row.canOper?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleClick(e.row,"pass")}}},[t._v("审批通过")]):t._e(),t._v(" "),1==e.row.canOper?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleClick(e.row,"reject")}}},[t._v("审批不通过")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleClick(e.row,"process")}}},[t._v("查看进度")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"xmmc",fixed:"left",label:"项目名称","min-width":"300","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"xx",label:"学校","min-width":"260"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fqrxm",label:"申请人",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{prop:"tzsj",label:"停滞截止日期",width:"130"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mc",label:"申请类别",width:"130"}}),t._v(" "),a("el-table-column",{attrs:{prop:"zt_display",label:"状态",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{prop:"dqlc",label:"当前流程",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{prop:"dqlczt_display",label:"当前流程状态",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{prop:"xmlb",label:"项目类别",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"xmztzt",label:"整体状态",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"khjl",label:"客户经理",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{prop:"xmjl",label:"项目经理",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{prop:"jfzrr",label:"甲方责任人",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{prop:"htje",label:"合同金额",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"htbh",label:"合同编号",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"xmbh",label:"项目编号",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"htxz",label:"合同性质",width:"120"}})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"total,prev, pager, next, jumper",total:t.records},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)]),t._v(" "),a("tzDialog",{attrs:{show:t.show,type:t.type,xmData:t.xmData},on:{"update:show":function(e){t.show=e},handleCommit:t.handleCommitTzOrCq}}),t._v(" "),a("smDialog",{attrs:{show:t.smShow},on:{"update:show":function(e){t.smShow=e},handleClickSure:t.handleCommitSm}})],1)},staticRenderFns:[]};var l=a("VU/8")(i,r,!1,function(t){a("SM7C")},null,null);e.default=l.exports},iLwf:function(t,e){}});
//# sourceMappingURL=25.8385a2adedc68744d852.js.map