webpackJsonp([15,55,59],{"2sdr":function(t,e){},"7BXw":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("mtWM");var i=a("9A7R"),s=a("IfOk"),n=a("t5DY"),r=a("oFuF"),l=a("Vnos"),o=a("kAAd"),c=a("XOVc"),h=a("aCWX"),u={data:function(){return{dialogTableVisible:!1,gjjhShow:!0,quesData:{},questionTitle:"提交问题",show:!1,cnjsrq:"",queryLJshow:!0,keyword:"",questionList:[],pageSize:10,CurrentPage:1,total:null,dwlxList:[{label:"1",mc:"学校"},{label:"0",mc:"金智"},{label:"2",mc:"合作伙伴"}],zzrList:[{label:"1",mc:"待我解决问题"},{label:"0",mc:"我的提问"},{label:"3",mc:"我受理过的问题"},{label:"2",mc:"我相关的问题"}],bqlyList:[{label:"1",mc:"我的标签"},{label:"2",mc:"其他人的标签"},{label:"3",mc:"无标签"}],wtfbqlist:[],wtgjztlist:[],wtfbq:"",wtfbqO:"",gjzt:"",bqly:"",wtfl:"",cxzt:"",sqgb:"",cpline:[],cplist:[],wtbqlist:[],wtbq:"",wtlb:[],wtlbbg:"",cpxbg:"",cpbg:"",dwlx:"",qusetionInfo:{},wid:"",xmbh:"",xmmc:"",accreditShow:!1,showCondition:"",isJZuser:"",SLbtnDisabled:!1,username:null,baseUrl:"",starDay:"",endDay:"",date:[]}},props:{},mounted:function(){null!=window.userName?(this.username=window.userName,sessionStorage.setItem("username",window.userName)):this.username=sessionStorage.getItem("username"),this.isJZuser=JSON.parse(sessionStorage.getItem("userInfo")).unitType,Object(r.n)("cpx")?this.cpline=Object(r.n)("cpx"):Object(r.i)("cpx",this.cpline,!0),Object(r.n)("ProblemType")?this.wtlb=Object(r.n)("ProblemType"):Object(r.i)("ProblemType",this.wtlb,""),Object(r.n)("cp")?this.cplist=Object(r.n)("cp"):Object(r.i)("cp",this.cplist,!0),Object(r.n)("WTBQ")?this.wtbqlist=Object(r.n)("WTBQ"):Object(r.i)("WTBQ",this.wtbqlist,!0),Object(r.n)("wtfbq")?this.wtfbqlist=Object(r.n)("wtfbq"):Object(r.i)("wtfbq",this.wtfbqlist,!0),Object(r.n)("WtGjjhZt")?this.wtgjztlist=Object(r.n)("WtGjjhZt"):Object(r.i)("WtGjjhZt",this.wtgjztlist,"")},methods:{handleImprovementPlan:function(t){this.quesData=t;var e=t.fbqdm.split(","),a="",i="";t.fbqdm.includes("W05")&&!t.fbqdm.includes("W03")?this.wtfbqO="W05":t.fbqdm.includes("W03")&&!t.fbqdm.includes("W05")?this.wtfbqO="W03":t.fbqdm.includes("W03")&&t.fbqdm.includes("W05")&&(e.forEach(function(t,e,s){"W03"==t&&(a=e),"W05"==t&&(i=e)}),a>i?this.wtfbqO="W03":a<i&&(this.wtfbqO="W05")),this.dialogTableVisible=!this.dialogTableVisible},handleExport:function(){this.keyword=this.keyword?this.keyword:"",window.open(window.baseurl+"question/exportQuestionReport.do?&cp="+this.cpbg+"&cpx="+this.cpxbg+"&zt="+this.cxzt+"&wtfbq="+this.wtfbq+"&wtgjzt="+this.gjzt+"&wtbq="+this.wtbq+"&sqgb="+this.sqgb+"&keyword="+this.keyword+"&dwlx="+this.dwlx+"&wtlb="+this.wtlbbg+"&starDay="+this.starDay+"&endDay="+this.endDay+"&isAnalyse=true&xmbh=&wtfl="+this.wtfl+"&bqly="+this.bqly)},handleTWsuccess:function(){switch(this.questionTitle){case"我要提问":this.queryAllQuestions(1);break;case"编辑问题":this.queryAllQuestions(this.CurrentPage)}},handleQueryShow:function(){this.queryLJshow=!this.queryLJshow},handleQuestionDetail:function(t){var e=this.$router.resolve({name:"questionDetail",query:{wid:t.wid,bq:1}});window.open(e.href,"_blank")},editQuestion:function(t){var e=this;this.questionTitle="编辑问题",Object(n.b)({wid:t.wid}).then(function(a){var i=a.data;"success"==i.state&&(i.data?Object(s.B)({wid:t.wid}).then(function(t){var a=t.data;"success"==a.state?(e.qusetionInfo=a.data,e.accreditShow=!1,e.show=!0):e.$alert(a.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})}):e.$alert("该条问题已有回复，不可编辑","提示",{confirmButtonText:"确定",callback:function(t){}}))})},deleteQuestion:function(t){var e=this;this.$confirm("是否删除该条问题?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.k)({wids:t.wid}).then(function(t){var a=t.data;"success"==a.state?e.$alert("删除成功","提示",{confirmButtonText:"确定",type:"success",callback:function(t){e.queryAllQuestions(1)}}):e.$alert(a.msg,"提示",{confirmButtonText:"确定",type:"error",callback:function(t){}})})}).catch(function(){})},searchQuestion:function(){this.CurrentPage=1,this.queryAllQuestions(1)},handlequeryQuestion:function(){this.CurrentPage=1,this.queryAllQuestions(1)},handleCurrentChange:function(t){this.CurrentPage=t,this.queryAllQuestions(t)},handleDatepick:function(){this.date.length?(this.starDay=this.date[0]?this.date[0]:"",this.endDay=this.date[1]?this.date[1]:""):this.starDay=this.endDay="",this.queryAllQuestions(1)},handleCXZT:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.cxzt=e,this.CurrentPage=1,this.queryAllQuestions(1))},handleZXR:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.wtfl=e,this.CurrentPage=1,this.queryAllQuestions(1))},handleBQLY:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.bqly=e,this.CurrentPage=1,this.queryAllQuestions(1))},handleSQGB:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.sqgb=e,this.CurrentPage=1,this.queryAllQuestions(1))},handleWTFBQ:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.wtfbq=e,this.CurrentPage=1,this.queryAllQuestions(1))},handleGJZT:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.gjzt=e,this.CurrentPage=1,this.queryAllQuestions(1))},handleWTBQ:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.wtbq=e,this.CurrentPage=1,this.queryAllQuestions(1))},handleCPX:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.cpxbg=e,this.CurrentPage=1,this.queryAllQuestions(1))},handleCP:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.cpbg=e,this.CurrentPage=1,this.queryAllQuestions(1))},handleWTLB:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.wtlbbg=e,this.CurrentPage=1,this.queryAllQuestions(1))},handleDWLX:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.dwlx=e,this.CurrentPage=1,this.queryAllQuestions(1))},queryAllQuestions:function(t){var e=this;Object(s.t)({curPage:t,pageSize:this.pageSize,xmbh:"",cp:this.cpbg,cpx:this.cpxbg,zt:this.cxzt,sqgb:this.sqgb,keyword:this.keyword,dwlx:this.dwlx,wtlb:this.wtlbbg,wtbq:this.wtbq,starDay:this.starDay,endDay:this.endDay,isAnalyse:!0,wtfl:this.wtfl,bqly:this.bqly,wtfbq:this.wtfbq,wtgjzt:this.gjzt}).then(function(t){var a=t.data;"success"==a.state&&(null!=a.data.rows&&(e.questionList=a.data.rows),e.total=a.data.records)})}},watch:{},activated:function(){this.keyword=this.$route.params.dwmc,this.queryAllQuestions(1),this.baseUrl=window.baseurl},components:{pagination:i.a,twDialog:l.a,questionCard:o.a,gjjhcpl:c.default,gjjhssl:h.default}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"project-question"},[a("div",{staticClass:"project-question-query"},[a("div",[a("span",{staticClass:"query-title"},[a("span",{class:{"isshown-query":!0,"el-icon-arrow-up":!t.queryLJshow,"el-icon-arrow-down":t.queryLJshow},on:{click:t.handleQueryShow}}),t._v(" 高级查询")]),t._v(" "),a("el-input",{staticStyle:{width:"493px"},attrs:{size:"small",placeholder:"请输入问题提出人姓名/工号/手机号/标题/项目编号/项目名称/学校名称"},on:{change:t.searchQuestion},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),t._v("　\n      "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handlequeryQuestion}},[t._v("查询")])],1),t._v(" "),t.queryLJshow?a("div",{staticClass:"query-condition"},[a("div",[a("p",{staticClass:"query-title"},[t._v("提问时间:")]),t._v(" "),a("p",[a("el-date-picker",{attrs:{size:"mini",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:t.handleDatepick},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)]),t._v(" "),a("div",[a("p",{staticClass:"query-title"},[t._v("问题分类:")]),t._v(" "),a("p",{staticClass:"query-list",on:{click:t.handleZXR}},[a("span",{class:{"bg-active":""==t.wtfl},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.zzrList,function(e,i){return a("span",{key:i,class:{"bg-active":t.wtfl==e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]),t._v(" "),a("div",[a("p",{staticClass:"query-title"},[t._v("标签来源:")]),t._v(" "),a("p",{staticClass:"query-list",on:{click:t.handleBQLY}},[a("span",{class:{"bg-active":""==t.bqly},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.bqlyList,function(e,i){return a("span",{key:i,class:{"bg-active":t.bqly==e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]),t._v(" "),a("div",[a("p",{staticClass:"query-title"},[t._v("查询状态:")]),t._v(" "),a("p",{staticClass:"query-list",on:{click:t.handleCXZT}},[a("span",{class:{"bg-active":""==t.cxzt},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),a("span",{class:{"bg-active":"0"==t.cxzt},attrs:{"data-type":"0"}},[t._v("处理中")]),t._v(" "),a("span",{class:{"bg-active":"1"==t.cxzt},attrs:{"data-type":"1"}},[t._v("已关闭")])])]),t._v(" "),a("div",[a("p",{staticClass:"query-title"},[t._v("申请关闭:")]),t._v(" "),a("p",{staticClass:"query-list",on:{click:t.handleSQGB}},[a("span",{class:{"bg-active":""==t.sqgb},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),a("span",{class:{"bg-active":"1"==t.sqgb},attrs:{"data-type":"1"}},[t._v("是")]),t._v(" "),a("span",{class:{"bg-active":"0"==t.sqgb},attrs:{"data-type":"0"}},[t._v("否")])])]),t._v(" "),a("div",[a("p",{staticClass:"query-title"},[t._v("问题标签分类:")]),t._v(" "),a("p",{staticClass:"query-list",on:{click:t.handleWTFBQ}},[a("span",{class:{"bg-active":""==t.wtfbq},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.wtfbqlist,function(e,i){return a("span",{class:{"bg-active":t.wtfbq===e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]),t._v(" "),a("div",[a("p",{staticClass:"query-title"},[t._v("改进状态:")]),t._v(" "),a("p",{staticClass:"query-list",on:{click:t.handleGJZT}},[a("span",{class:{"bg-active":""==t.gjzt},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.wtgjztlist,function(e,i){return a("span",{class:{"bg-active":t.gjzt===e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]),t._v(" "),a("div",[a("p",{staticClass:"query-title"},[t._v("问题标签:")]),t._v(" "),a("p",{staticClass:"query-list",on:{click:t.handleWTBQ}},[a("span",{class:{"bg-active":""==t.wtbq},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.wtbqlist,function(e,i){return a("span",{class:{"bg-active":t.wtbq===e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])}),t._v(" "),a("span",{class:{"bg-active":"-1"==t.wtbq},attrs:{"data-type":"-1"}},[t._v("无")])],2)]),t._v(" "),a("div",[a("p",{staticClass:"query-title"},[t._v("产品线:")]),t._v(" "),a("p",{staticClass:"query-list",on:{click:t.handleCPX}},[a("span",{class:{"bg-active":""==t.cpxbg},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.cpline,function(e,i){return a("span",{class:{"bg-active":t.cpxbg===e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]),t._v(" "),a("div",[a("p",{staticClass:"query-title"},[t._v("产品:")]),t._v(" "),a("p",{staticClass:"query-list",on:{click:t.handleCP}},[a("span",{class:{"bg-active":""==t.cpbg},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.cplist,function(e,i){return a("span",{class:{"bg-active":t.cpbg==e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]),t._v(" "),a("div",[a("p",{staticClass:"query-title"},[t._v("问题类别:")]),t._v(" "),a("p",{staticClass:"query-list",on:{click:t.handleWTLB}},[a("span",{class:{"bg-active":""==t.wtlbbg},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.wtlb,function(e,i){return a("span",{class:{"bg-active":t.wtlbbg==e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]),t._v(" "),a("div",[a("p",{staticClass:"query-title"},[t._v("单位类型:")]),t._v(" "),a("p",{staticClass:"query-list",on:{click:t.handleDWLX}},[a("span",{class:{"bg-active":""==t.dwlx},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.dwlxList,function(e,i){return a("span",{class:{"bg-active":t.dwlx==e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)])]):t._e()]),t._v(" "),a("div",{staticStyle:{background:"#fff","margin-top":"10px","box-shadow":"0 2px 12px 0 rgba(0,0,0,.1)","border-radius":"4px",padding:"10px 0"}},[a("div",{staticStyle:{padding:"0 10px","text-align":"right"}},[a("el-button",{staticStyle:{"margin-top":"8px"},attrs:{size:"mini",type:"primary"},on:{click:t.handleExport}},[t._v("导出")])],1),t._v(" "),a("hr",{staticStyle:{"border-top":"1px solid #eee",margin:"8px 0 0 0 !important"}}),t._v(" "),a("questionCard",{attrs:{questionList:t.questionList,isShow:!1,wtbqShow:!0,bjscShow:!1,gjjhShow:t.gjjhShow,wtfbq:t.wtfbq},on:{editQuestion:t.editQuestion,deleteQuestion:t.deleteQuestion,handleQuestionDetail:t.handleQuestionDetail,handleImprovementPlan:t.handleImprovementPlan}}),t._v(" "),t.total>10?a("div",{staticStyle:{"margin-top":"10px","text-align":"right"}},[a("pagination",{attrs:{currentPage:t.CurrentPage,total:t.total,pageSize:t.pageSize},on:{handleCurrentChange:t.handleCurrentChange}})],1):t._e()],1),t._v(" "),a("twDialog",{attrs:{show:t.show,questionTitle:t.questionTitle,accreditShow:t.accreditShow,questionInfo:t.qusetionInfo},on:{"update:show":function(e){t.show=e},handleTWsuccess:t.handleTWsuccess}}),t._v(" "),a("el-dialog",{attrs:{title:"改进计划",visible:t.dialogTableVisible,width:"80vw"},on:{"update:visible":function(e){t.dialogTableVisible=e}}},["W05"==t.wtfbq||"W05"==this.wtfbqO?a("gjjhcpl",{attrs:{questionData:t.quesData,show:t.dialogTableVisible},on:{"update:show":function(e){t.dialogTableVisible=e}}}):t._e(),t._v(" "),"W03"==t.wtfbq||"W03"==this.wtfbqO?a("gjjhssl",{attrs:{questionData:t.quesData,show:t.dialogTableVisible},on:{"update:show":function(e){t.dialogTableVisible=e}}}):t._e()],1)],1)},staticRenderFns:[]};var p=a("VU/8")(u,d,!1,function(t){a("2sdr")},"data-v-f0b1ca3c",null);e.default=p.exports},FtTJ:function(t,e){},JTRj:function(t,e){},XOVc:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("P+gh"),s=a("DEz1"),n={data:function(){return{visible:this.show,title:"新建计划",zrrShow:!1,form:{wtbt:"",cpmc:"",fbrq:"",wtfx:"",xybjh:"",jhwcsj:"",zrrxm:"",zrrbh:""}}},methods:{handleClose:function(){this.visible=!1},handleCommit:function(){var t=this;this.valiDate()&&this.$post(this.API.addOrUpdateProductPlan,{wid:this.isEdit?this.questionData.wid:"",wtwid:this.questionData.wtwid?this.questionData.wtwid:this.questionData.wid,cpbh:this.questionData.cpbh,cpmc:this.questionData.cpmc,wtfx:this.form.wtfx,xybjh:this.form.xybjh,jhwcsj:this.form.jhwcsj,zrrbh:this.form.zrrbh,zrrxm:this.form.zrrxm,jira:this.form.jira}).then(function(e){"success"==e.state?(t.visible=!1,t.$alert(t.isEdit?"编辑成功":"新建成功","提示",{confirmButtonText:"确定",type:"success",callback:function(e){t.$emit("handleSavesuccess","")}})):t.$alert(e.msg,"提示",{confirmButtonText:"确定",type:"error"})})},handleChooseZrr:function(){this.zrrShow=!this.zrrShow},handleAddZrr:function(t){this.form.zrrbh=t.userid,this.form.zrrxm=t.username,this.zrrShow=!this.zrrShow},valiDate:function(){return this.form.wtfx?this.form.xybjh?this.form.jhwcsj?!!this.form.zrrbh||(this.$alert("请选择责任人","提示",{confirmButtonText:"确定",type:"warning"}),!1):(this.$alert("请选择计划完成日期","提示",{confirmButtonText:"确定",type:"warning"}),!1):(this.$alert("请输入下一步计划","提示",{confirmButtonText:"确定",type:"warning"}),!1):(this.$alert("请输入问题分析","提示",{confirmButtonText:"确定",type:"warning"}),!1)}},props:{show:{type:Boolean,default:!1},questionData:{type:Object,default:function(){return{}}},isEdit:{type:Boolean,default:!1}},watch:{show:function(t,e){this.visible=this.show,t?(this.form.cpmc=this.questionData.cpmc,this.form.fbrq=this.questionData.fbrq,this.isEdit?(this.wid=this.questionData.wid,this.form.wtbt=this.questionData.wtbt,this.form.wtfx=this.questionData.wtfx,this.form.xybjh=this.questionData.xybjh,this.form.jhwcsj=this.questionData.jhwcsj,this.form.zrrbh=this.questionData.zrrbh,this.form.zrrxm=this.questionData.zrrxm):(this.wid="",this.form.wtbt=this.questionData.bt)):(this.form.wtfx="",this.form.xybjh="",this.form.jhwcsj="",this.form.zrrxm="",this.form.zrrbh="")},isEdit:function(t,e){this.title=t?"编辑计划":"新建计划"}},components:{zrrDialog:s.a}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:t.title,width:"700px",top:"30px",visible:t.visible,"append-to-body":!0,"close-on-click-modal":!1,show:t.show},on:{"update:visible":function(e){t.visible=e},close:function(e){t.$emit("update:show",!1)}}},[a("div",{staticClass:"dialog-xjjh"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"110px",size:"mini",inline:!0}},[a("el-form-item",{attrs:{label:"问题标题",required:""}},[a("el-input",{staticStyle:{width:"550px"},attrs:{disabled:!0,placeholder:""},model:{value:t.form.wtbt,callback:function(e){t.$set(t.form,"wtbt",e)},expression:"form.wtbt"}})],1),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"产品",required:""}},[a("el-input",{staticStyle:{width:"213px"},attrs:{disabled:!0,placeholder:""},model:{value:t.form.cpmc,callback:function(e){t.$set(t.form,"cpmc",e)},expression:"form.cpmc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"提出日期",required:""}},[a("el-input",{staticStyle:{width:"213px"},attrs:{disabled:!0,placeholder:""},model:{value:t.form.fbrq,callback:function(e){t.$set(t.form,"fbrq",e)},expression:"form.fbrq"}})],1),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"问题分析",required:""}},[a("el-input",{staticStyle:{width:"550px"},attrs:{type:"textarea",placeholder:"请输入问题分析(1000字以内)"},model:{value:t.form.wtfx,callback:function(e){t.$set(t.form,"wtfx",e)},expression:"form.wtfx"}})],1),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"下一步计划",required:""}},[a("el-input",{staticStyle:{width:"550px"},attrs:{type:"textarea",placeholder:"请输入下一步计划(100字以内)"},model:{value:t.form.xybjh,callback:function(e){t.$set(t.form,"xybjh",e)},expression:"form.xybjh"}})],1),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"计划完成时间",required:""}},[a("el-date-picker",{staticStyle:{width:"213px"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.form.jhwcsj,callback:function(e){t.$set(t.form,"jhwcsj",e)},expression:"form.jhwcsj"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"责任人",required:""}},[a("el-input",{staticStyle:{width:"213px"},attrs:{placeholder:"请选择责任人"},on:{focus:t.handleChooseZrr},model:{value:t.form.zrrxm,callback:function(e){t.$set(t.form,"zrrxm",e)},expression:"form.zrrxm"}})],1),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"关联JIRA"}},[a("el-input",{staticStyle:{width:"550px"},attrs:{type:"textarea",placeholder:"请输入"},model:{value:t.form.jira,callback:function(e){t.$set(t.form,"jira",e)},expression:"form.jira"}})],1),a("br"),t._v(" "),a("el-form-item",{staticStyle:{float:"right"}},[a("div",[a("el-button",{attrs:{type:"primary"},on:{click:t.handleCommit}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:t.handleClose}},[t._v("取消")])],1)])],1)],1)]),t._v(" "),a("zrrDialog",{attrs:{show:t.zrrShow},on:{"update:show":function(e){t.zrrShow=e},handleAddZrr:t.handleAddZrr}})],1)},staticRenderFns:[]};var l=a("VU/8")(n,r,!1,function(t){a("FtTJ")},"data-v-17ebb317",null).exports,o=a("/m/2"),c={data:function(){return{xjjhShow:!1,cpfbShow:!1,isEdit:!1,tableData:[{cpmc:"产品",wtfx:"王小虎",xybjh:"上海市普陀区金沙江路 1518 弄",jhwcrq:"2018-08-08",zrrxm:"张三",jjbbh:"V1.0.3",fbrq:"2018-08-08",cjrq:"2018-08-08 12:00:00",cjrxm:"李四",nrjhwts:11},{cpmc:"产品",wtfx:"王小虎",xybjh:"上海市普陀区金沙江路 1518 弄",jhwcrq:"2018-08-08",zrrxm:"张三",jjbbh:"V1.0.3",fbrq:"2018-08-08",cjrq:"2018-08-08 12:00:00",cjrxm:"李四",nrjhwts:11}],multipleSelection:[],currentPage:1,pageSize:10,total:0,keyword:"",wtData:this.questionData}},props:{questionData:{type:Object,default:function(){return{}}},show:{type:Boolean,default:!1}},mounted:function(){this.pageProductPlan()},watch:{show:function(t,e){t&&(this.wtwid=this.questionData.wid,this.pageProductPlan())}},methods:{handleCehckwts:function(t){var e=this.$router.resolve({path:"/report-list/questionlist.html",query:{jhwid:t,jhlx:"1"}});window.open(e.href,"_blank")},handleNrjhOrTcjh:function(t,e){var a=this;this.$confirm("nrjh"==e?"是否将此问题纳入计划?":"确定要剔除 "+t.wtbt+" 问题的改进计划吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$post("nrjh"==e?a.API.addInPlan:a.API.removeFromPlan,{lx:1,wtwid:a.questionData.wid,wid:t.wid}).then(function(t){"success"==t.state?(a.$alert("nrjh"==e?"纳入成功":"剔除成功","提示",{confirmButtonText:"确定",type:"success"}),a.pageProductPlan()):a.$alert(t.msg,"提示",{confirmButtonText:"确定",type:"error"})})}).catch(function(){})},handleEdit:function(t){this.isEdit=!0,this.wtData=t,this.wtData.wtwid=this.questionData.wid,this.xjjhShow=!this.xjjhShow},handleDelect:function(t){var e=this;this.$confirm("是否确定将此计划删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$post(e.API.deleteProductPlan,{wid:t.wid}).then(function(t){"success"==t.state?(e.$alert("删除成功","提示",{confirmButtonText:"确定",type:"success"}),e.pageProductPlan()):e.$alert(t.msg,"提示",{confirmButtonText:"确定",type:"error"})})}).catch(function(){})},handleSavesuccess:function(){this.pageProductPlan()},handleSizeChange:function(t){this.pageSize=t,this.currentPage=1,this.pageProductPlan()},handleCurrentChange:function(t){this.currentPage=t,this.pageProductPlan()},handleSearchEnter:function(){this.currentPage=1,this.pageProductPlan()},handleSelectionChange:function(t){this.multipleSelection=t},handleXjjh:function(){this.isEdit=!1,this.wtData=this.questionData,this.xjjhShow=!this.xjjhShow},handlePLNrjh:function(){this.$confirm("是否将此问题纳入计划, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){}).catch(function(){})},handleRelease:function(){this.cpfbShow=!this.cpfbShow},pageProductPlan:function(){var t=this;this.$get(this.API.pageProductPlan,{curPage:this.currentPage,pageSize:this.pageSize,cpbh:this.questionData.cpbh,keyword:this.keyword,wtwid:this.questionData.wid}).then(function(e){"success"==e.state?(e.data.rows?t.tableData=e.data.rows:t.tableData=[],t.total=e.data.records):t.$alert(e.msg,"提示",{confirmButtonText:"确定",type:"error"})}).catch(function(t){})}},components:{tableLayout:i.a,xjjhDialog:l,cpfbDialog:o.a}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pannelPadding-10"},[a("div",{staticClass:"pannelPaddingBg-10"},[a("tableLayout",[a("section",{attrs:{slot:"top"},slot:"top"},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入产品版本号",size:"mini"},on:{change:t.handleSearchEnter}}),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleSearchEnter}},[t._v("查询")])],1),t._v(" "),a("section",{staticStyle:{"margin-top":"30px"},attrs:{slot:"bottom"},slot:"bottom"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleXjjh}},[t._v("新建计划")]),t._v(" "),a("div",{staticStyle:{margin:"10px 0"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"left",label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{staticStyle:{color:"red !important"},attrs:{type:"text",size:"mini"},on:{click:function(a){t.handleDelect(e.row)}}},[t._v("删除")]),t._v(" "),"0"==e.row.sfnr?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){t.handleNrjhOrTcjh(e.row,"nrjh")}}},[t._v("纳入计划")]):t._e(),t._v(" "),"1"==e.row.sfnr&&e.row.wtwid!=t.questionData.wid?a("el-button",{staticStyle:{color:"red !important"},attrs:{type:"text",size:"mini"},on:{click:function(a){t.handleNrjhOrTcjh(e.row,"tcjh")}}},[t._v("剔除计划")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"cpmc",label:"产品","min-width":"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"wtfx",label:"问题分析","min-width":"200","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"jira",label:"关联JIRA","min-width":"150","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"xybjh",label:"下一步计划","min-width":"200","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"jhwcsj",label:"计划完成日期",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"zrrxm",label:"责任人",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{prop:"jjbbh",label:"解决版本号",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fbsj",label:"发版日期",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cjsj",label:"创建日期",width:"155"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cjrxm",label:"创建人",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{label:"纳入计划问题数",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{attrs:{href:"javaScript:;;"},on:{click:function(a){t.handleCehckwts(e.row.wid)}}},[t._v(t._s(e.row.jhwtzs))])]}}])})],1)],1)],1)]),t._v(" "),a("div",{attrs:{"text-right":""}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,50],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("xjjh-dialog",{attrs:{show:t.xjjhShow,isEdit:t.isEdit,questionData:t.wtData},on:{"update:show":function(e){t.xjjhShow=e},handleSavesuccess:t.handleSavesuccess}}),t._v(" "),a("cpfb-dialog",{attrs:{show:t.cpfbShow},on:{"update:show":function(e){t.cpfbShow=e}}})],1)},staticRenderFns:[]};var u=a("VU/8")(c,h,!1,function(t){a("uplq")},"data-v-1525e173",null);e.default=u.exports},aCWX:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("P+gh"),s=a("DEz1"),n={data:function(){return{visible:this.show,title:"新建计划",zrrShow:!1,form:{cpmc:"",pxzt:"",pxxs:"",jhpxsj:"",fxrxm:"",fxrbh:""},pxxsList:[{value:"1",label:"线上直播"},{value:"2",label:"线下培训"},{value:"3",label:"线上加线下"}]}},methods:{handleClose:function(){this.visible=!1},handleCommit:function(){var t=this;this.validate()&&this.$post(this.API.addOrUpdateCapacityPlan,{wid:this.isEdit?this.questionData.wid:"",wtwid:this.questionData.wtwid?this.questionData.wtwid:this.questionData.wid,cpbh:this.questionData.cpbh,cpmc:this.questionData.cpmc,pxzt:this.form.pxzt,pxxs:this.form.pxxs,jhpxsj:this.form.jhpxsj,fxrbh:this.form.fxrbh,fxrxm:this.form.fxrxm}).then(function(e){"success"==e.state?(t.visible=!1,t.$alert(t.isEdit?"编辑成功":"新建成功","提示",{confirmButtonText:"确定",type:"success",callback:function(e){t.$emit("handleSavesuccess","")}})):t.$alert(e.msg,"提示",{confirmButtonText:"确定",type:"error"})})},handleChooseZrr:function(){this.zrrShow=!this.zrrShow},handleAddZrr:function(t){this.form.fxrbh=t.userid,this.form.fxrxm=t.username,this.zrrShow=!this.zrrShow},validate:function(){return this.form.pxxs?this.form.jhpxsj?!!this.form.fxrxm||(this.$alert("请输入分享人工号","提示",{confirmButtonText:"确定",type:"warning"}),!1):(this.$alert("请选择计划培训日期","提示",{confirmButtonText:"确定",type:"warning"}),!1):(this.$alert("请选择培训形式","提示",{confirmButtonText:"确定",type:"warning"}),!1)}},props:{questionData:{type:Object,default:function(){return{}}},show:{type:Boolean,default:!1},isEdit:{type:Boolean,default:!1}},watch:{show:function(t,e){this.visible=this.show,t?(this.form.cpmc=this.questionData.cpmc,this.isEdit&&(this.form.pxzt=this.questionData.pxzt,this.form.pxxs=this.questionData.pxxs,this.form.jhpxsj=this.questionData.jhpxsj,this.form.fxrxm=this.questionData.fxrxm,this.form.fxrbh=this.questionData.fxrbh)):(this.form.pxzt="",this.form.pxxs="",this.form.jhpxsj="",this.form.fxrxm=this.form.fxrbh="")},questionData:{handler:function(t,e){t.cpmc&&(this.form.cpmc=this.questionData.cpmc)},immediate:!0,deep:!0},isEdit:function(t,e){this.title=t?"编辑计划":"新建计划"}},components:{zrrDialog:s.a}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:t.title,width:"700px",top:"30px",visible:t.visible,"append-to-body":!0,"close-on-click-modal":!1,show:t.show},on:{"update:visible":function(e){t.visible=e},close:function(e){t.$emit("update:show",!1)}}},[a("div",{staticClass:"dialog-xjjh"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"110px",size:"mini",inline:!0}},[a("el-form-item",{attrs:{label:"产品",required:""}},[a("el-input",{staticStyle:{width:"550px"},attrs:{disabled:!0,placeholder:""},model:{value:t.form.cpmc,callback:function(e){t.$set(t.form,"cpmc",e)},expression:"form.cpmc"}})],1),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"培训主题",required:""}},[a("el-input",{staticStyle:{width:"550px"},attrs:{placeholder:""},model:{value:t.form.pxzt,callback:function(e){t.$set(t.form,"pxzt",e)},expression:"form.pxzt"}})],1),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"培训形式",required:""}},[a("el-select",{staticStyle:{width:"213px"},attrs:{placeholder:"请选择"},model:{value:t.form.pxxs,callback:function(e){t.$set(t.form,"pxxs",e)},expression:"form.pxxs"}},t._l(t.pxxsList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"计划培训日期",required:""}},[a("el-date-picker",{staticStyle:{width:"213px"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.form.jhpxsj,callback:function(e){t.$set(t.form,"jhpxsj",e)},expression:"form.jhpxsj"}})],1),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"分享人",required:""}},[a("el-input",{staticStyle:{width:"550px"},attrs:{placeholder:"请选择分享人"},on:{focus:t.handleChooseZrr},model:{value:t.form.fxrxm,callback:function(e){t.$set(t.form,"fxrxm",e)},expression:"form.fxrxm"}})],1),a("br"),t._v(" "),a("el-form-item",{staticStyle:{float:"right"}},[a("div",[a("el-button",{attrs:{type:"primary"},on:{click:t.handleCommit}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:t.handleClose}},[t._v("取消")])],1)])],1)],1)]),t._v(" "),a("zrrDialog",{attrs:{show:t.zrrShow},on:{"update:show":function(e){t.zrrShow=e},handleAddZrr:t.handleAddZrr}})],1)},staticRenderFns:[]};var l=a("VU/8")(n,r,!1,function(t){a("JTRj")},"data-v-09cb4e5f",null).exports,o=a("2r/n"),c={data:function(){return{xjjhShow:!1,sspxShow:!1,tableData:[],multipleSelection:[],currentPage:1,pageSize:10,total:0,keyword:"",wtData:this.questionData,isEdit:!1}},props:{questionData:{type:Object,default:function(){return{}}},show:{type:Boolean,default:!1}},mounted:function(){this.pageCapacityPlan()},watch:{show:function(t,e){t&&(this.pageCapacityPlan(),this.wtData=this.questionData)}},methods:{handleCehckCyry:function(t,e){var a=this.$router.resolve({path:"/stafflist",query:{nljhwid:t.wid,type:e,cpbh:t.cpbh}});window.open(a.href,"_blank")},handleCehckwts:function(t){var e=this.$router.resolve({path:"/report-list/questionlist.html",query:{jhwid:t,jhlx:"2"}});window.open(e.href,"_blank")},handleNrjhOrTcjh:function(t,e){var a=this;this.$confirm("nrjh"==e?"是否将此问题纳入计划?":"确定要剔除 "+this.questionData.bt+" 问题的改进计划吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$post("nrjh"==e?a.API.addInPlan:a.API.removeFromPlan,{lx:2,wtwid:a.questionData.wid,wid:t.wid}).then(function(t){"success"==t.state?(a.$alert("nrjh"==e?"纳入成功":"剔除成功","提示",{confirmButtonText:"确定",type:"success"}),a.pageCapacityPlan()):a.$alert(t.msg,"提示",{confirmButtonText:"确定",type:"error"})})}).catch(function(){})},handleEdit:function(t){this.isEdit=!0,this.wtData=t,this.wtData.wtwid=this.questionData.wid,this.wtData.wtbt=this.questionData.bt,this.xjjhShow=!this.xjjhShow},handleDelete:function(t){var e=this;this.$confirm("是否确定将此计划删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$post(e.API.deleteCapacityPlan,{wid:t.wid}).then(function(t){"success"==t.state?(e.$alert("删除成功","提示",{confirmButtonText:"确定",type:"success"}),e.pageCapacityPlan()):e.$alert(t.msg,"提示",{confirmButtonText:"确定",type:"error"})})}).catch(function(){})},handleSavesuccess:function(){this.pageCapacityPlan()},handleSizeChange:function(t){this.pageSize=t,this.currentPage=1,this.pageCapacityPlan()},handleCurrentChange:function(t){this.currentPage=t,this.pageCapacityPlan()},handleSearchEnter:function(t){this.keyword=t,this.currentPage=1,this.pageCapacityPlan()},handleXjjh:function(){this.isEdit=!1,this.xjjhShow=!this.xjjhShow},handleTrain:function(){this.sspxShow=!this.sspxShow},handleNrjh:function(){this.$confirm("是否将此问题纳入计划, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){}).catch(function(){})},pageCapacityPlan:function(){var t=this;this.$get(this.API.pageCapacityPlan,{curPage:this.currentPage,pageSize:this.pageSize,cpbh:"",keyword:this.keyword,wtwid:this.questionData.wid}).then(function(e){"success"==e.state?(e.data.rows?t.tableData=e.data.rows:t.tableData=[],t.total=e.data.records):t.$alert(e.msg,"提示",{confirmButtonText:"确定",type:"error"})})}},components:{tableLayout:i.a,xjjhDialog:l,sspxDialog:o.a}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pannelPadding-10"},[a("div",{staticClass:"pannelPaddingBg-10"},[a("tableLayout",[a("section",{attrs:{slot:"top"},slot:"top"},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入产品版本号",size:"mini"},on:{input:t.handleSearchEnter}}),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("查询")])],1),t._v(" "),a("section",{staticStyle:{"margin-top":"30px"},attrs:{slot:"bottom"},slot:"bottom"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleXjjh}},[t._v("新建计划")]),t._v(" "),a("div",{staticStyle:{margin:"10px 0"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{fixed:"left",label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{staticStyle:{color:"red !important"},attrs:{type:"text",size:"mini"},on:{click:function(a){t.handleDelete(e.row)}}},[t._v("删除")]),t._v(" "),"0"==e.row.sfnr?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){t.handleNrjhOrTcjh(e.row,"nrjh")}}},[t._v("纳入计划")]):t._e(),t._v(" "),"1"==e.row.sfnr&&e.row.wtwid!=t.questionData.wid?a("el-button",{staticStyle:{color:"red !important"},attrs:{type:"text",size:"mini"},on:{click:function(a){t.handleNrjhOrTcjh(e.row,"tcjh")}}},[t._v("剔除计划")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"cpmc",label:"产品","min-width":"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"pxzt",label:"培训主题","min-width":"200","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"培训形式","min-width":"200","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1==e.row.pxxs?"线上直播":2==e.row.pxxs?"线下培训":"线上加线下"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"jhpxsj",label:"计划日期",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fxrxm",label:"分享人",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{label:"推荐参与人数",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{attrs:{href:"javaScript:;;"},on:{click:function(a){t.handleCehckCyry(e.row,"2")}}},[t._v(t._s(e.row.tjrs))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"参与人员",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{attrs:{href:"javaScript:;;"},on:{click:function(a){t.handleCehckCyry(e.row,"1")}}},[t._v(t._s(e.row.cyrs))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"cjsj",label:"创建日期",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cjrxm",label:"创建人",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{label:"纳入计划问题数",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{attrs:{href:"javaScript:;;"},on:{click:function(a){t.handleCehckwts(e.row.wid)}}},[t._v(t._s(e.row.jhwtzs))])]}}])})],1)],1)],1)]),t._v(" "),a("div",{attrs:{"text-right":""}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,50],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("xjjh-dialog",{attrs:{show:t.xjjhShow,isEdit:t.isEdit,questionData:t.wtData},on:{"update:show":function(e){t.xjjhShow=e},handleSavesuccess:t.handleSavesuccess}}),t._v(" "),a("sspx-dialog",{attrs:{show:t.sspxShow},on:{"update:show":function(e){t.sspxShow=e}}})],1)},staticRenderFns:[]};var u=a("VU/8")(c,h,!1,function(t){a("zPAj")},"data-v-bbbe3c36",null);e.default=u.exports},uplq:function(t,e){},zPAj:function(t,e){}});
//# sourceMappingURL=15.42c01f94719d02daa692.js.map