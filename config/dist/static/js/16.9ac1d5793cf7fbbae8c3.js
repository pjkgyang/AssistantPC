webpackJsonp([16],{Aqrp:function(t,e){},DwO8:function(t,e){},ItkK:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("3cXf"),l=a.n(s),r=a("TSLv"),i=a("oFuF"),o=a("XYo/"),n=a("TNFc"),_={data:function(){return{dialogTableVisible:!1,show:!1,tbly:"",xmbh:"",fbData:"",htjbxx:{},htnrData:[],tbfyData:[],istb:"",tbzt:"",fbxxData:{},fbnrData:[],fbcpData:[],tbje:null,zbxx:"",userData:[],ywyData:[{ssje:0,ekje:0,kbje:0,zrrbh:""},{ssje:0,ekje:0,kbje:0,zrrbh:""}],ssfyTotal:0,ywxArr:[],ekfyTotal:0,kbfyTotal:0,ssfyTotalkm:0,ekfyTotalkm:0,kbfyTotalkm:0,fileList:[]}},mounted:function(){var t=this;i.a.$on("hoshRouter",function(e){t.$router.push({name:"DataTab"})})},methods:{handleAddUser:function(){this.show=!0},addUserSuccess:function(t){var e=this,a=!1;if(this.userData.length){if(this.userData.forEach(function(s){s.usercode==t.usercode&&(a=!0,e.$message({message:"该用户已添加~",type:"warning"}))}),a)return;this.userData.push(t)}else this.userData.push(t)},hanldeDelete:function(t){var e=this;this.ywyData.forEach(function(a,s,l){a.zrrbh==e.userData[t].usercode&&(e.$set(e.ywyData[s],"zrrbh",""),e.$set(e.ywyData[s],"zrrxm",""),e.ssfyTotalkm=e.ssfyTotalkm-e.ywyData[s].ssfy,e.ekfyTotalkm=e.ekfyTotalkm-e.ywyData[s].ekfy,e.kbfyTotalkm=e.kbfyTotalkm-e.ywyData[s].kbfy,e.$set(e.ywyData[s],"ssfy",0),e.$set(e.ywyData[s],"ekfy",0),e.$set(e.ywyData[s],"kbfy",0))}),this.userData.splice(t,1)},handleUploadFile:function(t){this.fileList=t},handleToubiao:function(){var t=this,e=[];Object(r.c)({fbbh:this.$route.query.fbbh}).then(function(a){var s=a.data;"success"==s.state&&(t.ywyData=s.data.htnrfy,s.data.tbxx&&(t.ssfyTotalkm=s.data.tbxx.ssfy,t.ekfyTotalkm=s.data.tbxx.ekfy,t.kbfyTotalkm=s.data.tbxx.kbfy,t.tbly=s.data.tbxx.tbly),s.data.tdfy&&(s.data.tdfy.forEach(function(t,a,s){e.push({username:t.zrrxm,usercode:t.zrrbh,ywx:t.ywymc,ssfy:t.ssfy,ekfy:t.ekfy,kbfy:t.kbfy})}),t.userData=e))}),this.dialogTableVisible=!this.dialogTableVisible},handleSeleteUser:function(t){var e=this;this.ywxArr=[],this.userData.forEach(function(a,s,l){a.usercode==t&&(e.ywyData.forEach(function(s,l,r){t==s.zrrbh&&(e.$set(e.ywyData[l],"zrrxm",a.username),e.ywxArr.includes(s.ywymc)||e.ywxArr.push(s.ywymc))}),e.$set(e.userData[s],"ywx",e.ywxArr.join(",")))})},handleChangefy:function(t,e,a){var s=this;if(this.ywyData[t].zrrbh)switch(e){case"ss":this.ssfyTotal=0,this.ssfyTotalkm=0,this.ywyData.forEach(function(t){t.zrrbh==a&&(s.ssfyTotal+=Number(t.ssfy))}),this.userData.forEach(function(t,e,l){t.usercode==a&&s.$set(s.userData[e],"ssfy",s.ssfyTotal),s.ssfyTotalkm+=s.userData[e].ssfy?s.userData[e].ssfy:0});break;case"ek":this.ekfyTotal=0,this.ekfyTotalkm=0,this.ywyData.forEach(function(t){t.zrrbh==a&&(s.ekfyTotal+=Number(t.ekfy))}),this.userData.forEach(function(t,e,l){t.usercode==a&&s.$set(s.userData[e],"ekfy",s.ekfyTotal),s.ekfyTotalkm+=s.userData[e].ekfy?s.userData[e].ekfy:0});break;case"kb":this.kbfyTotal=0,this.kbfyTotalkm=0,this.ywyData.forEach(function(t){t.zrrbh==a&&(s.kbfyTotal+=Number(t.kbfy))}),this.userData.forEach(function(t,e,l){t.usercode==a&&s.$set(s.userData[e],"kbfy",s.kbfyTotal),s.kbfyTotalkm+=s.userData[e].kbfy?s.userData[e].kbfy:0})}else this.$alert("请先选择责任人"," 提示",{type:"warning",confirmButtonText:"确定"})},handleCommit:function(){var t=this,e=[],a=!1;this.ywyData.forEach(function(t){t.zrrbh||(a=!0),e.push({htnrwid:t.htnrwid,zrrbh:t.zrrbh,zrrxm:t.zrrxm,ssfy:t.ssfy,ekfy:t.ekfy,kbfy:t.kbfy})}),a?this.$message({message:"请先选择所属责任人~",type:"warning"}):this.$post(this.API.saveTbxx,{fbbh:this.$route.query.fbbh,tbly:this.tbly,fjwid:this.fileList.join(","),ssfy:this.ssfyTotalkm,ekfy:this.ekfyTotalkm,kbfy:this.kbfyTotalkm,tbtdlist:l()(e)}).then(function(e){"success"==e.state?(t.$message({message:"投标成功",type:"success"}),t.dialogTableVisible=!t.dialogTableVisible,t.istb=!0,t.tbzt=!0):t.$message({message:e.msg,type:"error"})})}},activated:function(){var t=this;Object(r.b)({xmbh:this.$route.query.xmbh,fbbh:this.$route.query.fbbh}).then(function(e){var a=e.data;"success"==a.state?(t.htjbxx=a.data.lxxx,t.htnrData=a.data.lxxx_htnr,t.fbxxData=a.data.fbxx,t.fbnrData=a.data.fbnr?a.data.fbnr:[],t.istb=a.data.istb,t.tbzt=a.data.tbzt):t.$message({message:a.msg,type:"error"})})},components:{userDialog:o.a,uploadComponent:n.a}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"fbdetail_container"},[a("div",{staticClass:"fb_name"},[a("div",[a("p",{staticClass:"project__name"},[t._v("\n\t\t\t\t\t"+t._s(t.$route.query.xmbh)+" "+t._s(t.$route.query.fbmc)+"\n\t\t\t\t\t"),a("el-tag",{attrs:{size:"mini",type:t.tbzt?"success":"danger"}},[t._v(t._s(t.tbzt?"投标中":"招标结束"))])],1),t._v(" "),a("p",{staticClass:"project__label"},[t._v("￥"+t._s(t.fbxxData.zfy))])]),t._v(" "),a("div",{staticClass:"project__extra"},[a("b",[t._v("已有 "+t._s(t.$route.query.r)+" 人投标")]),t._v(" "),a("p",[t._v("招标截止 "+t._s(t.fbxxData.zbjzrq))]),t._v(" "),!t.istb&&t.tbzt?a("a",{attrs:{href:"javaScript:;;"},on:{click:t.handleToubiao}},[t._v("我要投标")]):t._e(),t._v(" "),t.istb&&t.tbzt?a("el-tag",{attrs:{type:"success"}},[t._v("已投标")]):t._e(),t._v(" "),t.istb&&t.tbzt?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handleToubiao}},[t._v("编辑投标")]):t._e()],1)]),t._v(" "),a("div",{staticClass:"fb_info"},[a("div",[a("h4",[t._v("合同内容")]),t._v(" "),a("div",[a("h6",[t._v("合同基本信息")]),t._v(" "),a("table",[a("tr",[a("th",[t._v("项目编号")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.xmbh))]),t._v(" "),a("th",[t._v("项目名称")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.htjbxx.xmmc))])]),t._v(" "),a("tr",[a("th",[t._v("合同编号")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.htbh))]),t._v(" "),a("th",[t._v("项目类别")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.xmlbmc))]),t._v(" "),a("th",[t._v("项目状态")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.xmxz))])]),t._v(" "),a("tr",[a("th",[t._v("合同金额（元）")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.htje?t.htjbxx.htje:0))]),t._v(" "),a("th",[t._v("合同毛收入（元）")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.htmsr?t.htjbxx.htmsr:0))]),t._v(" "),a("th",[t._v("到款率（%）")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.dkl?t.htjbxx.dkl:0))])]),t._v(" "),a("tr",[a("th",[t._v("合同性质")]),t._v(" "),a("td",[t._v(t._s("A"==t.htjbxx.sfzt?"正式":"B"==t.htjbxx.sfzt?"内部":"在谈"))]),t._v(" "),a("th",[t._v("是否购销")]),t._v(" "),a("td",[t._v(t._s("0"==t.htjbxx.sfgx?"否":"是"))]),t._v(" "),a("th",[t._v("财年")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.cn))])]),t._v(" "),a("tr",[a("th",[t._v("项目经理")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.xmjl))]),t._v(" "),a("th",[t._v("客户经理")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.khjl))]),t._v(" "),a("th",[t._v("学校")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.xx))])]),t._v(" "),a("tr",[a("th",[t._v("甲方")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.yh))]),t._v(" "),a("th",[t._v("签署方")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.qsfmc))]),t._v(" "),a("th",[t._v("签署日期")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.qssj))])]),t._v(" "),a("tr",[a("th",[t._v("生效日期")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.sxrq))]),t._v(" "),a("th",[t._v("立项日期")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.lxrq))]),t._v(" "),a("th",[t._v("启动日期")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.qdrq))])]),t._v(" "),a("tr",[a("th",[t._v("承诺验收日期")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.cnysrq))]),t._v(" "),a("th",[t._v("整体验收报告日期")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.ztysbgsj))]),t._v(" "),a("th",[t._v("整体验收结束日期")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.ztysjssj))])]),t._v(" "),a("tr",[a("th",[t._v("服务开始日期")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.fwksrq))]),t._v(" "),a("th",[t._v("服务年限（月）")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.fwqx))]),t._v(" "),a("th",[t._v("过保日期")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.gbsj))])]),t._v(" "),a("tr",[a("th",[t._v("工程区域")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.gcqy))]),t._v(" "),a("th",[t._v("工程战队")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.gczd))]),t._v(" "),a("th",[t._v("是否延长售后")]),t._v(" "),a("td",[t._v(t._s(1==t.htjbxx.gcfwzt?"是":"否"))])]),t._v(" "),a("tr",[a("th",[t._v("延长截止日期")]),t._v(" "),a("td",[t._v(t._s(t.htjbxx.ycfwqx))]),t._v(" "),a("th",[t._v("延长说明")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.htjbxx.gcfwztsm))])])])]),t._v(" "),a("div",[a("h6",[t._v("合同内容")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.htnrData,border:"","max-height":"400"}},[a("el-table-column",{attrs:{prop:"ywx",label:"业务线","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"app",label:"合同内容","show-overflow-tooltip":"","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"zb",label:"占比(%)",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sm",label:"说明","min-width":"150","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"ejcpmc",label:"产品归属","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ssry",label:"实施人月",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"kfry",label:"二开人月",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"kfry",label:"项目类别",width:"120"}})],1)],1)]),t._v(" "),a("div",[a("div",[a("h4",[t._v("分包信息")]),t._v(" "),a("div",[a("h6",[t._v("分包基本信息")]),t._v(" "),a("table",[a("tr",[a("th",[t._v("合同编号")]),t._v(" "),a("td",[t._v(t._s(t.fbxxData.htbh))]),t._v(" "),a("th",[t._v("分包名称")]),t._v(" "),a("td",[t._v(t._s(t.fbxxData.fbmc))]),t._v(" "),a("th",[t._v("分包人姓名")]),t._v(" "),a("td",[t._v(t._s(t.fbxxData.fbrxm))])]),t._v(" "),a("tr",[a("th",[t._v("分包日期")]),t._v(" "),a("td",[t._v(t._s(t.fbxxData.fbrq))]),t._v(" "),a("th",[t._v("分包性质")]),t._v(" "),a("td",[t._v(t._s("01"==t.fbxxData.fbxz?"在建":"02"==t.fbxxData.fbxz?"售后服务":"过保"))]),t._v(" "),a("th",[t._v("自助打印")]),t._v(" "),a("td",[t._v(t._s(t.fbxxData.zzdy))])]),t._v(" "),a("tr",[a("th",[t._v("计划开始日期")]),t._v(" "),a("td",[t._v(t._s(t.fbxxData.jhksrq))]),t._v(" "),a("th",[t._v("计划结束日期")]),t._v(" "),a("td",[t._v(t._s(t.fbxxData.jhjsrq))]),t._v(" "),a("th",[t._v("招标截止日期")]),t._v(" "),a("td",[t._v(t._s(t.fbxxData.zbjzrq))])]),t._v(" "),a("tr",[a("th",[t._v("实施费用 (元)")]),t._v(" "),a("td",[t._v(t._s(t.fbxxData.ssfy))]),t._v(" "),a("th",[t._v("二开费用 (元)")]),t._v(" "),a("td",[t._v(t._s(t.fbxxData.ekfy))]),t._v(" "),a("th",[t._v("可变费用 (元)")]),t._v(" "),a("td",[t._v(t._s(t.fbxxData.kbfy))])]),t._v(" "),a("tr",[a("th",[t._v("分包说明")]),t._v(" "),a("td",{attrs:{colspan:"5"}},[t._v(t._s(t.fbxxData.fbsm))])]),t._v(" "),a("tr",[a("th",[t._v("审核人编号")]),t._v(" "),a("td",[t._v(t._s(t.fbxxData.shrbh))]),t._v(" "),a("th",[t._v("审核人姓名")]),t._v(" "),a("td",[t._v(t._s(t.fbxxData.shrmc))]),t._v(" "),a("th",[t._v("审核日期")]),t._v(" "),a("td",[t._v(t._s(t.fbxxData.shrq))])]),t._v(" "),a("tr",[a("th",[t._v("审核意见")]),t._v(" "),a("td",{attrs:{colspan:"5"}},[t._v(t._s(t.fbxxData.shyj?t.fbxxData.shyj:"无"))])])])]),t._v(" "),a("div",[a("h6",[t._v("分包内容")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.fbnrData,border:""}},[a("el-table-column",{attrs:{prop:"ywymc",label:"业务域","min-width":"200","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"cpmc",label:"合同内容",width:"160","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"zb",label:"占比(%)",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"htsm",label:"说明",width:"160","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"xmlb",label:"项目类别",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"htssry",label:"实施人月(合同)","min-width":"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ssckbz",label:"实施参考标准","min-width":"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fbssry",label:"实施人月(分包)","min-width":"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"htekry",label:"二开人月(合同)","min-width":"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fbekry",label:"二开人月(分包)","min-width":"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fbsm",label:"说明","min-width":"160"}})],1)],1)])])]),t._v(" "),a("el-dialog",{attrs:{title:"我要投标",visible:t.dialogTableVisible,width:"1000px","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("div",{staticStyle:{padding:"0 20px"}},[a("div",{staticStyle:{margin:"10px 0",position:"relative"}},[a("span",{staticClass:"filter-weight"},[t._v("投标说明：")]),t._v(" "),a("el-input",{attrs:{type:"textarea",maxlength:"200",resize:"none",rows:"3"},model:{value:t.tbly,callback:function(e){t.tbly=e},expression:"tbly"}}),t._v(" "),a("span",{staticStyle:{position:"absolute",bottom:"0",right:"10px","font-size":"12px"}},[a("span",{class:{"max-length":t.tbly.length>=200}},[t._v("( "+t._s(t.tbly.length))]),t._v("\n\t\t\t\t\t\t/ 200 )\n\t\t\t\t\t")])],1),t._v(" "),a("table",{staticClass:"tb-table tdfp-table",attrs:{border:"",width:"100%"}},[a("tr",[a("th",[t._v("科目名称")]),t._v(" "),a("th",[t._v("总金额（元）")])]),t._v(" "),a("tr",[a("td",[t._v("实施费用")]),t._v(" "),a("td",[t._v(t._s(t.ssfyTotalkm))])]),t._v(" "),a("tr",[a("td",[t._v("二开费用")]),t._v(" "),a("td",[t._v(t._s(t.ekfyTotalkm))])]),t._v(" "),a("tr",[a("td",[t._v("可变费用")]),t._v(" "),a("td",[t._v(t._s(t.kbfyTotalkm))])])]),t._v(" "),a("br"),t._v(" "),a("div",[a("span",{staticClass:"filter-weight"},[t._v("创建团队：")]),t._v(" "),a("div",{staticStyle:{margin:"10px 0"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handleAddUser}},[t._v("添加成员")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.userData,border:""}},[a("el-table-column",{attrs:{fixed:"left",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){t.hanldeDelete(e.$index)}}},[t._v("删除")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"usercode",label:"工号",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"username",label:"姓名",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ywx",label:"负责业务线"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ssfy",label:"分配实施金额"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ekfy",label:"分配二开金额"}}),t._v(" "),a("el-table-column",{attrs:{prop:"kbfy",label:"分配可变金额"}})],1)],1),t._v(" "),a("div",[a("span",{staticClass:"filter-weight",staticStyle:{margin:"10px 0"}},[t._v("团队分配：")]),t._v(" "),a("table",{staticClass:"tb-table tdfp-table",attrs:{width:"100%"}},[a("tr",[a("th",[t._v("业务域")]),t._v(" "),a("th",[t._v("合同内容")]),t._v(" "),a("th",[t._v("占比")]),t._v(" "),a("th",[t._v("说明")]),t._v(" "),a("th",[t._v("项目类别")]),t._v(" "),a("th",[t._v("责任人")]),t._v(" "),a("th",[t._v("实施金额")]),t._v(" "),a("th",[t._v("二开金额")]),t._v(" "),a("th",[t._v("可变金额")])]),t._v(" "),t._l(t.ywyData,function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.ywymc))]),t._v(" "),a("td",[t._v(t._s(e.cpmc))]),t._v(" "),a("td",[t._v(t._s(e.zb))]),t._v(" "),a("td",[t._v(t._s(e.htsm))]),t._v(" "),a("td",[t._v(t._s(e.xmlb))]),t._v(" "),a("td",{staticStyle:{position:"relative"},attrs:{width:"100px"}},[a("el-select",{staticStyle:{border:"none"},attrs:{size:"mini",placeholder:"请选择"},on:{change:t.handleSeleteUser},model:{value:e.zrrbh,callback:function(a){t.$set(e,"zrrbh",a)},expression:"item.zrrbh"}},t._l(t.userData,function(t,e){return a("el-option",{key:e,attrs:{label:t.username,value:t.usercode}})}))],1),t._v(" "),a("td",{attrs:{width:"80px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ssfy,expression:"item.ssfy"}],attrs:{type:"number"},domProps:{value:e.ssfy},on:{input:[function(a){a.target.composing||t.$set(e,"ssfy",a.target.value)},function(a){t.handleChangefy(s,"ss",e.zrrbh)}]}})]),t._v(" "),a("td",{attrs:{width:"80px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ekfy,expression:"item.ekfy"}],attrs:{type:"number"},domProps:{value:e.ekfy},on:{input:[function(a){a.target.composing||t.$set(e,"ekfy",a.target.value)},function(a){t.handleChangefy(s,"ek",e.zrrbh)}]}})]),t._v(" "),a("td",{attrs:{width:"80px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.kbfy,expression:"item.kbfy"}],attrs:{type:"number"},domProps:{value:e.kbfy},on:{input:[function(a){a.target.composing||t.$set(e,"kbfy",a.target.value)},function(a){t.handleChangefy(s,"kb",e.zrrbh)}]}})])])})],2),t._v(" "),a("br"),t._v(" "),a("div",[a("span",{staticClass:"filter-weight",staticStyle:{margin:"10px 0"}},[t._v("项目文件：")]),t._v(" "),a("uploadComponent",{on:{handleUploadFile:t.handleUploadFile}})],1)])]),t._v(" "),a("div",{staticStyle:{margin:"10px 0","text-align":"right",padding:"10px 20px"}},[a("button",{staticClass:"tbcommit",on:{click:t.handleCommit}},[t._v("提交")])])])],1),t._v(" "),a("userDialog",{attrs:{show:t.show,isdept:!1},on:{"update:show":function(e){t.show=e},addUserSuccess:t.addUserSuccess}})],1)},staticRenderFns:[]};var h=a("Z0/y")(_,v,!1,function(t){a("Aqrp")},"data-v-e1e90b2c",null);e.default=h.exports},TNFc:function(t,e,a){"use strict";var s=a("aozt"),l=a.n(s),r=(a("DEjr"),{data:function(){return{upload_url:"123",uploadForm:new FormData,fileList:[],files:[],fileName:null,uploadAction:"123"}},methods:{handleRemove:function(t){this.files.splice(t,1),this.fileList.splice(t,1),this.$emit("handleUploadFile",this.files)},beforeUpload:function(t){var e=this;return this.uploadForm=new FormData,this.fileList.push(t),this.uploadForm.append("fileUpload",t),l.a.post(window.baseurl+"attachment/uploadAttach.do",this.uploadForm,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){"success"==t.data.state&&(e.files.push(t.data.data),e.$emit("handleUploadFile",e.files))}),!0},handleChange:function(t,e){}},components:{}}),i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"upload_file"},[a("div",{attrs:{flex:""}},[a("div",[a("el-upload",{ref:"uploadfile",staticClass:"upload-demo",attrs:{action:t.upload_url,"before-upload":t.beforeUpload,"on-change":t.handleChange,multiple:""}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[t._v("上传附件")])],1),t._v(" "),t._l(t.fileList,function(e,s){return t.fileList.length?a("p",{attrs:{flex:"",colcenter:"",spacebetween:""}},[a("span",[t._v(t._s(e.name))]),a("i",{staticClass:"el-icon-close",on:{click:function(e){t.handleRemove(s)}}})]):t._e()})],2)])])},staticRenderFns:[]};var o=a("Z0/y")(r,i,!1,function(t){a("hMbm")},"data-v-f2a1c56a",null);e.a=o.exports},"XYo/":function(t,e,a){"use strict";var s=a("P+gh"),l=a("YkBq"),r={data:function(){return{visible:this.show,keyword:"",currentPage:1,pageSize:15,total:200,tableData:[],userDatas:[],inx:""}},methods:{handleCurrentChange:function(t){this.currentPage=t,this.getUsers()},handleSizeChange:function(t){this.pageSize=t,this.currentPage=1,this.getUsers()},handleSearchUser:function(){this.getUsers()},handleAdd:function(t,e){var a=this;this.isdept?this.$post(this.API.saveZdcy,{wid:"",cyid:e.usercode,cyxm:e.username,qyzdwid:this.qyzdwid}).then(function(e){"success"==e.state&&a.$alert("添加成功","提示",{confirmButtonText:"确定",type:"success",callback:function(e){a.userDatas[t].ytj=0,a.$set(a.tableData,t,a.userDatas[t]),a.$emit("addUserSuccess","")}})}):(this.userDatas[t].ytj=0,this.$set(this.tableData,t,this.userDatas[t]),this.$emit("addUserSuccess",e))},getUsers:function(){var t=this;Object(l.j)({curPage:this.currentPage,pageSize:this.pageSize,unitType:0,keyword:this.keyword,dept:this.isdept?"01AM":""}).then(function(e){var a=e.data;"success"==a.state&&(a.data&&a.data.rows?(t.total=a.data.records,t.tableData=a.data.rows,t.tableData.forEach(function(t){t.ytj=1}),t.userDatas=t.tableData):(t.total=0,t.tableData=[]))})}},props:{show:{type:Boolean,default:!1},qyzdwid:{type:String,default:""},isdept:{type:Boolean,default:!0}},watch:{show:function(t,e){this.visible=this.show,t&&this.getUsers()}},components:{tableLayout:s.a}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:"人员列表",width:"1000px",visible:t.visible,"append-to-body":!0,"close-on-click-modal":!1,show:t.show},on:{"update:visible":function(e){t.visible=e},close:function(e){t.$emit("update:show",!1)}}},[a("tableLayout",{staticStyle:{padding:"0 10px"}},[a("section",{attrs:{slot:"top"},slot:"top"},[a("el-input",{attrs:{size:"mini",placeholder:"请搜索人员姓名/工号/部门","suffix-icon":"el-icon-search"},on:{change:t.handleSearchUser},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),t._v(" "),a("section",{attrs:{slot:"bottom"},slot:"bottom"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"max-height":580,border:""}},[a("el-table-column",{attrs:{prop:"username",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"usercode",label:"工号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"dept",label:"部门"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",disabled:0==e.row.ytj},on:{click:function(a){t.handleAdd(e.$index,e.row)}}},[t._v(t._s(e.row.ytj?"添加":"已添加"))])]}}])})],1)],1)]),t._v(" "),a("div",{staticClass:"pd-10",attrs:{"text-right":""}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[15,30,50,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)},staticRenderFns:[]};var o=a("Z0/y")(r,i,!1,function(t){a("DwO8")},"data-v-3d2116c8",null);e.a=o.exports},hMbm:function(t,e){}});
//# sourceMappingURL=16.9ac1d5793cf7fbbae8c3.js.map