webpackJsonp([13],{"+Qfx":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("3fu1"),i=s("9A7R"),a=s("IfOk"),o={data:function(){return{gxrShow:!1,wtInfo:{},index:"",questionList:[],curPage:1,pageSize:10,CurrentPage:1,total:null,Data:{},queryId:"",isJZuser:""}},props:{},mounted:function(){this.isJZuser=sessionStorage.getItem("isJZuser"),this.queryId=this.$route.params.id,this.getReportQuestion(1),document.title="问题报表-问题列表"},methods:{handleReject:function(t,e){var s=this;this.$confirm("确定驳回该申请, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.a)({wid:"",zbwid:t.wid}).then(function(t){var n=t.data;"success"==n.state?s.$alert("已成功驳回！","提示",{confirmButtonText:"确定",type:"success",callback:function(t){s.questionList[e].sqgbCount=0}}):s.$alert(n.msg,"提示",{confirmButtonText:"确定",type:"error"})})}).catch(function(){})},handleClose:function(t,e){this.wtInfo=t,this.index=e,this.gxrShow=!this.gxrShow},closeQuestion:function(){this.gxrShow=!this.gxrShow,this.questionList[this.index].fbzt=1,this.questionList[this.index].sqgbCount=0},getReportQuestion:function(t){this.Data=this.$route.query,this.Data.curPage=t,this.Data.pageSize=this.pageSize,this.queryReportQuestionList(this.Data)},queryReportQuestionList:function(t){var e=this;this.$get("questionPflist"==this.queryId?this.API.WtReportOrderStarLst:this.API.queryReportQuestionLst,t).then(function(t){"success"==t.state?(null!=t.data.rows&&(e.questionList=t.data.rows),e.total=t.data.records):e.$alert(t.msg,"提示",{confirmButtonText:"确定",type:"error",callback:function(t){}})})},handleCurrentChange:function(t){this.CurrentPage=t,this.getReportQuestion(t)},handleQuestionDetail:function(t){var e=this.$router.resolve({name:"questionDetail",query:{wid:t}});window.open(e.href,"_blank")}},watch:{},activated:function(){},components:{pagination:i.a,gxrDialog:n.a}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"project-question"},[s("div",{staticClass:"project-question-detailList"},[s("ul",{staticClass:"project-question-list"},[t._l(t.questionList,function(e,n){return s("li",[s("section",{staticClass:"spacearound colcenter"},[s("div",{class:{"question-type":!0}},[s("span",{class:{"el-icon-question":1!=e.fbzt,"el-icon-success":1==e.fbzt}}),t._v(" "),s("p",{staticClass:"questionOperate"},[t._e(),t._v(" \n                      "),t._e()])]),t._v(" "),s("div",{staticClass:"question-info"},[s("span",{staticClass:"question-info-bt",attrs:{"data-wid":e.wid},on:{click:function(s){t.handleQuestionDetail(e.wid)}}},[t._v(t._s(e.bt))]),s("br"),t._v(" "),s("span",{staticStyle:{color:"#363748","font-size":"12px"}},[t._v(t._s(e.fbrq))]),t._v("　\n                  "),e.sqgbCount>0?s("span",{staticClass:"question-tag-ysqgb"},[t._v("已申请关闭")]):t._e(),t._v("　\n                  "),s("p",[s("span",[s("span",{staticClass:"question-info-front"}),t._v("发布人 : "+t._s(e.fbrxm))]),t._v(" "),s("span",[s("span",{staticClass:"question-info-front"},[t._v("所属单位 : ")]),t._v(t._s(null==e.ssbm?"无":e.ssbm))]),t._v(" "),s("span",[s("span",{staticClass:"question-info-front"},[t._v("问题类别 : ")]),t._v(t._s(null==e.wtlb?"无":e.wtlb))])]),t._v(" "),s("p",[s("span",[s("span",{staticClass:"question-info-front"},[t._v("产品 : ")]),t._v(t._s(e.cpbh))]),t._v(" "),s("span",[s("span",{staticClass:"question-info-front"},[t._v("是否紧急 : ")]),t._v(t._s(null==e.jjyf?"无":"1"==e.jjyf?"是":"否"))]),t._v(" "),s("span",[s("span",{staticClass:"question-info-front"},[t._v("版本号 : ")]),t._v(t._s(e.bbh))])])]),t._v(" "),s("div",{staticClass:"question-state"},[s("span",{class:{"ygb-color":1==e.fbzt,"clz-color":1!=e.fbzt},staticStyle:{"font-size":"14px",color:"#f00"}},[t._v(t._s(e.lcMc))]),s("br"),t._v(" "),s("span",{staticStyle:{"font-size":"14px",color:"#7ECE64","margin-top":"5px"}},[s("span",{staticStyle:{"font-size":"12px",color:"#A8A8A8"}},[t._v("回复数")]),t._v(" 　"+t._s(e.replyCount))]),s("br"),t._v(" "),1!=e.fbzt&&e.qwjjrq?s("span",{staticStyle:{"font-size":"12px",color:"#A8A8A8"}},[t._v("\n                      "+t._s((new Date).getTime()<new Date(e.qwjjrq).getTime()?Math.round((new Date(e.qwjjrq).getTime()-(new Date).getTime())/864e5)+" 天到期":"过期 "+Math.round(((new Date).getTime()-new Date(e.qwjjrq).getTime())/864e5)+" 天")+"\n                  ")]):t._e()])]),t._v(" "),e.sqgbCount>0&&1==t.isJZuser?s("section",{staticClass:"pull-right",staticStyle:{width:"13%"},attrs:{"text-center":""}},[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(s){t.handleReject(e,n)}}},[t._v("驳回")]),t._v(" "),s("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(s){t.handleClose(e,n)}}},[t._v("关闭")])],1):t._e()])}),t._v(" "),0==t.questionList.length?s("div",{staticStyle:{"text-align":"center","padding-top":"50px"}},[s("img",{attrs:{src:"static/img/empty.png",alt:""}}),t._v(" "),s("p",[t._v("暂无问题")])]):t._e()],2),t._v(" "),t.total>10?s("div",{staticStyle:{padding:"5px 10px 10px 0","text-align":"right"}},[s("pagination",{attrs:{total:t.total,pageSize:t.pageSize},on:{handleCurrentChange:t.handleCurrentChange}})],1):t._e()]),t._v(" "),s("gxrDialog",{attrs:{show:t.gxrShow,wtInfo:t.wtInfo},on:{"update:show":function(e){t.gxrShow=e},closeQuestion:t.closeQuestion}})],1)},staticRenderFns:[]};var c=s("Z0/y")(o,r,!1,function(t){s("KZF2")},"data-v-e8070510",null);e.default=c.exports},"3fu1":function(t,e,s){"use strict";var n=s("P+gh"),i=s("IfOk"),a={data:function(){return{visible:this.show,fwzlValue:0,tableData:[]}},methods:{queryrReferenceHour:function(t){var e=this;Object(i.A)({wid:t}).then(function(t){var s=t.data;"success"==s.state&&(e.tableData=s.data,e.tableData.forEach(function(t,e,s){t.qrgs=t.confirmH.replace("/^.(d+)/","0.")}))})},queryQuestion:function(t){var e=this;Object(i.y)({wid:t}).then(function(t){var s=t.data;"success"==s.state&&(e.fwzlValue=s.data.zlpf?s.data.zlpf:0)})},commitQuestion:function(){var t=this,e=[];0!=this.tableData.length&&this.tableData.forEach(function(t,s,n){e.push(t.fbrxm+","+t.fbrbh+","+t.qrgs)}),this.$confirm("确定要关闭此问题吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){0!=t.fwzlValue?Object(i.f)({wid:t.wtInfo.wid,zlpf:t.fwzlValue,gxrData:e.join("|"),sfjj:"",jjsm:""}).then(function(e){var s=e.data;"success"==s.state?(t.innerVisible=!1,t.$alert(s.msg,"提示",{confirmButtonText:"确定",type:"success",callback:function(e){t.$emit("closeQuestion","")}})):t.$alert(s.msg,"提示",{confirmButtonText:"确定",type:"error"})}):t.$alert("请选择服务质量星级","提示",{confirmButtonText:"确定",type:"warning",callback:function(t){}})}).catch(function(){})}},props:{show:{type:Boolean,default:!1},wtInfo:{type:Object,default:function(){return{}}}},watch:{show:function(t,e){this.visible=this.show,t&&(this.queryrReferenceHour(this.wtInfo.wid),this.queryQuestion(this.wtInfo.wid))}},components:{tableLayout:n.a}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-dialog",{attrs:{title:"问题评价",width:"600px",visible:t.visible,"append-to-body":!0,"close-on-click-modal":!1,show:t.show},on:{"update:visible":function(e){t.visible=e},close:function(e){t.$emit("update:show",!1)}}},[s("div",{staticStyle:{padding:"0 10px"}},[s("tableLayout",[s("div",{attrs:{slot:"top"},slot:"top"},[s("p",[s("span",{staticClass:"filter-weight"},[t._v("服务质量：")]),s("el-rate",{attrs:{"show-text":"",texts:["1 分","2 分","3 分","4 分","5 分"]},model:{value:t.fwzlValue,callback:function(e){t.fwzlValue=e},expression:"fwzlValue"}})],1)]),t._v(" "),s("p",[t._v("说明：请认定贡献人工时，谢谢您的支持!")]),t._v(" "),s("div",{attrs:{slot:"bottom"},slot:"bottom"},[s("span",{staticClass:"filter-weight"},[t._v("合计贡献人: ")]),s("span",{staticStyle:{color:"#f00"}},[t._v(t._s(t.tableData.length))]),t._v(" 人\n                       "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","max-height":580,border:""}},[s("el-table-column",{attrs:{prop:"fbrxm",label:"姓名"}}),t._v(" "),s("el-table-column",{attrs:{label:"工时(小时)"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.qrgs))])]}}])})],1),t._v(" "),s("div",{staticStyle:{"text-align":"right",margin:"10px 0"}},[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.commitQuestion}},[t._v("提交")])],1)],1)])],1)])],1)},staticRenderFns:[]};var r=s("Z0/y")(a,o,!1,function(t){s("L1P9")},"data-v-581c0b86",null);e.a=r.exports},KZF2:function(t,e){},L1P9:function(t,e){}});
//# sourceMappingURL=13.98e3b245f26ba4a7231f.js.map