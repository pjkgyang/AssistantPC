webpackJsonp([3],{"25Mb":function(t,e){},"2CHb":function(t,e,s){"use strict";(function(t){var a=s("9A7R"),i=s("o6RA"),l=s("IfOk"),n=s("YkBq"),c=s("nfA5"),r=s("oFuF");e.a={data:function(){return{note:{backgroundImage:"url("+s("SQ3j")+")"},total:null,pageSize:8,currentPage:1,keyword:"",complainVisible:!1,dialogComplainVisible:!1,complainList:[],complain:[],comments:[],form:{cp:"",cpbh:"",tslb:"",title:"",object:[],content:""},wid:"",complainType:null,windowUnitType:"",cxzt:"",sfcb:"",tslb:"",gczd:"",complaintType:[],allfbData:[],tsdxList:[],gczdList:[],cpList:[],showCondition:"",queryLJshow:!0}},props:{xmbh:{type:String,default:""},xmmc:{type:String,default:""}},mounted:function(){var t=this;this.windowUnitType=sessionStorage.getItem("isJZuser"),Object(l.O)().then(function(e){var s=e.data;t.showCondition=s.data}),null==Object(r.m)("ComplaintType")?(Object(r.h)("cp",this.cpList,!0),Object(r.h)("gczd",this.gczdList,!0),Object(r.h)("ComplaintType",this.complaintType)):(this.complaintType=Object(r.m)("ComplaintType"),this.cpList=Object(r.m)("cp"),this.gczdList=Object(r.m)("gczd")),this.complaintList(1)},computed:{},methods:{searchComplant:function(){this.complaintList(1),this.currentPage=1},handlequeryComplant:function(){this.complaintList(1),this.currentPage=1},handleQueryShow:function(){this.queryLJshow=!this.queryLJshow},handleCXZT:function(t){var e=t.target.getAttribute("data-type");this.cxzt=e,this.complaintList(1),this.currentPage=1},handleSFCB:function(t){var e=t.target.getAttribute("data-type");this.sfcb=e,this.complaintList(1),this.currentPage=1},handleTSLB:function(t){var e=t.target.getAttribute("data-type");this.tslb=e,this.complaintList(1),this.currentPage=1},handleGCZD:function(t){var e=t.target.getAttribute("data-type");this.gczd=e,this.complaintList(1),this.currentPage=1},handleCurrentChange:function(t){this.currentPage=t,this.complaintList(t)},complainEdit:function(e){var s=this;this.complainType="edit",this.form.object=[],this.complainVisible=!0,this.$nextTick(function(){t("#summernote").summernote({dialogsInBody:!0,placeholder:"请输入投诉内容",height:200,width:"100%",minHeight:200,maxHeight:200,lang:"zh-CN",focus:!0,toolbar:[["style",["bold","italic","underline","clear"]],["font",["strikethrough","superscript","subscript"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["picture"],["link",["linkDialogShow","unlink"]]]}),t("#summernote").summernote("code",s.complainList[e].tsnr)}),this.queryProjectParticipant(),this.wid=this.complainList[e].wid,this.form.title=this.complainList[e].tsbt,this.form.cp=this.complainList[e].cpmc,this.form.cpbh=this.complainList[e].cpdm,this.form.content=this.complainList[e].content,this.form.tslb=this.complainList[e].tslb,null!=this.complainList[e].ryTsData&&this.complainList[e].ryTsData.forEach(function(t,e,a){s.form.object.push(t.yhxm+","+t.yhbh)})},complainDelect:function(t){var e=this,s=t.currentTarget.getAttribute("data-wid");this.$confirm("是否删除该投诉?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.d)({wid:s}).then(function(t){"success"==t.data.state&&e.$alert("删除成功！","提示",{confirmButtonText:"确定",type:"success",callback:function(t){e.complaintList(1)}})})}).catch(function(){})},getComplaint:function(t){var e=t.currentTarget.getAttribute("data-wid");this.wid=e;var s=this.$router.resolve({name:"complaintDetail",query:{wid:e}});window.open(s.href,"_blank")},handleComplain:function(){this.complainType="complain",this.form.title="",this.form.object=[],t("#summernote").summernote("code",""),this.complainVisible=!0,this.$nextTick(function(){t("#summernote").summernote({dialogsInBody:!0,placeholder:"请输入投诉内容",height:200,width:"100%",minHeight:200,maxHeight:200,lang:"zh-CN",focus:!0,toolbar:[["style",["bold","italic","underline","clear"]],["font",["strikethrough","superscript","subscript"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["picture"],["link",["linkDialogShow","unlink"]]]})}),this.queryProjectParticipant()},queryProjectParticipant:function(){var t=this;Object(n.r)({xmbh:this.xmbh}).then(function(e){var s=e.data;"success"==s.state&&(t.tsdxList=s.data,t.tsdxList.forEach(function(e,s,a){e.userId&&e.userName||t.tsdxList.splice(s,1)}))})},submitForm:function(e){var s=this;this.form.content=t("#summernote").summernote("code"),this.form.tslb?this.xmbh?this.form.title?this.form.content&&"<p><br></p>"!=this.form.content?"complain"==this.complainType?Object(i.b)({tslb:this.form.tslb,xmmc:this.xmmc,xmbh:this.xmbh,cpdm:this.form.cp.split("&")[1],cpmc:this.form.cp.split("&")[0],tsbt:this.form.title,tsnr:this.form.content,tsdxData:this.form.object.join("|")}).then(function(t){"success"==t.data.state?s.$alert("投诉成功","提示",{confirmButtonText:"确定",type:"success",callback:function(t){s.complainVisible=!s.complainVisible,s.complaintList(1)}}):s.$alert("提交失败!","提示",{confirmButtonText:"确定",type:"error"})}):"edit"==this.complainType&&Object(i.b)({wid:this.wid,tslb:this.form.tslb,xmmc:this.xmmc,xmbh:this.xmbh,cpdm:this.form.cp.split("&")[1]||this.form.cpbh,cpmc:this.form.cp.split("&")[0],tsbt:this.form.title,tsnr:this.form.content,tsdxData:this.form.object.join("|"),isedite:!0}).then(function(t){var e=t.data;"success"==e.state?s.$alert("修改成功","提示",{confirmButtonText:"确定",type:"success",callback:function(t){s.complainVisible=!1,s.complaintList(s.currentPage)}}):s.$alert(e.msg,"提示",{confirmButtonText:"确定",type:"error",callback:function(t){}})}):this.$alert("请填写投诉内容","提示",{confirmButtonText:"确定",type:"error"}):this.$alert("请填写投诉标题","提示",{confirmButtonText:"确定",type:"error"}):this.$alert("请选择项目","提示",{confirmButtonText:"确定",type:"error"}):this.$alert("请选择投诉类别","提示",{confirmButtonText:"确定",type:"error"})},complaintList:function(t){var e=this;Object(i.c)({curPage:t,pageSize:8,xmbh:this.xmbh,keyword:this.keyword,type:this.tslb,state:this.cxzt,qyzd:this.gczd,cb:this.sfcb}).then(function(t){var s=t.data;"success"==s.state&&(e.complainList=s.data.rows,e.total=s.data.records)})}},watch:{},activated:function(){this.complaintList(1)},components:{pagination:a.a,itemChoose:c.a}}}).call(e,s("L7Pj"))},"2G+0":function(t,e){},"2TTE":function(t,e,s){"use strict";var a=s("9A7R"),i=s("IfOk"),l=s("oFuF"),n=s("t5DY"),c=s("Vnos"),r=s("kAAd"),o=s("3fu1"),h=s("9+vf"),d={data:function(){return{questionTitle:"提交问题",dialogVisible:!1,sqgbShow:!1,gxrShow:!1,wtInfo:{},index:"",cnjsrq:"",question:{wtlb:"",sfjj:"",wtjb:"",cp:"",yxfw:"",sfbug:"",bbh:"",title:"",nr:"",wid:"",qwjjrq:"",qwjjrqO:"",cnjsrq:""},queryLJshow:!0,input:"",questionList:[],pageSize:10,CurrentPage:1,total:null,wxyztlist:[],gczdList:[],zzrList:[{label:"1",mc:"待我解决问题"},{label:"0",mc:"我的提问"},{label:"3",mc:"我受理过的问题"},{label:"2",mc:"我相关的问题"}],dwlxList:[{label:"1",mc:"学校"},{label:"0",mc:"金智"},{label:"2",mc:"合作伙伴"}],wjjztlist:[],cnqxList:[],cpline:[],cplist:[],wtlb:[],cnqx:"",sfjj:"",sfcb:"",cpxbg:"",cpbg:"",wtlbbg:"",sfbug:"",cxzt:"0",sqgb:"",wxyztbg:"",wjjztbg:"",gczd:"",wtfl:"",dwlx:"",qusetionInfo:{},wid:"",accreditShow:!1,showCondition:"",isJZuser:"",SLbtnDisabled:!1,userid:null,pickerBeginDateBefore:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}},username:"",uploadAction:"https://jsonplaceholder.typicode.com/posts/",fileList:[],fileData:[],filesData:[],baseUrl:"",chooseableItem:!1,show:!1,itemInfo:{xmbh:this.xmbh,xmmc:this.xmmc},starDay:"",endDay:"",keyword:"",userGroupTag:"",xmDetail:{}}},props:{xmbh:{type:String,default:""},xmmc:{type:String,default:""},isAll:{type:Boolean,default:!0},xmkbInfo:{type:Object,default:function(){return{}}}},mounted:function(){var t=this;this.username=window.userName,this.baseUrl=window.baseurl,Object(i.p)({xmbh:this.xmbh}).then(function(e){var s=e.data;"success"==s.state?t.xmDetail=s.data:t.$alert(s.msg,"提示",{confirmButtonText:"确定",type:"error"})}),this.isAll?(this.wtfl="",this.cxzt=""):(this.wtfl=2,this.cxzt=""),this.isJZuser=sessionStorage.getItem("isJZuser"),this.userGroupTag=JSON.parse(sessionStorage.getItem("userInfo")).userGroupTag,Object(i.O)().then(function(e){var s=e.data;t.showCondition=s.data,1!=s.data&&2!=s.data||(null==Object(l.m)("UnResponsiveStatus")?(Object(l.h)("UnResponsiveStatus",t.wxyztlist,""),Object(l.h)("ProblemSolutionState",t.wjjztlist,""),Object(l.h)("cpx",t.cpline,!0),Object(l.h)("gczd",t.gczdList,!0)):(t.wxyztlist=Object(l.m)("UnResponsiveStatus"),t.wjjztlist=Object(l.m)("ProblemSolutionState"),t.cpline=Object(l.m)("cpx"),t.gczdList=Object(l.m)("gczd")))}),null==Object(l.m)("ProblemType")?(Object(l.h)("ProblemType",this.wtlb,""),Object(l.h)("cp",this.cplist,!0),Object(l.h)("DeadlineStatus",this.cnqxList,"")):(this.wtlb=Object(l.m)("ProblemType"),this.cplist=Object(l.m)("cp"),this.cnqxList=Object(l.m)("DeadlineStatus")),this.queryAllQuestions(1)},methods:{handleReject:function(t,e,s){var a=this;Object(i.a)({wid:"",zbwid:t.wid,sm:s}).then(function(t){var s=t.data;"success"==s.state?a.$alert("已成功驳回！","提示",{confirmButtonText:"确定",type:"success",callback:function(t){a.questionList[e].sqgbCount=0}}):a.$alert(s.msg,"提示",{confirmButtonText:"确定",type:"error"})})},handleClose:function(t,e){this.wtInfo=t,this.index=e,this.gxrShow=!this.gxrShow},closeQuestion:function(){this.gxrShow=!this.gxrShow,this.questionList[this.index].fbzt=1,this.questionList[this.index].sqgbCount=0},handleExport:function(){window.open(window.baseurl+"question/exportQuestionReport.do?noResponse="+this.wxyztbg+"&urgent="+this.sfjj+"&cp="+this.cpbg+"&cpx="+this.cpxbg+"&bug="+this.sfbug+"&jjzt="+this.wjjztbg+"&zt="+this.cxzt+"&keyword="+this.keyword+"&qyzd="+this.gczd+"&wtfl="+this.wtfl+"&dwlx="+this.dwlx+"&cb="+this.sfcb+"&wtlb="+this.wtlbbg+"&sqgb="+this.sqgb+"&deadline="+this.cnqx+"&starDay="+this.starDay+"&endDay="+this.endDay+"&xmbh="+this.xmbh)},handleTWsuccess:function(){switch(this.questionTitle){case"我要提问":this.queryAllQuestions(1);break;case"编辑问题":this.queryAllQuestions(this.CurrentPage)}},handleRemove:function(t,e){this.fileData=[],this.fileList=[],this.filesData=[]},beforeUpload:function(t){var e=this,s=new FormData;return s.append("fileUpload",t),s.append("xmbh",this.xmbh),axios.post(window.baseurl+"attachment/uploadAttach.do",s,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){"success"==t.data.state?e.fileData.push(t.data.data):e.$alert(t.data.msg,"提示",{confirmButtonText:"确定"})}),!0},handleChange:function(t,e){var s=[];this.filesData.push(t);for(var a=0,i=this.filesData.length;a<i;a++){for(var l=a+1;l<i;l++)this.filesData[a].name===this.filesData[l].name&&(l=++a);s.push(this.filesData[a])}this.fileList=s,this.$refs.upload.submit()},handleQueryShow:function(){this.queryLJshow=!this.queryLJshow},handleQuestion:function(){var t=this;Object(i.c)().then(function(e){var s=e.data;"success"==s.state&&(s.data>=1?t.$alert("您有"+s.data+"个问题申请关闭，请根据问题处理情况驳回或者关闭，处理之后可以继续提问，谢谢支持"," 提示",{confirmButtonText:"确定",type:"warning",callback:function(e){t.sqgbShow=!t.sqgbShow}}):(t.accreditShow=!1,t.questionTitle="我要提问",t.show=!0))})},handleQuestionDetail:function(t){this.wid=t.wid;var e=this.$router.resolve({name:"questionDetail",query:{wid:t.wid}});window.open(e.href,"_blank")},editQuestion:function(t){var e=this;this.questionTitle="编辑问题",Object(n.b)({wid:t.wid}).then(function(s){var a=s.data;"success"==a.state&&(a.data?Object(i.A)({wid:t.wid}).then(function(t){var s=t.data;"success"==s.state?(e.qusetionInfo=s.data,e.accreditShow=!1,e.show=!0):e.$alert(s.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})}):e.$alert("该条问题已有回复，不可编辑","提示",{confirmButtonText:"确定",callback:function(t){}}))})},deleteQuestion:function(t){var e=this;this.$confirm("是否删除该条问题?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.i)({wids:t.wid}).then(function(t){var s=t.data;"success"==s.state?s.data?e.$alert("删除成功","提示",{confirmButtonText:"确定",type:"success",callback:function(t){e.queryAllQuestions(1)}}):e.$alert("删除失败","提示",{confirmButtonText:"确定",type:"warning"}):e.$alert(s.msg,"提示",{confirmButtonText:"确定",type:"warning"})})}).catch(function(){})},searchQuestion:function(){this.queryAllQuestions(1)},handlequeryQuestion:function(){this.queryAllQuestions(1)},handleCurrentChange:function(t){this.CurrentPage=t,this.queryAllQuestions(t)},changeStarDay:function(t){this.queryAllQuestions(1)},changeEndDay:function(t){this.queryAllQuestions(1)},handleSFJJ:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.sfjj=e,this.queryAllQuestions(1))},handleSFCB:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.sfcb=e,this.queryAllQuestions(1))},handleCPX:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.cpxbg=e,this.queryAllQuestions(1))},handleCP:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.cpbg=e,this.queryAllQuestions(1))},handleWTLB:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.wtlbbg=e,this.queryAllQuestions(1))},handleSFBUG:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.sfbug=e,this.queryAllQuestions(1))},handleCXZT:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.cxzt=e,this.queryAllQuestions(1))},handleSQGB:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.sqgb=e,this.queryAllQuestions(1))},handleWXYZT:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.wxyztbg=e,this.queryAllQuestions(1))},handleWJJZT:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.wjjztbg=e,this.queryAllQuestions(1))},handleCNQX:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.cnqx=e,this.queryAllQuestions(1))},handleGCZD:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.gczd=e,this.queryAllQuestions(1))},handleDWLX:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.dwlx=e,this.queryAllQuestions(1))},handleZXR:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.wtfl=e,this.queryAllQuestions(1))},queryAllQuestions:function(t){var e=this;Object(i.s)({curPage:t,pageSize:this.pageSize,xmbh:this.xmbh,urgent:this.sfjj,cp:this.cpbg,cpx:this.cpxbg,bug:this.sfbug,noResponse:this.wxyztbg,jjzt:this.wjjztbg,zt:this.cxzt,keyword:this.input||"",qyzd:this.gczd,wtfl:this.wtfl,dwlx:this.dwlx,cb:this.sfcb,wtlb:this.wtlbbg,sqgb:this.sqgb,deadline:this.cnqx,starDay:this.starDay,endDay:this.endDay}).then(function(t){var s=t.data;"success"==s.state&&(null!=s.data.rows&&(e.questionList=s.data.rows),e.total=s.data.records)})}},watch:{},activated:function(){},components:{pagination:a.a,twDialog:c.a,questionCard:r.a,gxrDialog:o.a,sqgbwtDialog:h.a}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"project-question"},[s("div",{staticClass:"project-question-query"},[s("div",[s("span",{staticClass:"query-title"},[s("span",{class:{"isshown-query":!0,"el-icon-arrow-down":!t.queryLJshow,"el-icon-arrow-up":t.queryLJshow},on:{click:t.handleQueryShow}}),t._v(" 高级查询")]),t._v(" "),s("el-input",{staticStyle:{width:"493px"},attrs:{size:"small",placeholder:"请输入问题提出人姓名/工号/手机号/标题/项目编号/项目名称/学校名称"},on:{change:t.searchQuestion},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),t._v("　\n              "),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handlequeryQuestion}},[t._v("查询")])],1),t._v(" "),t.queryLJshow?s("div",{staticClass:"query-condition"},[s("div",[s("p",{staticClass:"query-title"},[t._v("提问时间:")]),t._v(" "),s("p",{staticClass:"query-list"},[s("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"选择开始日期","value-format":"yyyy-MM-dd"},on:{change:t.changeStarDay},model:{value:t.starDay,callback:function(e){t.starDay=e},expression:"starDay"}}),t._v(" 　 至 　 \n               "),s("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"选择结束日期","value-format":"yyyy-MM-dd"},on:{change:t.changeEndDay},model:{value:t.endDay,callback:function(e){t.endDay=e},expression:"endDay"}})],1)]),t._v(" "),s("div",[s("p",{staticClass:"query-title"},[t._v("问题分类:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleZXR}},[s("span",{class:{"bg-active":""==t.wtfl},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.zzrList,function(e,a){return s("span",{key:a,class:{"bg-active":t.wtfl==e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]),t._v(" "),s("div",[s("p",{staticClass:"query-title"},[t._v("查询状态:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleCXZT}},[s("span",{class:{"bg-active":""==t.cxzt},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),s("span",{class:{"bg-active":"0"==t.cxzt},attrs:{"data-type":"0"}},[t._v("处理中")]),t._v(" "),s("span",{class:{"bg-active":"1"==t.cxzt},attrs:{"data-type":"1"}},[t._v("已关闭")])])]),t._v(" "),s("div",[s("p",{staticClass:"query-title"},[t._v("申请关闭:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleSQGB}},[s("span",{class:{"bg-active":""==t.sqgb},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),s("span",{class:{"bg-active":"1"==t.sqgb},attrs:{"data-type":"1"}},[t._v("是")]),t._v(" "),s("span",{class:{"bg-active":"0"==t.sqgb},attrs:{"data-type":"0"}},[t._v("否")])])]),t._v(" "),s("div",[s("p",{staticClass:"query-title"},[t._v("是否催办:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleSFCB}},[s("span",{class:{"bg-active":""==t.sfcb},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),s("span",{class:{"bg-active":"1"==t.sfcb},attrs:{"data-type":"1"}},[t._v("是")]),t._v(" "),s("span",{class:{"bg-active":"0"==t.sfcb},attrs:{"data-type":"0"}},[t._v("否")])])]),t._v(" "),1==t.showCondition||2==t.showCondition?s("div",[s("p",{staticClass:"query-title"},[t._v("产品线:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleCPX}},[s("span",{class:{"bg-active":""==t.cpxbg},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.cpline,function(e,a){return s("span",{class:{"bg-active":t.cpxbg===e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]):t._e(),t._v(" "),1==t.showCondition||2==t.showCondition?s("div",[s("p",{staticClass:"query-title"},[t._v("产品:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleCP}},[s("span",{class:{"bg-active":""==t.cpbg},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.cplist,function(e,a){return s("span",{class:{"bg-active":t.cpbg==e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]):t._e(),t._v(" "),1==t.showCondition||2==t.showCondition?s("div",[s("p",{staticClass:"query-title"},[t._v("问题类别:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleWTLB}},[s("span",{class:{"bg-active":""==t.wtlbbg},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.wtlb,function(e,a){return s("span",{class:{"bg-active":t.wtlbbg==e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]):t._e(),t._v(" "),1==t.showCondition||2==t.showCondition?s("div",[s("p",{staticClass:"query-title"},[t._v("未响应状态:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleWXYZT}},[s("span",{class:{"bg-active":""==t.wxyztbg},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.wxyztlist,function(e,a){return s("span",{class:{"bg-active":t.wxyztbg==e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]):t._e(),t._v(" "),1==t.showCondition||2==t.showCondition?s("div",[s("p",{staticClass:"query-title"},[t._v("未解决状态:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleWJJZT}},[s("span",{class:{"bg-active":""==t.wjjztbg},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.wjjztlist,function(e,a){return s("span",{class:{"bg-active":t.wjjztbg==e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]):t._e(),t._v(" "),0==t.isJZuser?s("div",[s("p",{staticClass:"query-title"},[t._v("到期查询:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleCNQX}},[s("span",{class:{"bg-active":""==t.cnqx},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.cnqxList,function(e,a){return s("span",{class:{"bg-active":t.cnqx==e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]):t._e(),t._v(" "),1==t.showCondition||2==t.showCondition?s("div",[s("p",{staticClass:"query-title"},[t._v("区域工程:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleGCZD}},[s("span",{class:{"bg-active":""==t.gczd},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.gczdList,function(e,a){return s("span",{key:a,class:{"bg-active":t.gczd==e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]):t._e(),t._v(" "),1==t.showCondition||2==t.showCondition?s("div",[s("p",{staticClass:"query-title"},[t._v("单位类型:")]),t._v(" "),s("p",{staticClass:"query-list",on:{click:t.handleDWLX}},[s("span",{class:{"bg-active":""==t.dwlx},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.dwlxList,function(e,a){return s("span",{class:{"bg-active":t.dwlx==e.label},attrs:{"data-type":e.label}},[t._v(t._s(e.mc))])})],2)]):t._e()]):t._e()]),t._v(" "),s("div",{staticStyle:{background:"#fff","margin-top":"10px","box-shadow":"0 2px 12px 0 rgba(0,0,0,.1)","border-radius":"4px",padding:"10px 0"}},[s("div",{staticStyle:{padding:"0 10px"}},[s("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"danger",disabled:"已终止"==this.xmDetail.ztztmc||"0"==this.xmDetail.gcfwzt},on:{click:t.handleQuestion}},[t._v("\n            "+t._s("已终止"==this.xmDetail.ztztmc?"该项目已经终止,禁止提问":"0"==this.xmDetail.gcfwzt?this.xmDetail.gcfwztsm:"我要提问")+"\n       ")]),t._v(" "),t.userGroupTag.includes("ProblemAdmin")||t.userGroupTag.includes("GCCPZJ")||t.userGroupTag.includes("QYZ")?s("el-button",{staticStyle:{float:"right","margin-top":"8px"},attrs:{disabled:"已终止"==this.xmDetail.ztztmc,size:"mini",type:"primary"},on:{click:t.handleExport}},[t._v("导出")]):t._e()],1),t._v(" "),s("hr",{staticStyle:{"border-top":"1px solid #eee",margin:"8px 0 0 0 !important"}}),t._v(" "),s("questionCard",{attrs:{questionList:t.questionList},on:{handleQuestionDetail:t.handleQuestionDetail,handleReject:t.handleReject,handleClose:t.handleClose,editQuestion:t.editQuestion,deleteQuestion:t.deleteQuestion}}),t._v(" "),t.total>10?s("div",{staticStyle:{"margin-top":"10px","text-align":"right"}},[s("pagination",{attrs:{total:t.total,pageSize:t.pageSize},on:{handleCurrentChange:t.handleCurrentChange}})],1):t._e()],1),t._v(" "),s("twDialog",{attrs:{show:t.show,questionTitle:t.questionTitle,accreditShow:t.accreditShow,questionInfo:t.qusetionInfo,chooseableItem:t.chooseableItem,itemInfo:t.itemInfo},on:{"update:show":function(e){t.show=e},handleTWsuccess:t.handleTWsuccess}}),t._v(" "),s("gxrDialog",{attrs:{show:t.gxrShow,wtInfo:t.wtInfo},on:{"update:show":function(e){t.gxrShow=e},closeQuestion:t.closeQuestion}}),t._v(" "),s("sqgbwtDialog",{attrs:{show:t.sqgbShow},on:{"update:show":function(e){t.sqgbShow=e}}})],1)},staticRenderFns:[]};var m=s("Z0/y")(d,u,!1,function(t){s("Isrd")},"data-v-748b1078",null);e.a=m.exports},"68Sg":function(t,e){},"8Hm5":function(t,e,s){"use strict";var a=s("hRKE"),i=s.n(a),l=s("Q3je"),n=s("UiN9"),c=s("a3Yh"),r=s.n(c),o=s("3cXf"),h=s.n(o),d=s("YkBq"),u={data:function(){return{listt0:[],list0:[],name:"",partyArr:[],dynamicTags:[],selectShow:!1,formLabelAlign:{lcbmc:"",rwmc:"",ssry:"",type:"",startDate:"",jhgsValue:"",yxj:"3",Jfzrr:"",Yfzrr:"",endDate:"",desc:""},lcbTask:[],ssryArr:[{value:"选项1",label:"人员1"},{value:"选项2",label:"人员2"},{value:"选项3",label:"人员3"},{value:"选项4",label:"人员4"},{value:"选项5",label:"人员5"}],taskLcbmc:"",cyry:[]}},props:{lcbrw:{type:Array,default:function(){return[]}},lcbinfo:{type:Object,default:function(){return{}}},dialogVisible:{type:Boolean,default:!1}},mounted:function(){},methods:{handleClose:function(t){this.dynamicTags.splice(this.dynamicTags.indexOf(t),1)},addUser:function(t){t.stopPropagation(),this.selectShow=!this.selectShow},selectHide:function(t){"el-input__inner"==t.target.className&&"搜索姓名"==t.target.getAttribute("placeholder")?this.selectShow=!0:"cyz-list"==t.target.className?this.selectShow=!0:this.selectShow=!1},addTaskParty:function(t){var e=this,s=t.currentTarget.getAttribute("data-label"),a=s.split("&")[2],i=(s.split("&")[1],s.split("&")[0]),l=[];this.dynamicTags.forEach(function(t,s,a){l.push(e.dynamicTags[s].userName)}),l.includes(s.split("&")[0])?this.dynamicTags.forEach(function(t,s,a){t.userName==i&&e.dynamicTags.splice(s,1)}):this.dynamicTags.push(this.listt0[a])},handleLcbtask:function(t){this.lcbTask=this.lcbrw[t],this.taskLcbmc=this.lcbrw[t].rwmc},chooseSSry:function(t){this.formLabelAlign.ssry=t},handleAddTask:function(){var t=this;if(this.dynamicTags.forEach(function(e,s,a){t.cyry.push(e.userId+","+e.userName)}),!this.validate())return!0;var e={xmbh:this.lcbTask.xmbh,lcbbh:this.lcbTask.lcbbh,rwmc:this.formLabelAlign.rwmc,yxj:this.formLabelAlign.yxj,jhgs:this.formLabelAlign.jhgsValue,rwxq:this.formLabelAlign.desc,jhksrq:this.formLabelAlign.startDate,jhjsrq:this.formLabelAlign.endDate,ssrbh:this.formLabelAlign.ssry.split("&")[1],ssrxm:this.formLabelAlign.ssry.split("&")[0],cpbh:this.lcbinfo.cpbh,cpmc:this.lcbinfo.cpmc,ryData:this.cyry.join("|")};this.$emit("AddTaskCommit",h()(e))},validate:function(){return this.formLabelAlign.rwmc?this.formLabelAlign.startDate?this.formLabelAlign.endDate?this.formLabelAlign.ssry?!!this.formLabelAlign.desc||(this.$alert("请填写任务详情","提示",{confirmButtonText:"确定",type:"error",callback:function(t){}}),!1):(this.$alert("请选择实施人员","提示",{confirmButtonText:"确定",type:"error",callback:function(t){}}),!1):(this.$alert("请选择结束日期","提示",{confirmButtonText:"确定",type:"error",callback:function(t){}}),!1):(this.$alert("请选择开始日期","提示",{confirmButtonText:"确定",type:"error",callback:function(t){}}),!1):(this.$alert("请填写任务名称","提示",{confirmButtonText:"确定",type:"error",callback:function(t){}}),!1)}},watch:r()({lcbrw:function(t,e){var s=this;this.formLabelAlign.lcbmc=t[0].rwmc,this.lcbTask=t[0],this.taskLcbmc=t[0].rwmc,Object(d.r)({xmbh:this.lcbTask.xmbh}).then(function(t){var e=t.data;"success"==e.state&&(s.ssryArr=e.data,s.listt0=e.data,s.list0=e.data)})},name:function(t,e){var s=this,a=this.list0;this.name?(s.listt0=[],a.forEach(function(t,e,i){(a[e].userId.indexOf(s.name)>=0||a[e].userName.indexOf(s.name)>=0)&&s.listt0.push(a[e])})):s.listt0=a},dialogVisible:function(t,e){var s=this;t?(this.partyArr=[],this.listt0.forEach(function(t,e,a){-1!=h()(s.dynamicTags).indexOf(h()(s.listt0[e]))&&s.partyArr.push(e)})):this.selectShow=!1},dynamicTags:function(t,e){var s=this;this.partyArr=[],this.listt0.forEach(function(t,e,a){-1!=h()(s.dynamicTags).indexOf(h()(s.listt0[e]))&&s.partyArr.push(e)})}},"dialogVisible",function(t,e){this.formLabelAlign.rwmc="",this.formLabelAlign.yxj="",this.formLabelAlign.jhgsValue="",this.formLabelAlign.startDate="",this.formLabelAlign.endDate="",this.formLabelAlign.ssry="",this.formLabelAlign.desc="",this.cyry=[],this.dynamicTags=[]}),activated:function(){this.formLabelAlign.lcbbh=this.lcbrw[0].lcbbh}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{on:{click:t.selectHide}},[s("div",{staticStyle:{height:"540px"}},[s("div",{staticClass:"task-detail-dialog-header"},[s("h4",{staticClass:"task-detail-dialog-header-mc"},[t._v(t._s(t.lcbinfo.cpmc)+" · "+t._s(t.taskLcbmc))])]),t._v(" "),s("div",{staticStyle:{padding:"0 20px 0 0","border-bottom":"1px solid #ccc"}},[s("el-form",{ref:"formLabelAlign",attrs:{size:"small","label-width":"110px",model:t.formLabelAlign}},[s("el-form-item",{attrs:{label:"关联里程碑",required:""}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:t.handleLcbtask},model:{value:t.formLabelAlign.lcbmc,callback:function(e){t.$set(t.formLabelAlign,"lcbmc",e)},expression:"formLabelAlign.lcbmc"}},t._l(t.lcbrw,function(t,e){return s("el-option",{key:t.lcbbh,attrs:{label:t.rwmc,value:e}})}))],1),t._v(" "),s("el-form-item",{attrs:{label:"任务名称",required:""}},[s("el-input",{attrs:{placeholder:"请输入任务名称"},model:{value:t.formLabelAlign.rwmc,callback:function(e){t.$set(t.formLabelAlign,"rwmc",e)},expression:"formLabelAlign.rwmc"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"开始日期",required:""}},[s("el-col",{attrs:{span:10}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.formLabelAlign.startDate,callback:function(e){t.$set(t.formLabelAlign,"startDate",e)},expression:"formLabelAlign.startDate"}})],1),t._v(" "),s("el-col",{staticClass:"task-gs-date",staticStyle:{"text-align":"center","font-weight":"700"},attrs:{span:4,required:""}},[t._v("结束日期")]),t._v(" "),s("el-col",{attrs:{span:10}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.formLabelAlign.endDate,callback:function(e){t.$set(t.formLabelAlign,"endDate",e)},expression:"formLabelAlign.endDate"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"责任人",required:""}},[s("el-col",{attrs:{span:10}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择责任人"},on:{change:t.chooseSSry},model:{value:t.formLabelAlign.ssry,callback:function(e){t.$set(t.formLabelAlign,"ssry",e)},expression:"formLabelAlign.ssry"}},t._l(t.ssryArr,function(t,e){return s("el-option",{key:e,attrs:{label:t.userName,value:t.userName+"&"+t.userId}})}))],1),t._v(" "),s("el-col",{staticClass:"task-gs-date",staticStyle:{"text-align":"center","font-weight":"700"},attrs:{span:4,required:""}},[t._v("工时(小时)")]),t._v(" "),s("el-col",{attrs:{span:10}},[s("el-input",{attrs:{placeholder:"请输入工时"},model:{value:t.formLabelAlign.jhgsValue,callback:function(e){t.$set(t.formLabelAlign,"jhgsValue",e)},expression:"formLabelAlign.jhgsValue"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"优先级",required:""}},[s("el-select",{staticStyle:{width:"41.5%"},attrs:{placeholder:"请选择优先级"},model:{value:t.formLabelAlign.yxj,callback:function(e){t.$set(t.formLabelAlign,"yxj",e)},expression:"formLabelAlign.yxj"}},[s("el-option",{attrs:{label:"非常紧急",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"紧急",value:"2"}}),t._v(" "),s("el-option",{attrs:{label:"普通",value:"3"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"任务内容",required:""}},[s("el-input",{attrs:{type:"textarea",rows:4,resize:"none"},model:{value:t.formLabelAlign.desc,callback:function(e){t.$set(t.formLabelAlign,"desc",e)},expression:"formLabelAlign.desc"}})],1)],1)],1),t._v(" "),s("div",{staticClass:"detail-activities-wrap"},[s("div",{staticClass:"involve-view"},[s("p",[t._v("参与者")]),t._v(" "),t._l(t.dynamicTags,function(e,a){return s("el-tag",{key:a,attrs:{closable:!0,"disable-transitions":!1},on:{close:function(s){t.handleClose(e)}}},[t._v("\n                    "+t._s(e.userName)+"\n                 ")])}),t._v(" "),s("el-button",{staticClass:"button-new-tag",attrs:{type:"primary"},on:{click:t.addUser}},[t._v("+")]),t._v(" "),s("el-collapse-transition",[t.selectShow?s("ul",{staticClass:"task_participant"},[s("li",[s("el-input",{attrs:{placeholder:"搜索姓名"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),s("ul",{staticStyle:{height:"180px","overflow-y":"auto"}},t._l(t.listt0,function(e,a){return s("li",{key:a,staticClass:"cyz-list",attrs:{"data-label":e.userName+"&"+e.userId+"&"+a},on:{click:t.addTaskParty}},[s("span",{staticClass:"cyz-list",staticStyle:{display:"inline-block",width:"50px"}},[t._v(t._s(e.userName)+" ")]),t._v(" "),s("span",{staticClass:"cyz-list"},[t._v(t._s(e.userCode))]),t._v(" "),-1!=t.partyArr.indexOf(a)?s("span",{staticClass:"el-icon-check cyz-list",staticStyle:{float:"right","margin-top":"5px"}}):t._e()])}))]):t._e()])],2)]),t._v(" "),s("div",{staticStyle:{"text-align":"right",position:"absolute",bottom:"0",width:"100%",padding:"10px"}},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.handleAddTask}},[t._v("提交")])],1)])])},staticRenderFns:[]};var p=s("Z0/y")(u,m,!1,function(t){s("IcVQ")},"data-v-123adbde",null).exports,f={data:function(){return{checked:!1,userName:""}},props:{TaskDatas:{type:Array,default:function(){return[]}}},mounted:function(){this.userName=window.userName},methods:{handleTaskinfo:function(t,e){var s=this.TaskDatas[e];this.TaskDatas[e].index=e,this.$emit("handleTaskinfo",s)},handleTask:function(t,e,s){t.stopPropagation();var a=this.TaskDatas[s];a.type=e,this.$emit("handleTaskDialog",a)},changeTaskState:function(t,e){var s=this;t.stopPropagation();var a=JSON.parse(sessionStorage.userInfo).userGroupTag;if(1==e.zt)this.$confirm("您确定完成了本任务吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.b)({rwbh:e.rwbh,state:1==e.zt?"2":"1"}).then(function(t){"success"==t.data.state&&s.$emit("changeTaskstate","")})}).catch(function(){});else{if(!a.includes("ProblemAdmin"))return void this.$alert("对不起,您没有操作权限！(如有问题，请联系管理员)","提示",{confirmButtonText:"确定",type:"warning"});Object(l.b)({rwbh:e.rwbh,state:1==e.zt?"2":"1"}).then(function(t){"success"==t.data.state&&s.$emit("changeTaskstate","")})}}}},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ul",{staticClass:"Lcbtask_task"},[t._l(t.TaskDatas,function(e,a){return null!=t.TaskDatas?s("li",{key:a,staticStyle:{position:"relative"}},[1==e.lx?s("div",{staticClass:"task_label lcb_task",class:{"gb-active":5==e.zt},attrs:{"data-rwbh":e.rwbh}},[s("div",{staticClass:"lcb_task_top",on:{click:function(e){t.handleTaskinfo(e,a)}}},[s("div",{staticStyle:{"font-size":"13px"}},[s("p",{staticClass:"task_content",attrs:{title:e.rwmc_display}},[t._v(" "+t._s(e.rwmc_display)+" ")]),t._v(" "),t._m(0,!0),t._v(" "),s("p",{staticClass:"lcb_task_info"},[s("span",[s("span",{staticClass:"el-icon-erp-yonghu Lcbtask_task-titleTip"},[t._v(" 责任人 : ")]),t._v(t._s(""==e.ssrxm?"暂无":e.ssrxm))]),t._v(" "),s("span",[s("span",{staticClass:"el-icon-date Lcbtask_task-titleTip"},[t._v(" 实际结束日期 : ")]),t._v(t._s(e.sjjsrq)+" ")])]),t._v(" "),s("p",{staticClass:"lcb_task_info"},[s("span",[s("span",{staticClass:"el-icon-document Lcbtask_task-titleTip"},[t._v(" "+t._s(1==e.lx?"里程碑状态":"任务状态")+" : ")]),t._v(" "),s("span",{class:{"lcb-gb":"关闭"==e.zt_display,"lcb-zc":"关闭"!=e.zt_display}},[t._v(t._s(e.zt_display))])]),t._v(" "),s("span",[s("span",{staticClass:"el-icon-sort Lcbtask_task-titleTip"},[t._v(" 优先级 : ")]),s("span",{class:{"task-yxj":!0,"task-yxj-fcjj":1==e.yxj,"task-yxj-jj":2==e.yxj,"task-yxj-zc":3==e.yxj}},[t._v(t._s(e.yxj_display))])])]),t._v(" "),s("p",{staticClass:"lcb_task_info"},[s("span",[s("span",{staticClass:"el-icon-date Lcbtask_task-titleTip"},[t._v(" 计划完成日期 : ")]),t._v(t._s(e.jhjsrq)+" ")]),t._v(" "),s("span",[s("span",{staticClass:"el-icon-circle-check-outline Lcbtask_task-titleTip"},[t._v(" 甲方确认 : ")]),t._v(" "),s("span",[t._v(t._s(0==e.sfjfqr?"未确认":"已确认")+" ")])])])])]),t._v(" "),s("div",{staticClass:"task_label_bottom"},[1!=e.sfjfqr&&t.userName==e.jfzrrxm?s("el-button",{on:{click:function(e){t.handleTask(e,"jfqy",a)}}},[t._v("甲方确认")]):t._e(),t._v(" "),s("el-button",{on:{click:function(e){t.handleTask(e,"daily",a)}}},[t._v(" 填写日报")])],1),t._v(" "),s("div",{class:{"task-priority":!0,"task-priority-1":!0}})]):s("div",{staticClass:"task_label",class:{"task-ywc":2==e.zt},attrs:{"data-rwbh":e.rwbh}},[s("div",{staticClass:"task_label_top",on:{click:function(e){t.handleTaskinfo(e,a)}}},[s("div",{staticStyle:{"font-size":"12px",width:"100%"}},[s("p",{staticClass:"task_content"},[s("span",{staticClass:"task-switch",class:{"el-icon-check":2==e.zt,"task-close":2==e.zt},attrs:{title:"关闭/重启任务","data-info":e.rwbh+"&"+e.zt},on:{click:function(s){t.changeTaskState(s,e)}}}),t._v("\r\n                     "+t._s(e.rwmc_display))]),t._v(" "),s("p",[s("span",{staticClass:"lcb-task-type"},[t._v(t._s(e.lx_dispaly))])]),t._v(" "),s("p",{staticClass:"lcb_task_info"},[s("span",[s("span",{staticClass:"el-icon-erp-yonghu Lcbtask_task-titleTip"},[t._v(" 责任人 : ")]),t._v(t._s(""==e.ssrxm?"暂无":e.ssrxm))]),t._v(" "),s("span",[s("span",{staticClass:"el-icon-date Lcbtask_task-titleTip"},[t._v(" 实际结束日期 : ")]),t._v(t._s(e.sjjsrq))])]),t._v(" "),s("p",{staticClass:"lcb_task_info"},[s("span",[s("span",{staticClass:"el-icon-document Lcbtask_task-titleTip"},[t._v(" "+t._s(1==e.lx?"里程碑状态":"任务状态")+" :")]),t._v(" "),s("span",{class:{"rw-gb":2==e.zt||3,"rw-zc":2!=e.zt&&3!=e.zt}},[t._v(t._s(e.zt_display))])]),t._v(" "),s("span",[s("span",{staticClass:"el-icon-sort Lcbtask_task-titleTip"},[t._v(" 优先级 : ")]),s("span",{class:{"task-yxj":!0,"task-yxj-fcjj":1==e.yxj,"task-yxj-jj":2==e.yxj,"task-yxj-zc":3==e.yxj}},[t._v(t._s("1"==e.yxj?"非常紧急":"2"==e.yxj?"紧急":"普通"))])])]),t._v(" "),s("p",{staticClass:"lcb_task_info"},[s("span",[s("span",{staticClass:"el-icon-date Lcbtask_task-titleTip"},[t._v(" 计划完成日期 : ")]),t._v(t._s(e.jhjsrq))])]),t._v(" "),3!=e.lx&&5!=e.lx?s("span",{staticClass:"el-icon-erp-yonghu",staticStyle:{"font-size":"12px"}},[s("span",{staticClass:"Lcbtask_task-titleTip"},[t._v(" 创建人 : ")]),t._v(t._s(""==e.cjrxm?"暂无":e.cjrxm))]):t._e()])]),t._v(" "),s("div",{staticClass:"task_label_bottom"},[(2==e.zt&&1==e.lx||3==e.lx?t.userName==e.jfzrrxm:5==e.lx?t.userName==e.yfzrrxm:t.userName==e.cjrxm)?s("el-button",{attrs:{disabled:3==e.zt},on:{click:function(e){t.handleTask(e,"jfqy",a)}}},[t._v(t._s(3==e.lx?"甲方确认":5==e.lx?"乙方确认":"创建人确认"))]):t._e(),t._v(" "),9==e.lx&&2!=e.zt?s("el-button",{on:{click:function(e){t.handleTask(e,"delete",a)}}},[t._v("删除任务")]):t._e(),t._v(" "),9==e.lx&&2!=e.zt?s("el-button",{on:{click:function(e){t.handleTask(e,"edit",a)}}},[t._v("编辑任务")]):t._e(),t._v(" "),s("el-button",{on:{click:function(e){t.handleTask(e,"daily",a)}}},[t._v(" 填写日报")])],1),t._v(" "),s("div",{class:{"task-priority":!0,"task-priority-1":!0}})])]):t._e()}),t._v(" "),null==t.TaskDatas?s("li",{staticClass:"empty-task"},[t._v("\r\n        暂无任务\r\n    ")]):t._e()],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",{staticClass:"lcb-task-type"},[this._v("里程碑任务")])])}]};var v=s("Z0/y")(f,b,!1,function(t){s("sxBF")},"data-v-dd61d38c",null).exports,g=s("1vsE"),y={data:function(){return{dialogAddTaskVisible:!1,dialogchangeDateVisible:!1,form:{startDate:"",endDate:"",sm:""},lcbTask:{},data:[],indexArr:[],LcbArr:[],LcbTaskDatas:this.TaskDatas,commitSuccess:!1}},props:{milestone:{type:Object,default:function(){return{}}},index:{type:Number,default:""},TaskDatas:{type:Array,default:function(){return[]}},rwlx:{type:String,default:""},rwzt:{type:String,default:""}},mounted:function(){g.a.init(document.querySelector("#my-scrollbar"+this.index))},methods:{handleTaskDialog:function(t){var e=this;"object"==(void 0===t?"undefined":i()(t))&&(t.catalogId=this.milestone.catalogId,t.catalog=this.milestone.catalog,t.cpmc=this.milestone.cpmc,t.catalogType=this.milestone.catalogType,"delete"==t.type?this.$confirm("是否删除该任务?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.d)({rwbh:t.rwbh}).then(function(t){"success"==t.data.state&&e.$alert("删除成功","提示",{confirmButtonText:"确定",type:"success",callback:function(t){e.getTasksByCatalog(e.rwlx)}})})}).catch(function(){}):"changeDate"==t.type&&(this.form.startDate=t.jhksrq,this.form.endDate=t.jhjsrq,this.dialogchangeDateVisible=!this.dialogchangeDateVisible,this.lcbTask=t)),this.$emit("handleDialog",t)},AddTaskCommit:function(t){var e=this;Object(l.a)(JSON.parse(t)).then(function(t){var s=t.data;"success"==s.state?(e.dialogAddTaskVisible=!1,e.$alert("添加任务成功","提示",{confirmButtonText:"确定",type:"success",callback:function(t){e.getTasksByCatalog(e.rwlx),e.commitSuccess=!e.commitSuccess}})):e.$alert(s.msg,"提示",{confirmButtonText:"确定",type:"error"})})},handleCommitTZJH:function(){var t=this;this.$confirm("请慎重修改此日期","提示",{confirmButtonText:"确定修改",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.a)({xmbh:t.lcbTask.xmbh,lcbbh:t.lcbTask.lcbbh,startDate:t.form.startDate,endDate:t.form.endDate,sm:t.form.sm}).then(function(e){"success"==e.data.state&&(t.dialogchangeDateVisible=!1,t.getTasksByCatalog(t.rwlx),t.$alert("修改成功","提示",{confirmButtonText:"确定",type:"success",callback:function(e){t.form.sm=""}}))})}).catch(function(){})},handleCloseTZJH:function(){this.dialogchangeDateVisible=!this.dialogchangeDateVisible},handleTaskinfo:function(t){t.lcbindex=this.index,this.$emit("handleTaskinfo",t)},addItemTask:function(t){t.target.getAttribute("data-indx");this.data=this.milestone,this.dialogAddTaskVisible=!this.dialogAddTaskVisible,this.getTasksByCatalog("1"),this.$emit("addItemTask",this.data)},changeTaskstate:function(t){this.getTasksByCatalog(this.rwlx)},getTasksByCatalog:function(t){var e=this;Object(l.g)({xmbh:this.milestone.xmbh,catalog:this.milestone.catalog,catalogId:this.milestone.catalogId,cpmc:this.milestone.cpmc,cpbh:this.milestone.cpbh,catalogType:this.milestone.catalogType,curPage:1,pageSize:99999,taskType:t||"",rwzt:this.rwzt||"",keyword:""}).then(function(s){var a=s.data;"success"==a.state&&(e.LcbTaskDatas=a.data.rows,"1"==t&&(e.LcbArr=a.data.rows))})}},watch:{TaskDatas:function(t,e){this.LcbTaskDatas=t}},components:{TaskLabel:v,addItemTask:p}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"milestone_stage"},[s("div",{staticClass:"milestone_stage_top"},[s("h4",{attrs:{title:t.milestone.catalog}},[t._v(t._s(t.milestone.catalog))]),t._v(" "),s("span",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"14px",color:"#409EFF"},attrs:{title:"添加任务","data-indx":t.index},on:{click:t.addItemTask}},[t._v("新增")])]),t._v(" "),s("div",{staticStyle:{height:"95%","overflow-y":"auto","overflow-x":"hidden"},attrs:{id:"my-scrollbar"+t.index}},[s("task-label",{attrs:{TaskDatas:t.LcbTaskDatas},on:{changeTaskstate:t.changeTaskstate,handleTaskDialog:t.handleTaskDialog,handleTaskinfo:t.handleTaskinfo}})],1),t._v(" "),s("el-dialog",{attrs:{title:"添加任务",visible:t.dialogAddTaskVisible,"append-to-body":"",width:"750px","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogAddTaskVisible=e}}},[s("addItemTask",{attrs:{lcbrw:t.LcbArr,dialogVisible:t.commitSuccess,lcbinfo:t.milestone},on:{AddTaskCommit:t.AddTaskCommit}})],1),t._v(" "),s("el-dialog",{attrs:{title:"调整计划",visible:t.dialogchangeDateVisible,"append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogchangeDateVisible=e}}},[s("el-form",{ref:"form",staticStyle:{padding:"10px 20px 10px 0"},attrs:{model:t.form,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"承诺开始日期"}},[s("el-date-picker",{attrs:{type:"date",size:"small",placeholder:"开始日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.startDate,callback:function(e){t.$set(t.form,"startDate",e)},expression:"form.startDate"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"承诺结束日期"}},[s("el-date-picker",{attrs:{type:"date",size:"small",placeholder:"结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.endDate,callback:function(e){t.$set(t.form,"endDate",e)},expression:"form.endDate"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"说明"}},[s("el-input",{attrs:{type:"textarea",resize:"none",rows:5},model:{value:t.form.sm,callback:function(e){t.$set(t.form,"sm",e)},expression:"form.sm"}})],1),t._v(" "),s("div",{staticStyle:{"text-align":"right"}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleCommitTZJH}},[t._v("提交")]),t._v(" "),s("el-button",{attrs:{type:"info",size:"small"},on:{click:t.handleCloseTZJH}},[t._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var x=s("Z0/y")(y,_,!1,function(t){s("T8sv")},"data-v-21affd98",null);e.a=x.exports},DezX:function(t,e){},EAaq:function(t,e){},FcSl:function(t,e,s){"use strict";s("GRVU");var a={data:function(){return{fileList:{},fileBread:[],fjbh:"",fjobj:{},baseUrl:null}},props:{xmbh:{type:String,default:""}},mounted:function(){this.baseUrl=window.baseurl,this.openTemplateFolder()},methods:{openTemplateFolder:function(t){var e=this;this.$get(this.API.openTemplateFolder,{path:t}).then(function(t){"success"==t.state&&(e.fileList=t.data)})},handleAllfile:function(){this.openTemplateFolder(),this.fileBread=[]},handleBreadFile:function(t){var e=this,s=t.currentTarget.getAttribute("data-fjbh");s!=this.fjbh&&this.$get(this.API.openTemplateFolder,{path:s}).then(function(t){"success"==t.state&&(e.fileList=t.data,e.fileBread.forEach(function(t,a,i){t.fjbh.includes(s)&&e.fileBread.splice(a+1,9999)}))})},handleFile:function(t){var e=this,s=t.currentTarget.getAttribute("data-type"),a=t.currentTarget.getAttribute("data-fjbh"),i=t.currentTarget.getAttribute("data-fj");null!=i&&0==i.split("&")[1]||(null==s&&(this.fjbh=a,this.fjobj={fjmc:i.split("&")[0],fjbh:a}),this.$get(this.API.openTemplateFolder,{path:a}).then(function(t){"success"==t.state&&(e.fileList=t.data,"back"==s?e.fileBread.pop():1==i.split("&")[1]&&e.fileBread.push(e.fjobj))}))}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{width:"80%",margin:"10px auto 0",padding:"20px 10px",background:"#fff","border-radius":"5px","box-shadow":"0 0 5px #ccc"}},[s("ul",{staticClass:"file-list"},[s("div",{staticStyle:{"padding-bottom":"10px","border-bottom":"1px solid #ccc"}},[s("span",{staticClass:"file-breadcrumb",on:{click:t.handleAllfile}},[t._v("全部目录")]),t._v(" "),t._l(t.fileBread,function(e,a){return s("span",{staticClass:"file-breadcrumb",attrs:{"data-fjbh":e.fjbh},on:{click:t.handleBreadFile}},[s("span",{staticClass:"el-icon-arrow-right"}),t._v(" "),s("span",[t._v(t._s(e.fjmc))])])})],2),t._v(" "),t._m(0),t._v(" "),"-1"!=t.fileList.parentwid&&"{}"!=JSON.stringify(t.fileList)?s("li",{staticClass:"file-back",attrs:{"data-fjbh":t.fileList.parentwid,"data-type":"back"},on:{click:t.handleFile}},[t._m(1)]):t._e(),t._v(" "),t._l(t.fileList.files,function(e,a){return s("li",{staticStyle:{padding:"0 20px",display:"flex"},attrs:{"data-fj":e.fjmc+"&"+e.sfwjml,"data-fjbh":e.fjbh},on:{click:t.handleFile}},[s("div",{staticStyle:{width:"40%",padding:"6px 0"}},[1==e.sfwjml?s("div",[s("span",[s("img",{staticStyle:{float:"left"},attrs:{src:"static/img/files.png",alt:""}}),t._v(" "),s("span",{staticStyle:{float:"left","margin-top":"10px"}},[t._v(t._s(e.fjmc))])])]):t._e(),t._v(" "),0==e.sfwjml?s("div",[s("a",{attrs:{href:t.baseUrl+"attachment/downloadTemplateFile.do?path="+e.fjbh,target:"blank"}},[s("span",{staticClass:"el-icon-document",staticStyle:{"font-size":"32px",margin:"0 10px 0 0"}}),t._v(" "),s("span",{staticStyle:{"margin-top":"10px"}},[t._v(t._s(e.fjmc))])])]):t._e()]),t._v(" "),s("div",{staticClass:"file-size",staticStyle:{"line-height":"44px"}},[t._v("\n        "+t._s(e.fjdx_display)+"\n      ")]),t._v(" "),s("div",{staticClass:"file-cjsj",staticStyle:{"line-height":"44px"}},[t._v("\n        "+t._s(null==e.xgsj?"--":e.xgsj)+"\n      ")])])})],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"file-header"},[e("p",{staticClass:"file-name"},[this._v("文件名")]),this._v(" "),e("p",{staticClass:"file-size"},[this._v("文件大小")]),this._v(" "),e("p",{staticClass:"file-cjsj",staticStyle:{"padding-right":"30px"}},[this._v("修改时间")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{padding:"10px 20px"}},[e("span",[e("img",{staticStyle:{float:"left"},attrs:{src:"static/img/back.png",alt:""}}),this._v(" "),e("span",{staticStyle:{float:"left","margin-top":"10px"}},[this._v("上一级")])])])}]};var l=s("Z0/y")(a,i,!1,function(t){s("YfCi")},"data-v-7637cb40",null);e.a=l.exports},Hfv2:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABGdBTUEAALGPC/xhBQAAAYRJREFUSA3NVq9PAzEUvpIpCMkQs2CZJMPM8TdMoxBIgkfPYyEBg2f/An4s4AYWOzEFhiXH9yW9pOv1XR/tltxL3q59v76+r+3dikKQsiyH0Cn0F5orSxR4gO6bEB4cPdg/oQchf4btcUdIPoN902CEGkmA2wAjYLfDX4V8IOZcEeeH9GF4co0d7NelNSyMMRPX6Yy/4Zs5c9UQtWtx7PDOWllQAqwlphq0lA6w2vpyE1ClQ5NQSpei7fAH5ea6kmtRe5gduxYt4ByH5tRN1IyxCwPEvbqxraW0h9VW18ddcGx85AdoKT1EYnV9/Br/mreW0i+0MY60cgM/mWgULaV87d03VbJ7HAVsLaV9dLB2nwLd8ssQFYnSlZe5izkvca6sJErfcisL+e9BQBwQAt4KSanmJRKvDPam+uzM/PclXCcIokrUa8EJ9oL6i4KAVmKHQlu8MS5IaWNGppOUst0uNPWbJy1hDAonvpN78wy9gG7q6FcY/DNdEwJeW+sIT3a6VfkDWpmp/GMOYfwAAAAASUVORK5CYII="},IcVQ:function(t,e){},Isrd:function(t,e){},JJE8:function(t,e,s){"use strict";var a=s("UiN9"),i=s("9A7R"),l=s("FqQf"),n=s("oFuF"),c=s("dAwu"),r=s("1bZv"),o=s("u4Y3"),h={data:function(){return{visible:this.show,dialogEditTaskVisible:!1,cpinfo:{},tableData:[]}},methods:{handleClick:function(t){this.cpinfo=t,this.dialogEditTaskVisible=!this.dialogEditTaskVisible},changeCPzrr:function(){this.dialogEditTaskVisible=!1,this.visible=!1},getProjectCatalog:function(){var t=this;Object(r.a)({xmbh:this.xmbh}).then(function(e){var s=e.data;"success"==s.state&&s.data&&(t.tableData=s.data)})}},props:{show:{type:Boolean,default:!1},xmbh:{type:String,default:""}},watch:{show:function(t,e){this.visible=this.show,t&&this.getProjectCatalog()}},components:{enditTaskInfo:o.a}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-dialog",{attrs:{title:"产品列表",width:"700px",top:"30px",visible:t.visible,"append-to-body":!0,"close-on-click-modal":!1,show:t.show},on:{"update:visible":function(e){t.visible=e},close:function(e){t.$emit("update:show",!1)}}},[s("div",{staticStyle:{padding:"15px"}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","max-height":500}},[s("el-table-column",{attrs:{prop:"cp_display",label:"产品","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){t.handleClick(e.row)}}},[t._v("修改")])]}}])})],1)],1)]),t._v(" "),s("el-dialog",{attrs:{width:"700px",title:"修改产品信息",visible:t.dialogEditTaskVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogEditTaskVisible=e}}},[s("enditTaskInfo",{attrs:{xmbh:t.xmbh,cpinfo:t.cpinfo,dialogEditTaskVisible:t.dialogEditTaskVisible},on:{changeCPzrr:t.changeCPzrr}})],1)],1)},staticRenderFns:[]};var u=s("Z0/y")(h,d,!1,function(t){s("wHbX")},"data-v-12b489b2",null).exports,m=(s("aozt"),s("DEjr"),{data:function(){return{visible:this.show,upload_url:"123",uploadForm:new FormData,form:{cnwcrq:"",sm:""},files:[]}},methods:{handleCloseDialog:function(){this.visible=!1},handleCommitMilestone:function(){this.form.cnwcrq?this.form.sm?this.$emit("handleCommitXmbw",this.form):this.$alert("请填写备忘说明","提示",{confirmButtonText:"确定",type:"warning"}):this.$alert("请选择承诺完成日期","提示",{confirmButtonText:"确定",type:"warning"})}},props:{show:{type:Boolean,default:!1}},watch:{show:function(t,e){this.visible=this.show,t||(this.form.cnwcrq="",this.files=[],this.uploadForm=new FormData)}},components:{}}),p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-dialog",{attrs:{title:"项目备忘",width:"800px",visible:t.visible,"append-to-body":!0,"close-on-click-modal":!1,show:t.show},on:{"update:visible":function(e){t.visible=e},close:function(e){t.$emit("update:show",!1)}}},[s("div",{staticStyle:{padding:"20px"}},[s("p",[s("span",{staticClass:"filter-weight before-require",staticStyle:{display:"inline-block",width:"140px"},attrs:{"text-right":""}},[t._v("备忘承诺完成时间：")]),t._v(" "),s("el-date-picker",{attrs:{size:"mini",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.form.cnwcrq,callback:function(e){t.$set(t.form,"cnwcrq",e)},expression:"form.cnwcrq"}})],1),s("br"),t._v(" "),s("p",{attrs:{flex:""}},[s("span",{staticClass:"filter-weight before-require",staticStyle:{display:"inline-block",width:"140px"},attrs:{"text-right":""}},[t._v("说明：")]),t._v(" "),s("el-input",{staticStyle:{width:"600px"},attrs:{type:"textarea",rows:3,placeholder:"请输入说明内容"},model:{value:t.form.sm,callback:function(e){t.$set(t.form,"sm",e)},expression:"form.sm"}})],1)]),t._v(" "),s("div",{staticClass:"pd-10",attrs:{"text-right":""}},[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleCommitMilestone}},[t._v("提交")]),t._v(" "),s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:t.handleCloseDialog}},[t._v("关闭")])],1)])],1)},staticRenderFns:[]};var f=s("Z0/y")(m,p,!1,function(t){s("XiIa")},"data-v-412194ba",null).exports,b={data:function(){return{lcbjlShow:!1,cplistShow:!1,xmbwShow:!1,lcbbh:"",checkList:[],xmlbList:[],keyword:"",cnkssj:"",cnjssj:"",sjkssj:"",sjjssj:"",total:null,pageSize:12,currentPage:1,tableData3:[],totalWgl:"",multipleSelection:[],planVisible:!1,milestoneVisible:!1,ishownTZJH:!0,form:{startDate:"",endDate:"",sm:""},lcbbhArr:[],groupTag:"",ishow:!0,zrrShow:!0}},props:{xmbh:{type:String,default:""},xmjl:{type:String,default:""}},methods:{handleCheckRrecord:function(t){this.lcbbh=t.lcbbh,this.lcbjlShow=!this.lcbjlShow},handleCommitMilestone:function(){this.milestoneVisible=!1,this.queryMilestoneData(this.currentPage)},handleCommitXmbw:function(t){var e=this;this.$post(this.API.addMemo,{xmbh:this.xmbh,bwcnwcsj:t.cnwcrq,sm:t.sm}).then(function(s){"success"==s.state?(e.$alert("添加成功","提示",{confirmButtonText:"确定",type:"success"}),e.xmbwShow=!1):1==s.errcode?e.$confirm("备忘已存在，是否覆盖?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$post(e.API.addMemo,{xmbh:e.xmbh,fj:t.fileList,bwcnwcsj:t.cnwcrq,sffg:1}).then(function(t){"success"==t.state?(e.$alert("添加成功","提示",{confirmButtonText:"确定",type:"success"}),e.xmbwShow=!1):(e.$alert(t.msg,"提示",{confirmButtonText:"确定",type:"error"}),e.xmbwShow=!1)})}).catch(function(){e.xmbwShow=!1}):(e.$alert(s.msg,"提示",{confirmButtonText:"确定",type:"error"}),e.xmbwShow=!1)})},checkboxInit:function(t,e){return"计划中"!=t.zt&&"处理中"!=t.zt?0:1},handleClose:function(){this.planVisible=!1},handleCommit:function(){var t=this;Object(a.a)({xmbh:this.xmbh,lcbbh:this.lcbbhArr.join(","),startDate:this.form.startDate,endDate:this.form.endDate,sm:this.form.sm}).then(function(e){"success"==e.data.state&&(t.planVisible=!t.planVisible,t.$alert("修改成功","提示",{confirmButtonText:"确定",type:"success",callback:function(e){t.form.sm="",t.queryMilestoneData(1)}}))})},commitLcb:function(){var t=this;0!=this.multipleSelection.length?Object(a.c)({lcbbh:this.lcbbhArr.join(",")}).then(function(e){var s=e.data;"success"==s.state&&(-1==s.data.lcbType?t.$alert("不允许同时提交多个项目的整体验收里程碑！","提示",{confirmButtonText:"确定",type:"warning"}):t.milestoneVisible=!t.milestoneVisible)}):this.$alert("请选择里程碑","提示",{confirmButtonText:"确定",type:"warning"})},handleChangeZrr:function(){this.cplistShow=!this.cplistShow},handleAddbw:function(){this.xmbwShow=!this.xmbwShow},exportLcb:function(){this.cnkssj=this.cnkssj?this.cnkssj:"",this.cnjssj=this.cnjssj?this.cnjssj:"",this.sjkssj=this.sjkssj?this.sjkssj:"",this.sjjssj=this.sjjssj?this.sjjssj:"",window.open(window.baseurl+"milestone/exportMilestoneData.do?xmbh="+this.xmbh+"&keyword="+this.keyword+"&zt="+this.checkList.join(",")+"&startCnjssj="+this.cnkssj+"&endCnjssj="+this.cnjssj+"&startSjjssj="+this.sjkssj+"&endSjjssj="+this.sjjssj+"&nrxmlb="+this.xmlbList.join(","))},handleSearchLcb:function(){this.queryMilestoneData(1)},searchLcbContent:function(){this.queryMilestoneData(1)},handleCurrentChange:function(t){this.queryMilestoneData(t),this.currentPage=t},handleCheckbox:function(t){this.queryMilestoneData(1)},handleXMlb:function(t){this.queryMilestoneData(1)},changeCnStartDate:function(){this.queryMilestoneData(1)},changeCnEndDate:function(){this.queryMilestoneData(1)},changeSjStartDate:function(){this.queryMilestoneData(1)},changeSjEndDate:function(){this.queryMilestoneData(1)},handleSelectionChange:function(t){var e=this;this.multipleSelection=t,this.lcbbhArr=[],0!=this.multipleSelection.length?this.multipleSelection.forEach(function(t,s,a){t.lcbms.includes("整体验收")?e.ishownTZJH=!1:e.ishownTZJH=!0,e.lcbbhArr.push(t.lcbbh)}):this.ishownTZJH=!0},queryMilestoneData:function(t){var e=this;Object(a.d)({curPage:t,pageSize:this.pageSize,xmbh:this.xmbh,keyword:this.keyword,zt:0==this.checkList.length?"":this.checkList.join(","),startCnjssj:this.cnkssj?this.cnkssj:"",endCnjssj:this.cnjssj?this.cnjssj:"",startSjjssj:this.sjkssj?this.sjkssj:"",endSjjssj:this.sjjssj?this.sjjssj:"",nrxmlb:0==this.xmlbList.length?"":this.xmlbList.join(",")}).then(function(t){var s=t.data;if("success"==s.state){e.totalWgl=s.data.totalWgl;var a=s.data.data.rows;a.forEach(function(t,e,s){s[e].wglv=Object(n.o)(t.wglv),s[e].wglg=Object(n.o)(t.wglg),t.zt="1"==t.zt?"计划中":"2"==t.zt?"处理中":"3"==t.zt?"已完成":"4"==t.zt?"停滞":"5"==t.zt?"关闭":"6"==t.zt?"取消":"7"==t.zt?"待定":"完成待确认"}),e.tableData3=a,e.total=s.data.data.records}})}},mounted:function(){this.groupTag=JSON.parse(sessionStorage.userInfo).userGroupTag,-1!=this.groupTag.indexOf("JZGCRY")?this.ishow=!0:this.ishow=!1,-1!=this.groupTag.indexOf("JYGL")||-1!=this.groupTag.indexOf("QYZ")||-1!=this.groupTag.indexOf("ZDDZ")||this.xmjl==sessionStorage.username?this.zrrShow=!0:this.zrrShow=!1,this.queryMilestoneData(1)},components:{pagination:i.a,commitMilestone:l.a,lcbjlDialog:c.a,cpListDialog:u,xmbwDialog:f}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"milestone-manage"},[s("section",{staticStyle:{"border-radius":"5px",padding:"8px 0",background:"#fff","box-shadow":"0 0 5px #ccc"}},[s("div",{staticClass:"filter"},[s("span",{staticClass:"filter-title"},[t._v("高级查询: ")]),t._v(" "),s("el-input",{staticStyle:{width:"50%"},attrs:{size:"mini",placeholder:"请输入项目内容/里程碑描述","suffix-icon":"el-icon-search"},on:{change:t.searchLcbContent},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),t._v("\n      　\n      "),s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handleSearchLcb}},[t._v("查询")])],1),t._v(" "),s("div",{staticClass:"filter",staticStyle:{display:"flex"}},[s("span",{staticClass:"filter-title"},[t._v("里程碑状态:")]),t._v(" "),s("el-checkbox-group",{on:{change:t.handleCheckbox},model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},[s("el-checkbox",{attrs:{label:"1"}},[t._v("计划中")]),t._v(" "),s("el-checkbox",{attrs:{label:"2"}},[t._v("处理中")]),t._v(" "),s("el-checkbox",{attrs:{label:"3"}},[t._v("已完成")]),t._v(" "),s("el-checkbox",{attrs:{label:"4"}},[t._v("停滞")]),t._v(" "),s("el-checkbox",{attrs:{label:"5"}},[t._v("关闭")]),t._v(" "),s("el-checkbox",{attrs:{label:"6"}},[t._v("取消")]),t._v(" "),s("el-checkbox",{attrs:{label:"7"}},[t._v("待定")]),t._v(" "),s("el-checkbox",{attrs:{label:"9"}},[t._v("完成待确认")])],1)],1),t._v(" "),s("div",{staticClass:"filter",staticStyle:{display:"flex"}},[s("span",{staticClass:"filter-title"},[t._v("项目类别:")]),t._v(" "),s("el-checkbox-group",{on:{change:t.handleXMlb},model:{value:t.xmlbList,callback:function(e){t.xmlbList=e},expression:"xmlbList"}},[s("el-checkbox",{attrs:{label:"软件"}},[t._v("软件")]),t._v(" "),s("el-checkbox",{attrs:{label:"集成"}},[t._v("集成")]),t._v(" "),s("el-checkbox",{attrs:{label:"软件服务"}},[t._v("软件服务")]),t._v(" "),s("el-checkbox",{attrs:{label:"集成服务"}},[t._v("集成服务")])],1)],1),t._v(" "),s("div",{staticClass:"filter"},[s("span",{staticClass:"filter-title"},[t._v("承诺结束时间:")]),t._v(" "),s("el-date-picker",{attrs:{type:"date",size:"mini",placeholder:"开始日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:t.changeCnStartDate},model:{value:t.cnkssj,callback:function(e){t.cnkssj=e},expression:"cnkssj"}}),t._v("\n       至 \n      "),s("el-date-picker",{attrs:{type:"date",size:"mini",placeholder:"结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:t.changeCnEndDate},model:{value:t.cnjssj,callback:function(e){t.cnjssj=e},expression:"cnjssj"}})],1),t._v(" "),s("div",{staticClass:"filter"},[s("span",{staticClass:"filter-title"},[t._v("实际结束时间:")]),t._v(" "),s("el-date-picker",{attrs:{type:"date",size:"mini",placeholder:"开始日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:t.changeSjStartDate},model:{value:t.sjkssj,callback:function(e){t.sjkssj=e},expression:"sjkssj"}}),t._v("\n       至 \n      "),s("el-date-picker",{attrs:{type:"date",size:"mini",placeholder:"结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:t.changeSjEndDate},model:{value:t.sjjssj,callback:function(e){t.sjjssj=e},expression:"sjjssj"}})],1)]),t._v(" "),s("section",{staticClass:"milestone_tabel"},[s("div",{staticStyle:{padding:"0 10px 10px"}},[s("p",{staticStyle:{margin:"10px 0 !important"}},[t.ishow?s("el-button",{attrs:{size:"mini",type:"success"},on:{click:t.commitLcb}},[t._v("提报里程碑")]):t._e(),t._v(" "),t.ishow?s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.exportLcb}},[t._v("导出客户签字项目计划")]):t._e(),t._v(" "),t.zrrShow?s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handleChangeZrr}},[t._v("变更责任人")]):t._e(),t._v(" "),s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handleAddbw}},[t._v("添加备忘")]),t._v(" "),t.ishow?s("span",{staticStyle:{float:"right","margin-top":"5px"}},[s("span",{staticClass:"filter-weight"},[t._v("合计完工量 : ")]),t._v(" "),s("span",{staticStyle:{color:"#f00","font-size":"18px"}},[t._v(t._s(t.totalWgl<1e4?t.totalWgl:t.totalWgl<1e8?(t.totalWgl/1e4).toFixed(4):(t.totalWgl/1e8).toFixed(4))+" ")]),t._v(t._s(t.totalWgl<1e4?"元":t.totalWgl<1e8?"万元":"亿"))]):t._e()],1),t.ishow?s("p",{staticStyle:{color:"#aaa","font-size":"12px"}},[t._v("说明：整体里程碑不允许调整计划，里程碑调整需要工程总确认后才生效。")]):t._e(),t._v(" "),s("p"),t._v(" "),s("el-table",{ref:"multipleTable",attrs:{data:t.tableData3,border:"","tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[t.ishow?s("el-table-column",{attrs:{type:"selection","max-width":"80",selectable:t.checkboxInit}}):t._e(),t._v(" "),s("el-table-column",{attrs:{prop:"xmnr_display","min-width":"160",label:"项目内容","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{staticStyle:{"text-align":"left"},attrs:{prop:"lcbms_display","min-width":"180",label:"里程碑描述","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"nrxmlb","min-width":"90",label:"项目类别","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{sortable:"",label:"里程碑状态",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},["关闭"==e.row.zt?s("el-tag",{attrs:{size:"small",title:"点击查看操作详情",type:"success"},nativeOn:{click:function(s){t.handleCheckRrecord(e.row)}}},[t._v(t._s(e.row.zt))]):t._e(),t._v(" "),"关闭"!=e.row.zt?s("el-tag",{attrs:{size:"small",title:"点击查看操作详情",type:"danger"},nativeOn:{click:function(s){t.handleCheckRrecord(e.row)}}},[t._v(t._s(e.row.zt))]):t._e()],1)]}}])}),t._v(" "),t.ishow?s("el-table-column",{attrs:{prop:"wglv",label:"完工率(%)",width:"100","show-overflow-tooltip":""}}):t._e(),t._v(" "),t.ishow?s("el-table-column",{attrs:{prop:"wglg",label:"完工量(元)",width:"100"}}):t._e(),t._v(" "),s("el-table-column",{attrs:{prop:"cnjssj",sortable:"",label:"承诺结束时间",width:"150"}}),t._v(" "),s("el-table-column",{attrs:{prop:"sjjssj",sortable:"",label:"实际结束时间",width:"150"}}),t._v(" "),s("el-table-column",{attrs:{prop:"zzrxm",label:"责任人",width:"100"}})],1)],1),t._v(" "),s("div",{staticStyle:{padding:"5px 0","text-align":"right"}},[t.total>12?s("pagination",{attrs:{currentPage:t.currentPage,pageSize:t.pageSize,total:t.total},on:{handleCurrentChange:t.handleCurrentChange}}):t._e()],1)]),t._v(" "),s("el-dialog",{attrs:{title:"调整计划",visible:t.planVisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(e){t.planVisible=e}}},[s("span",{staticStyle:{color:"#aaa","font-size":"12px","padding-left":"20px"}},[t._v("说明：整体里程碑不允许调整计划，里程碑调整需要工程总确认后才生效。")]),t._v(" "),s("el-form",{ref:"form",staticStyle:{padding:"10px 20px 10px 0"},attrs:{model:t.form,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"承诺开始日期"}},[s("el-date-picker",{attrs:{type:"date",size:"small",placeholder:"结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.startDate,callback:function(e){t.$set(t.form,"startDate",e)},expression:"form.startDate"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"承诺结束日期"}},[s("el-date-picker",{attrs:{type:"date",size:"small",placeholder:"结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.endDate,callback:function(e){t.$set(t.form,"endDate",e)},expression:"form.endDate"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"说明"}},[s("el-input",{attrs:{type:"textarea",resize:"none",rows:5},model:{value:t.form.sm,callback:function(e){t.$set(t.form,"sm",e)},expression:"form.sm"}})],1),t._v(" "),s("div",{staticStyle:{"text-align":"right"}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleCommit}},[t._v("提交")]),t._v(" "),s("el-button",{attrs:{type:"info",size:"small"},on:{click:t.handleClose}},[t._v("取消")])],1)],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"提报里程碑","close-on-click-modal":!1,visible:t.milestoneVisible,width:"600px",top:"50px"},on:{"update:visible":function(e){t.milestoneVisible=e}}},[s("commitMilestone",{attrs:{shown:t.milestoneVisible,xmbh:t.xmbh,taskLcbbhArr:t.lcbbhArr},on:{handleCommitMilestone:t.handleCommitMilestone}})],1),t._v(" "),s("lcbjlDialog",{attrs:{show:t.lcbjlShow,lcbbh:t.lcbbh},on:{"update:show":function(e){t.lcbjlShow=e}}}),t._v(" "),s("cpListDialog",{attrs:{show:t.cplistShow,xmbh:t.xmbh},on:{"update:show":function(e){t.cplistShow=e}}}),t._v(" "),s("xmbw-dialog",{attrs:{show:t.xmbwShow},on:{"update:show":function(e){t.xmbwShow=e},handleCommitXmbw:t.handleCommitXmbw}})],1)},staticRenderFns:[]};var g=s("Z0/y")(b,v,!1,function(t){s("hu4V")},"data-v-10d0fb0e",null);e.a=g.exports},LhK7:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAcCAYAAACUJBTQAAAABGdBTUEAALGPC/xhBQAAAZJJREFUSA29lkFKw0AUhhvroqIUj1Dd6N4LuHLhBURxKSKKeg0REXEtrZcQvIE70YXgyisYEXGjjt+fTiSdmnSSZvrgz2Re3/u/JDNN22g4YYx5Qoo356PCqeqTLvrdwik3EWI+LVOuIGJYRPOohRRN8iv9U69j01a1bF/M/CWKIiNABz2iECHfTsThBuK617VWK7oV5J3euWr9Xl2fgnxTGnQDBDVP73MiEG1hbV/FB3pOzuo5LGMzm1ixJj9IcVePd99Ffokrh4k8rlogXOxS0VMYGwLgEsA942oeaCwIxhcYH6IZtJAH0bur0sLTd44U6t9xAeT+Fr4QQuEaGrpbcmdIIcCuC9Cc/ABExYqBLcz8KMka02VMv0tqPrV5Afb+A5SBbGDyZQ2vGPWeO7FzDft5AG+ILdzELAU9ZAAHRYBSEFu8lQGJo900MqgbvSZZFxq2ke7oOJsvOi8NkRlNeuF5RxYytD3zXPhDUPkN7Q3Jg/vktS1fKdRfoVC/J7GedQ+FjK4gbXSN4ppJ8uuh9i8bud+jrAz6AAAAAABJRU5ErkJggg=="},OX8b:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("3cXf"),i=s.n(a),l=s("hRKE"),n=s.n(l),c=s("a3Yh"),r=s.n(c),o=(s("1vsE"),s("8Hm5")),h=s("W08m"),d=s("X2aY"),u=s("9A7R"),m=s("ifEj"),p=s("u4Y3"),f=s("j2G5"),b=s("qPnF"),v=s("p3vS"),g=s("FcSl"),y=s("xE7f"),_=s("JJE8"),x=s("FqQf"),k=s("2TTE"),w=s("g3dG"),C=s("fsyJ"),j=s("1bZv"),z=s("UiN9"),T=s("Q3je"),S=s("GRVU"),A=s("YkBq"),q=s("IfOk"),D=s("aozt"),L=s.n(D),O=(s("DEjr"),s("oFuF")),I={data:function(){var t;return t={errorImg:'this.src="'+s("eJJ4")+'"',value8:"",taskSSry:[],options:[{label:"未完成",value:1},{label:"已完成",value:2}],optionsSort:[{label:"按优先级排序",value:"1"},{label:"按截止时间排序",value:"2"},{label:"按创建时间最近排序",value:"3"},{label:"按项目名称排序",value:"4"}],rwlxOptions:[{label:"全部",value:""},{label:"里程碑任务",value:"1"},{label:"工程任务",value:"3"},{label:"客户任务",value:"5"},{label:"个人任务",value:"9"}],rwztOptions:[{label:"全部",value:""},{label:"已完成",value:"2"},{label:"未完成",value:"1"}],rwlxValue:"",rwztValue:"",activeName2:"first",chatId:"",chatName:"",taskList:[],listt0:[],list0:[],fileList:[],value5:[],value11:[],shownindex:0,dialogTableVisible:!1,dialogDailyVisible:!1,dialogCommitTaskVisible:!1,dialogEditTaskVisible:!1,dialogItemUserVisible:!1,dialogAddTaskVisible:!1,dialogEditLcbTaskVisible:!1,dialogchangeDateVisible:!1,commitlcbVisible:!1,dingdingGroupVisible:!1,dynamicTags:[],selectShow:!1,ProcessValue:"",name:"",checkShwon:!1,partyArr:[],activeName:"first",wcValue:0,sortValue:1,ViewTransition:!0,formValue:"",taskName:"测试任务1111",checked2:!0,userListShow:!1,fbbh:"",xmbh:"",milestones:[],TaskDatas:[],taskActive:"",indexArr:[],LcbrwArr:[],addTaskCPxx:{},editlcbArr:[],myTaskArr:[],taskState:1,orderby:1,pageSize:12,records:null,tasksInfo:{},lcbTasks:{},editTaskInfo:{},dialog:!0,TaskProcess:{},cpinfo:{},userKeyword:"",taskCyz:[],xgssry:!0,xztaskSSry:{},fbcpmc:"",fbcpbh:"",xmkbInfo:{},itemDetail:{},itemUserNum:null,taskDetailProcess:[],taskProcessNum:0,processTipshow:!0},r()(t,"fileList",[]),r()(t,"lcbTaskInfo",{}),r()(t,"taskcurPage",1),r()(t,"taskpageSize",8),r()(t,"curPageNum",0),r()(t,"tabsLabel",""),r()(t,"lcbTaskDetail",{}),r()(t,"filesArr",[]),r()(t,"fileData",[]),r()(t,"filesData",[]),r()(t,"date",""),r()(t,"closeDialogNum",1),r()(t,"dingdingShow",!1),r()(t,"lcbTemplateFile",[]),r()(t,"baseUrl",""),r()(t,"gcFiles",[]),r()(t,"Operatepower",!0),r()(t,"isAll",null),t},mounted:function(){this.fbcpmc="",this.fbcpbh="",this.userListShow=!1,this.baseUrl=window.baseurl,this.shownindex=0,this.taskActive="",this.ViewTransition=!0,this.xmkbInfo=this.$route.query,this.itemDetail=this.$route.params.detail,this.xmbh=this.$route.query.xmbh,this.isAll=JSON.parse(this.$route.query.isAll),this.tabsLabel="overview",document.title="项目详情-["+this.xmkbInfo.xmbh+"]"+this.xmkbInfo.xmmc,null!=window.userName?window.userName!=this.xmkbInfo.yfzrrxm?this.Operatepower=!1:this.Operatepower=!0:(window.userName=sessionStorage.getItem("username"),window.userName!=this.xmkbInfo.yfzrrxm?this.Operatepower=!1:this.Operatepower=!0),this.getItemUserNum()},methods:{handleChangeRwlx:function(t){this.getProjectCatalog()},handleChangeRwzt:function(t){this.getProjectCatalog()},checkSkipDetail:function(t){this.tabsLabel=t,"process"==this.tabsLabel&&this.getProjectCatalog()},handleCommitMilestone:function(){this.getMilestone(this.fbcpmc,this.fbcpbh),this.commitlcbVisible=!1},handleTabsClick:function(t){this.tabsLabel=t,"process"==t&&this.getProjectCatalog()},commitTaskProcess:function(){this.date=(new Date).getFullYear()+"-"+("0"+((new Date).getMonth()+1)).slice(-2)+"-"+("0"+(new Date).getDate()).slice(-2),this.ProcessValue?this.commitProcess(1):this.$alert("请输入过程内容","提示",{confirmButtonText:"确定",type:"warning"})},remindeTaskProcess:function(){this.date=(new Date).getFullYear()+"-"+("0"+((new Date).getMonth()+1)).slice(-2)+"-"+("0"+(new Date).getDate()).slice(-2),this.commitProcess(3)},commitProcess:function(t){var e=this;0!=this.fileData.length&&null!=this.fileData&&this.fileData.forEach(function(t,s,a){e.gcFiles.push({fjbh:t.split("|")[0],fjmc:t.split("|")[1]})}),Object(S.a)({xmbh:this.tasksInfo.xmbh,rwbh:this.tasksInfo.rwbh,gclx:t,gcms:this.ProcessValue,gcrq:this.date,gs:"",hfrbh:window.userName,hfrxm:window.userId,fjdata:this.fileData.join(",")}).then(function(s){var a=s.data;if("success"==a.state){var i={cjrxm:window.userName,cjrbh:window.userId,cjsj:Object(O.i)(new Date),gcms:e.ProcessValue,logo:window.logo,gclx:t,fjData:e.gcFiles};e.$alert(1==t?"发布成功":"催办成功","提示",{confirmButtonText:"确定",type:"success",callback:function(t){e.taskDetailProcess.unshift(i),e.ProcessValue="",e.fileList=[],e.fileData=[],e.gcFiles=[],e.filesData=[]}})}else e.$alert(a.msg,"提示",{confirmButtonText:"确定",type:"error"})})},handleRemove:function(t,e){var s=this;this.fileData.forEach(function(e,a,i){e.includes(t.name)&&s.fileData.splice(a,1)})},beforeUpload:function(t){var e=this;if(!(this.filesArr.length>0&&this.filesArr[0].name==t.name)){this.filesArr.push(t);var s=new FormData;return s.append("fileUpload",t),s.append("xmbh",this.xmbh),L.a.post(window.baseurl+"attachment/uploadAttach.do",s,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.fileData.push(t.data.data)}),!0}},handleChange:function(t,e){var s=[];this.filesData.push(t);for(var a=0,i=this.filesData.length;a<i;a++){for(var l=a+1;l<i;l++)this.filesData[a].name===this.filesData[l].name&&(l=++a);s.push(this.filesData[a])}this.fileList=s,this.$refs.upload.submit()},closeDialog:function(){this.dialog=!1},handleEditTaskSuc:function(){this.dialogEditLcbTaskVisible=!this.dialogEditLcbTaskVisible},selectHide:function(t){"el-input__inner"!=t.target.className&&(this.selectShow=!1,this.userListShow=!1)},searchPerson:function(t){t.cancelBubble=!0,this.selectShow=!0},getTaskinfo:function(t,e){this.fbcpmc=t.currentTarget.getAttribute("data-fbcp").split("&")[0],this.fbcpbh=t.currentTarget.getAttribute("data-fbcp").split("&")[1],this.getMilestone(this.fbcpmc,this.fbcpbh),this.ViewTransition=!0,this.shownindex=e,this.taskActive=" "},changeZrr:function(t,e){t.stopPropagation(),this.cpinfo=this.taskList[e],this.dialogEditTaskVisible=!this.dialogEditTaskVisible},changeCPzrr:function(t){this.dialogEditTaskVisible=!1,t.isJf||this.milestones.forEach(function(e,s,a){e.tasks.rows.forEach(function(e,s,a){9!=e.lx&&(e.ssrxm=t.xm)})})},handleDialog:function(t){"object"==(void 0===t?"undefined":n()(t))&&"daily"==t.type?(this.taskName=t.rwmc,this.TaskProcess=t,this.dialogDailyVisible=!this.dialogDailyVisible):"object"==(void 0===t?"undefined":n()(t))&&"commit"==t.type?(this.lcbTaskDetail=t,this.commitlcbVisible=!this.commitlcbVisible):"object"==(void 0===t?"undefined":n()(t))&&"edit"==t.type&&(this.getTasksByCatalog(t.catalog,t.catalogId,t.cpbh,t.cpmc,t.catalogType),this.editTaskInfo=t,this.dialog=!0,this.dialogEditLcbTaskVisible=!this.dialogEditLcbTaskVisible)},handleTaskinfo:function(t){var e=this;this.tasksInfo=t,this.taskDetailProcess=[],this.curPageNum=0,this.taskcurPage=1,Object(T.e)({rwbh:this.tasksInfo.rwbh}).then(function(t){var s=t.data;"success"==s.state&&(e.lcbTasks=s.data)}),9!=this.tasksInfo.lx?(Object(A.q)({xmbh:this.xmbh,cpbh:this.fbcpbh,cpmc:this.fbcpmc}).then(function(t){var s=t.data;"success"==s.state&&(e.taskCyz=[],"success"==s.state&&s.data.forEach(function(t,s,a){"参与者"==t.roleName&&(e.taskCyz.push(t),e.dynamicTags=e.taskCyz)}))}),Object(S.h)({rwbh:this.tasksInfo.rwbh}).then(function(t){var s=t.data;"success"==s.state&&(null!=s.data&&0!=s.data.length?e.lcbTemplateFile=s.data:e.lcbTemplateFile=[])})):Object(A.v)({rwbh:this.tasksInfo.rwbh,xmbh:this.tasksInfo.xmbh}).then(function(t){var s=t.data;e.taskCyz=[],"success"==s.state&&s.data.forEach(function(t,s,a){"参与者"==t.roleName&&(e.taskCyz.push(t),e.dynamicTags=e.taskCyz)})}),this.queryProjectParticipant(),this.queryTaskProcess(),this.processTipshow=!0,this.dialogTableVisible=!this.dialogTableVisible},showAllprocess:function(){this.taskcurPage+=1,this.queryTaskProcess(),this.processTipshow=!1},queryTaskProcess:function(){var t=this;Object(S.k)({curPage:this.taskcurPage,pageSize:this.taskpageSize,rwbh:this.tasksInfo.rwbh}).then(function(e){var s=e.data;"success"==s.state&&null!=s.data.rows&&(t.taskDetailProcess=t.taskDetailProcess.concat(s.data.rows),t.taskProcessNum=s.data.records,t.curPageNum+=s.data.rows.length)})},queryProjectParticipant:function(){var t=this;Object(A.r)({xmbh:this.xmbh}).then(function(e){var s=e.data;"success"==s.state&&(s.data.forEach(function(t,e,a){""==t.userName&&s.data.splice(e,1)}),t.list0=s.data,t.listt0=s.data)})},handleClose:function(t){var e=this;this.$confirm("是否删除此参与者?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(A.g)({xmbh:e.tasksInfo.xmbh,rwbh:e.tasksInfo.rwbh,yhbh:t.userId}).then(function(s){"success"==s.data.state&&e.dynamicTags.splice(e.dynamicTags.indexOf(t),1)})}).catch(function(){})},addUser:function(t){t.stopPropagation(),this.selectShow=!this.selectShow},handleDailyParper:function(t){this.taskName=t.rwmc,this.dialogDailyVisible=!this.dialogDailyVisible},handleCommitTask:function(t){},changeTaskStaus:function(t){var e=this,s="";s=1==t.split("&")[1]?2:1,Object(T.b)({rwbh:t.split("&")[0],state:s}).then(function(t){"success"==t.data.state&&e.getTasks(1)})},addItemTask:function(t){this.addTaskCPxx=t,this.getTasksByCatalog(t.catalog,t.catalogId,t.cpbh,t.cpmc,t.catalogType),this.dialogAddTaskVisible=!this.dialogAddTaskVisible},AddTaskCommit:function(t){var e=this;Object(T.a)(JSON.parse(t)).then(function(t){var s=t.data;"success"==s.state?(e.dialogAddTaskVisible=!1,e.$alert("添加任务成功","提示",{confirmButtonText:"确定",type:"success",callback:function(t){}})):e.$alert(s.msg,"提示",{confirmButtonText:"确定",type:"error"})})},addTaskParty:function(t){var e=this,s=t.currentTarget.getAttribute("data-label"),a=s.split("&")[2],i=s.split("&")[1],l=s.split("&")[0],n=[];this.dynamicTags.forEach(function(t,s,a){n.push(e.dynamicTags[s].userName)}),n.includes(s.split("&")[0])||(Object(A.d)({xmbh:this.xmbh,rwbh:this.tasksInfo.rwbh,yhbh:i,yhxm:l}).then(function(t){"success"==t.data.state&&e.dynamicTags.push(e.listt0[a])}),this.selectShow=!this.selectShow)},handleClick:function(t,e){this.getTasks(1)},handleSelectWc:function(t){this.taskState=t,this.getTasks(1)},handleSelectSort:function(t){this.orderby=t,this.getTasks(1)},handleCurrentChange:function(t){this.getTasks(t)},handleSubmit:function(t){var e=this;Object(S.a)({xmbh:this.TaskProcess.xmbh,rwbh:this.TaskProcess.rwbh,gclx:2,gcms:t.gcms,gcrq:t.gcrq,gs:t.gs,fjdata:t.fjdata}).then(function(t){"success"==t.data.state&&(e.$alert("添加成功","提示",{confirmButtonText:"确定",type:"success"}),e.dialogDailyVisible=!e.dialogDailyVisible)})},closeDailyParper:function(){this.closeDialogNum+=1},handleCell:function(t){var e=this;Object(T.e)({rwbh:t.rwbh}).then(function(t){var s=t.data;"success"==s.state&&(e.lcbTasks=s.data)}),Object(A.v)({rwbh:t.rwbh,xmbh:t.xmbh}).then(function(t){var s=t.data;e.taskCyz=[],"success"==s.state&&(0!=s.data.length?s.data.forEach(function(t,s,a){"参与者"==t.roleName&&(e.taskCyz.push(t),e.dynamicTags=e.taskCyz)}):e.dynamicTags=[])}),Object(A.r)({xmbh:t.xmbh}).then(function(t){var s=t.data;"success"==s.state&&(e.taskSSry=s.data)}),this.dialogTableVisible=!this.dialogTableVisible},checkMyTask:function(t){var e=t.currentTarget.getAttribute("data-type");this.ViewTransition=!1,this.shownindex="",this.taskActive=e,this.getTasks(1)},handleEditTaskCommit:function(t){this.dialogEditTaskVisible=!1},handleItemUser:function(){this.userListShow=!this.userListShow},handleAddDDgroup:function(){var t=this;this.dingdingGroupVisible=!this.dingdingGroupVisible,this.activeName2="first",Object(q.k)({xmbh:this.xmbh}).then(function(e){var s=e.data;"success"==s.state&&""!=s.data&&(t.chatId=s.data,t.dingdingShow=!0)})},handleSaveChat:function(){var t=this;"first"==this.activeName2?""==this.chatId?this.$alert("请输入钉钉群ID","提示",{confirmButtonText:"确定",type:"warning"}):Object(q.P)({xmbh:this.xmbh,chatId:this.chatId}).then(function(e){"success"==e.data.state&&(t.dingdingGroupVisible=!1,t.$alert("更新成功","提示",{confirmButtonText:"确定",type:"success"}))}):"second"==this.activeName2&&(""==this.chatName?this.$alert("请输入钉钉群名称","提示",{confirmButtonText:"确定",type:"warning"}):Object(q.g)({xmbh:this.xmbh,name:this.chatName}).then(function(e){"success"==e.data.state&&(t.dingdingGroupVisible=!1,t.$alert("创建成功","提示",{confirmButtonText:"确定",type:"success"}))}))},getMilestone:function(t,e){var s=this;Object(z.b)({xmbh:this.xmbh,cpbh:e,cpmc:t,curPage:1,pageSize:99999,taskType:this.rwlxValue,rwzt:this.rwztValue,keyword:""}).then(function(t){var e=t.data;"success"==e.state&&(s.milestones=e.data)})},getTasks:function(t){var e=this;Object(T.f)({curPage:t,pageSize:12,startDt:"",endDt:"first"==this.activeName?(new Date).getFullYear()+"-"+("0"+((new Date).getMonth()+1)).slice(-2)+"-"+("0"+(new Date).getDate()).slice(-2):"",state:this.taskState,orderby:this.orderby,keyword:""}).then(function(t){var s=t.data;"success"==s.state&&(e.records=s.data.records,e.myTaskArr=s.data.rows)})},changeTaskSSry:function(){var t=this;this.xgssry=!this.xgssry,this.xgssry||Object(A.r)({xmbh:this.xmbh}).then(function(e){var s=e.data;"success"==s.state&&(t.taskSSry=s.data)})},filterSearch:function(t){var e=this;Object(A.t)({curPage:1,pageSize:9999,xmbh:this.xmbh,Isexternal:"",keyword:t}).then(function(t){var s=t.data;"success"==s.state&&(e.taskSSry=s.data.rows)})},getTaskssry:function(t){this.xztaskSSry.userName=t.split("&")[0],this.xztaskSSry.userId=t.split("&")[1]},CommitChangeTaskSSry:function(){var t=this;return"{}"===i()(this.xztaskSSry)?(this.$alert("请选择责任人修改","提示",{confirmButtonText:"确定",type:"warning"}),!1):""==this.xztaskSSry.userId||""==this.xztaskSSry.userName?(this.$alert("选择责任人有误","提示",{confirmButtonText:"确定",type:"warning"}),!1):void Object(A.n)({xmbh:this.xmbh,rwbh:this.tasksInfo.rwbh,yhbh:this.xztaskSSry.userId,yhxm:this.xztaskSSry.userName}).then(function(e){"success"==e.data.state&&(t.lcbTasks.ssrxm=t.xztaskSSry.userName,t.xgssry=!0,t.$alert("修改成功","提示",{confirmButtonText:"确定",type:"success",callback:function(e){var s=t.tasksInfo.index;t.milestones[t.tasksInfo.lcbindex].tasks.rows[s].ssrxm=t.xztaskSSry.userName}}))})},addItemuser:function(){this.getProjectCatalog(),this.getItemUserNum()},getProjectCatalog:function(){var t=this;Object(j.a)({xmbh:this.xmbh}).then(function(e){var s=e.data;"success"==s.state&&(t.taskList=s.data,null!=s.data&&0!=s.data.length&&(t.fbcpmc=""==t.fbcpmc?s.data[0].cp:t.fbcpmc,t.fbcpbh=""==t.fbcpbh?s.data[0].cpbh:t.fbcpbh,t.getMilestone(t.fbcpmc,t.fbcpbh)))})},getTasksByCatalog:function(t,e,s,a,i){var l=this;Object(T.g)({xmbh:this.xmbh,catalog:t,catalogId:e,cpbh:s,cpmc:a,catalogType:i,curPage:1,pageSize:99999,taskType:"1",rwzt:"",keyword:""}).then(function(t){var e=t.data;"success"==e.state&&(l.LcbrwArr=e.data.rows)})},getItemUserNum:function(){var t=this;Object(A.r)({xmbh:this.xmbh}).then(function(e){var s=e.data;"success"==s.state&&(s.data.forEach(function(t,e,a){""==t.userName&&s.data.splice(e,1)}),t.itemUserNum=s.data.length)})}},watch:{name:function(t,e){var s=this,a=this.list0;this.name?(s.listt0=[],a.forEach(function(t,e,i){(a[e].userId.indexOf(s.name)>=0||a[e].userName.indexOf(s.name)>=0)&&s.listt0.push(a[e])})):s.listt0=a},dialogTableVisible:function(t,e){var s=this;t&&(this.$nextTick(function(){this.$refs.fileContent.appendChild(this.$refs.upload.$children[1].$el)}),this.partyArr=[],this.listt0.forEach(function(t,e,a){-1!=i()(s.dynamicTags).indexOf(i()(s.listt0[e]))&&s.partyArr.push(e)}))},dynamicTags:function(t,e){var s=this;this.partyArr=[],this.listt0.forEach(function(t,e,a){-1!=i()(s.dynamicTags).indexOf(i()(s.listt0[e]))&&s.partyArr.push(e)})}},activated:function(){},components:{itemTask:o.a,itemtable:h.a,itemSelect:d.a,pagination:u.a,dailyParper:m.a,enditTaskInfo:p.a,UserBanner:f.a,addItemUser:b.a,editLcbTasks:v.a,templateTabel:g.a,fileTable:y.a,milestoneGl:_.a,commitMilestone:x.a,question:k.a,complain:w.a,overview:C.a}},B={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{height:"calc(100% - 50px)","overflow-x":"hidden"}},[s("div",{staticStyle:{position:"fixed",width:"100%","z-index":"100"}},[s("user-banner",{attrs:{shown:!1,xmdetail:!1,Operatepower:t.Operatepower,bannerACtive:t.tabsLabel,itemMc:"["+t.xmkbInfo.xmbh+"]"+t.xmkbInfo.xmmc,fbdetail:!0,userNum:t.itemUserNum},on:{handleItemUser:t.handleItemUser,handleTabsClick:t.handleTabsClick}},[s("span",{staticClass:"project_task_itemInfo",attrs:{slot:"xmmc",title:"["+t.xmkbInfo.xmbh+"]"+t.xmkbInfo.xmmc},slot:"xmmc"},[t._v(t._s("["+t.xmkbInfo.xmbh+"]"+t.xmkbInfo.xmmc))])]),t._v(" "),t.userListShow?s("div",{staticStyle:{position:"absolute",right:"20px",top:"40px","z-index":"100"}},[s("addItemUser",{attrs:{dwmc:t.xmkbInfo.dwmc,xmbh:t.xmbh},on:{addItemuser:t.addItemuser}})],1):t._e()],1),t._v(" "),s("div",{staticStyle:{height:"40px"}}),t._v(" "),s("div",{staticClass:"project_task_detail",on:{click:function(e){return e.stopPropagation(),t.selectHide(e)}}},["process"==t.tabsLabel?s("div",{staticStyle:{display:"flex"}},[s("div",{staticClass:"project_task_detail_taskbar"},[s("div",{staticClass:"project_info"},[s("div",{staticStyle:{"margin-bottom":"5px"}},[t._v("\r\n             任务类型:\r\n              "),s("el-select",{attrs:{placeholder:"请选择任务类型",size:"mini"},on:{change:t.handleChangeRwlx},model:{value:t.rwlxValue,callback:function(e){t.rwlxValue=e},expression:"rwlxValue"}},t._l(t.rwlxOptions,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),s("div",[t._v("\r\n             任务状态:\r\n              "),s("el-select",{attrs:{placeholder:"请选择任务状态",size:"mini"},on:{change:t.handleChangeRwzt},model:{value:t.rwztValue,callback:function(e){t.rwztValue=e},expression:"rwztValue"}},t._l(t.rwztOptions,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)]),t._v(" "),s("ul",{staticClass:"task_list"},[s("div",[t._l(t.taskList,function(e,a){return 0!=t.taskList.length&&null!=t.taskList?s("li",{key:a,class:{"list-active":t.shownindex===a},attrs:{"data-fbcp":e.cp+"&"+e.cpbh},on:{click:function(e){t.getTaskinfo(e,a)}}},[s("p",[s("strong",{class:{on_active:t.shownindex===a,project_task_detail_cpmc:!0},attrs:{title:e.cp}},[t._v(t._s(e.cp))]),s("br"),t._v(" "),s("span",{staticStyle:{display:"inline-block",width:"40px"}},[t._v(t._s(e.ywcrwzs)+"/"+t._s(e.rwzs))]),t._v("　\r\n                    "),s("span",{staticClass:"item_zrr "},[t._v("甲")]),t._v(" "),s("span",[t._v(t._s(""==e.jfzrrxm?"暂无":e.jfzrrxm))]),t._v("  \r\n                    "),s("span",{staticClass:"item_zrr item_zrr_YF"},[t._v("乙")]),t._v(" "),s("span",[t._v(t._s(e.yfzrrxm))]),t._v(" "),s("span",{staticStyle:{float:"right","margin-top":"3px"},attrs:{title:"编辑人员"},on:{click:function(e){e.preventDefault(),t.changeZrr(e,a)}}},[s("img",{attrs:{src:"static/img/usergl.png",alt:""}})])]),t._v(" "),s("div",{staticStyle:{margin:"5px 0"}},[s("el-progress",{attrs:{"show-text":!1,percentage:0==e.rwzs?0:0==e.ywcrwzs?0:e.ywcrwzs/e.rwzs*100,status:"success"}})],1)]):t._e()}),t._v(" "),0==t.taskList.length||null==t.taskList?s("li",{staticStyle:{"text-align":"center","font-weight":"700"}},[t._v("\r\n                     暂无产品\r\n                ")]):t._e()],2)]),t._v(" "),s("ul",{staticClass:"task_list task_complete_status"},[s("li",{class:{"task-active":"Mytask"==t.taskActive},attrs:{"data-type":"Mytask"},on:{click:t.checkMyTask}},[s("span",{staticClass:"el-icon-news"}),t._v(" 我的任务")])])]),t._v(" "),s("div",{staticClass:"project_task_milestone"},[t.ViewTransition?s("div",{staticClass:"milestone-list",staticStyle:{height:"100%"}},[t._l(t.milestones,function(e,a){return 0!=t.taskList.length&&null!=t.taskList?s("div",{key:a},[s("itemTask",{attrs:{rwlx:t.rwlxValue,rwzt:t.rwztValue,TaskDatas:e.tasks.rows,index:a,milestone:e},on:{handleDialog:t.handleDialog,handleTaskinfo:t.handleTaskinfo,addItemTask:t.addItemTask}})],1):t._e()}),t._v(" "),0==t.taskList.length||null==t.taskList?s("div",{staticStyle:{"text-align":"center","padding-top":"150px",width:"100%"}},[s("img",{attrs:{src:"static/img/empty.png",alt:""}}),t._v(" "),s("p",[t._v("暂无里程碑")])]):t._e()],2):t._e(),t._v(" "),t.ViewTransition?t._e():s("div",{staticStyle:{padding:"0 10px","min-width":"1040px",background:"#fff",margin:"0 10px","border-radius":"5px"}},[s("div",{staticStyle:{display:"flex","justify-content":"space-between","border-bottom":"2px solid #e4e7ed",height:"40px",margin:"0 0 20px 10px"}},[s("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"今天的任务",name:"first"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"所有任务",name:"second"}})],1),t._v(" "),s("div",[s("div",{staticClass:"select_one"},[s("itemSelect",{attrs:{options:t.options},on:{handleSelect:t.handleSelectWc}})],1),t._v(" "),s("div",{staticClass:"select_two"},[s("itemSelect",{attrs:{options:t.optionsSort},on:{handleSelect:t.handleSelectSort}})],1)])],1),t._v(" "),s("itemtable",{attrs:{tableData:t.myTaskArr},on:{handleDailyParper:t.handleDailyParper,changeTaskStaus:t.changeTaskStaus,handleCell:t.handleCell}}),t._v(" "),s("div",{staticStyle:{"text-align":"right","margin-top":"20px"}},[0!=t.records&&null!=t.records?s("pagination",{attrs:{pageSize:t.pageSize,total:t.records},on:{handleCurrentChange:t.handleCurrentChange}}):t._e()],1)],1)]),t._v(" "),s("el-dialog",{attrs:{title:"任务详情",visible:t.dialogTableVisible,width:"700px","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[s("div",[s("div",{staticClass:"task-detail-dialog-header"},[s("p",{staticClass:"task-detail-dialog-header-mc"},[t._v(t._s(t.fbcpmc))]),t._v(" "),s("div",{staticStyle:{display:"flex"}},[s("h3",[t._v(t._s(t.lcbTasks.rwmc))])]),t._v(" "),s("p",{staticClass:"task-detail-dialog-header-time"},[s("span",[s("span",[t._v("开始日期")]),t._v(" "),s("span",[s("span",{staticClass:"el-icon-date"}),t._v(" "+t._s(t.lcbTasks.jhksrq))])]),t._v("\r\n              - \r\n              "),s("span",[s("span",[t._v("结束日期")]),t._v(" "),s("span",[s("span",{staticClass:"el-icon-date"}),t._v(" "+t._s(t.lcbTasks.jhjsrq))])])])]),t._v(" "),s("div",{staticClass:"task-detail-scenario-infos-wrap"},[s("p",[s("span",{staticClass:"el-icon-service",staticStyle:{display:"inline-block",width:"90px"}},[t._v(" 责任人")]),s("span",[t._v(t._s(""==t.lcbTasks.ssrxm?"暂无":t.lcbTasks.ssrxm)+"　")]),t._v(" "),1!=t.lcbTasks.lx&&t.Operatepower?s("span",[t.xgssry?t._e():s("span",[s("el-select",{attrs:{size:"mini",filterable:"","filter-method":t.filterSearch,placeholder:"请选择/搜索用户姓名/编号"},on:{change:t.getTaskssry},model:{value:t.value8,callback:function(e){t.value8=e},expression:"value8"}},t._l(t.taskSSry,function(t,e){return s("el-option",{key:e,attrs:{label:t.userName,value:t.userName+"&"+t.userId}})}))],1),t._v(" "),s("el-button",{attrs:{size:"mini"},on:{click:t.changeTaskSSry}},[t._v(t._s(1==t.xgssry?"修改":"取消修改"))]),t._v(" "),t.xgssry?t._e():s("el-button",{attrs:{size:"mini"},on:{click:t.CommitChangeTaskSSry}},[t._v("确定修改")])],1):t._e()]),t._v(" "),s("p",[s("span",{staticClass:"el-icon-news",staticStyle:{display:"inline-block",width:"90px"}},[t._v(" 任务状态")]),s("span",[t._v(t._s(t.lcbTasks.zt_display))])]),t._v(" "),s("p",[s("span",{staticClass:"el-icon-sort",staticStyle:{display:"inline-block",width:"90px"}},[t._v(" 优先级")]),s("span",[t._v(t._s(t.lcbTasks.yxj_display))])]),t._v(" "),s("p",[s("span",{staticClass:"el-icon-time",staticStyle:{display:"inline-block",width:"90px"}},[t._v(" 工时")]),s("span",[t._v(t._s(t.lcbTasks.jhgs)+"　")])]),s("p",[s("span",{staticClass:"el-icon-document",staticStyle:{display:"inline-block",width:"90px"}},[t._v(" 备注")]),s("span",[t._v(t._s(""==t.lcbTasks.rwxq?"无":t.lcbTasks.rwxq))])]),t._v(" "),s("p",[9!=t.lcbTasks.lx?s("span",{staticClass:"el-icon-document",staticStyle:{display:"inline-block",width:"90px"}},[t._v(t._s(1==t.lcbTasks.lx?"里程碑模板":"模板"))]):t._e(),t._v(" "),t._l(t.lcbTemplateFile,function(e,a){return 9!=t.lcbTasks.lx&&void 0!=e.mblj.split(".")[1]?s("a",{key:a,staticClass:"LcbTemplate",attrs:{href:t.baseUrl+"attachment/downloadTemplateFile.do?path="+e.mblj,target:"blank"}},[t._v("\r\n                  "+t._s(e.wdmc+"."+e.mblj.split(".")[e.mblj.split(".").length-1]))]):t._e()}),t._v(" "),9==t.lcbTasks.lx||0!=t.lcbTemplateFile.length&&null!=t.lcbTemplateFile?t._e():s("span",[t._v("暂无")])],2)]),t._v(" "),s("div",{staticClass:"detail-activities-wrap"},[s("div",{staticClass:"involve-view"},[s("p",[t._v("参与者")]),t._v(" "),t._l(t.dynamicTags,function(e,a){return s("el-tag",{key:a,attrs:{closable:e.del,"disable-transitions":!1},on:{close:function(s){t.handleClose(e)}}},[t._v("\r\n                      "+t._s(e.userName)+"\r\n                   ")])}),t._v(" "),1!=t.tasksInfo.lx&&t.Operatepower?s("el-button",{staticClass:"button-new-tag",attrs:{type:"primary"},on:{click:t.addUser}},[t._v("+")]):t._e(),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.selectShow?s("ul",{staticClass:"task_participant"},[s("li",[s("el-input",{attrs:{placeholder:"搜索姓名"},on:{focus:t.searchPerson},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),s("ul",{staticStyle:{height:"180px","overflow-y":"auto"}},t._l(t.listt0,function(e,a){return s("li",{key:a,attrs:{"data-label":e.userName+"&"+e.userId+"&"+a},on:{click:t.addTaskParty}},[s("span",{staticStyle:{display:"inline-block",width:"50px"}},[t._v(t._s(e.userName)+" ")]),t._v(" "),s("span",[t._v(t._s(e.userCode))]),t._v(" "),-1!=t.partyArr.indexOf(a)?s("span",{staticClass:"el-icon-check",staticStyle:{float:"right","margin-top":"5px"}}):t._e()])}))]):t._e()])],2),t._v(" "),s("div",{staticClass:"activities-list-wrap"},[s("ul",[t._l(t.taskDetailProcess,function(e,a){return 0!=t.taskDetailProcess.length&&null!=t.taskDetailProcess?s("li",{staticClass:"task-detail-process"},[5==e.gclx?s("div",{staticStyle:{padding:"3px 0"}},[s("div",[s("p",[s("span",{staticClass:"process-daily",class:{"el-icon-plus":1==e.czlx,"el-icon-delete":2==e.czlx,"el-icon-refresh":3==e.czlx},attrs:{title:e.gcms}},[t._v("\r\n                            "+t._s(e.gcms))]),t._v(" "),s("span",{staticStyle:{float:"right",color:"#aaa"}},[t._v(t._s(e.cjsj))])])])]):t._e(),t._v(" "),5!=e.gclx?s("div",[s("div",[s("p",{staticStyle:{"line-height":"32px"}},[s("span",{staticStyle:{float:"left",height:"32px"}},[s("img",{attrs:{src:"static/img/defaultAvatar.png",onerror:t.errorImg}}),t._v(" ")]),t._v(" "),s("span",{staticStyle:{float:"left",color:"#999"}},[t._v(" "+t._s(e.cjrxm)+"  　"+t._s(e.userCode)+"\r\n                            "),2==e.gclx||3==e.gclx?s("span",{class:{"process-gclx":!0,"gclx-rz":2==e.gclx,"gclx-cb":3==e.gclx}},[t._v(t._s(2==e.gclx?"日报":"催办"))]):t._e()]),t._v(" "),s("span",{staticStyle:{float:"right",color:"#aaa"}},[t._v(t._s(e.cjsj))])]),t._v(" "),s("p",{staticStyle:{"text-align":"left",margin:"5px"}},[t._v(t._s(e.gcms))]),t._v(" "),s("p",t._l(e.fjData,function(e,a){return s("a",{key:a,staticClass:"process-fjlist",attrs:{href:t.baseUrl+"attachment/downloadFile.do?fjId="+e.fjbh,target:"blank"}},[t._v(t._s(e.fjmc))])}))])]):t._e()]):t._e()}),t._v(" "),0==t.taskDetailProcess.length||null==t.taskDetailProcess?s("li",[s("p",{staticStyle:{"text-align":"center"}},[t._v("暂无任务过程")])]):t._e()],2),t._v(" "),0!=t.taskDetailProcess.length&&null!=t.taskDetailProcess?s("div",{staticClass:"taskProcess-tips"},[t.taskProcessNum-t.curPageNum>0?s("a",{on:{click:t.showAllprocess}},[t._v("显示较早的 "+t._s(t.taskProcessNum-t.curPageNum)+" 条动态")]):t._e()]):t._e()])])]),t._v(" "),s("div",{staticClass:"activity-creator"},[s("div",{staticClass:"activity-creator-content"},[s("div",[s("div",{ref:"fileContent"}),t._v(" "),s("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.ProcessValue,callback:function(e){t.ProcessValue=e},expression:"ProcessValue"}})],1),t._v(" "),s("div",{staticClass:"activity-creator-operate"},[s("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"dis",multiple:"","before-upload":t.beforeUpload,"on-remove":t.handleRemove,"on-change":t.handleChange,"file-list":t.fileList,"auto-upload":!1}},[s("span",{staticClass:"el-icon-upload",staticStyle:{"font-size":"18px"},attrs:{title:"上传附件"}})]),t._v(" "),s("div",[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.remindeTaskProcess}},[t._v("催办")]),t._v(" "),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.commitTaskProcess}},[t._v("发布")])],1)],1)])])]),t._v(" "),s("el-dialog",{attrs:{title:"填写日报",visible:t.dialogDailyVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogDailyVisible=e},close:t.closeDailyParper}},[s("dailyParper",{attrs:{taskName:t.taskName,xmbh:t.xmbh,closeDialogNum:t.closeDialogNum},on:{handleSubmit:t.handleSubmit}})],1),t._v(" "),s("el-dialog",{attrs:{title:"修改产品信息",visible:t.dialogEditTaskVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogEditTaskVisible=e}}},[s("enditTaskInfo",{attrs:{xmbh:t.xmbh,cpinfo:t.cpinfo,dialogEditTaskVisible:t.dialogEditTaskVisible},on:{changeCPzrr:t.changeCPzrr,handleCommit:t.handleEditTaskCommit}})],1),t._v(" "),s("el-dialog",{attrs:{title:"编辑任务",visible:t.dialogEditLcbTaskVisible,"close-on-click-modal":!1},on:{close:t.closeDialog,"update:visible":function(e){t.dialogEditLcbTaskVisible=e}}},[s("editLcbTasks",{attrs:{dialog:t.dialog,lcbrw:t.LcbrwArr,taskData:t.editTaskInfo},on:{handleEditTaskSuc:t.handleEditTaskSuc}})],1),t._v(" "),s("el-dialog",{attrs:{title:"提报里程碑",visible:t.commitlcbVisible,top:"50px",width:"600px","close-on-click-modal":!1},on:{"update:visible":function(e){t.commitlcbVisible=e}}},[s("commitMilestone",{attrs:{shown:t.commitlcbVisible,taskDetail:t.lcbTaskDetail},on:{handleCommitMilestone:t.handleCommitMilestone}})],1)],1):t._e(),t._v(" "),"overview"==t.tabsLabel?s("div",[s("overview",{attrs:{isAll:t.isAll,xmbh:t.xmbh,label:t.tabsLabel},on:{checkSkipDetail:t.checkSkipDetail}})],1):t._e(),t._v(" "),"template"==t.tabsLabel?s("div",[s("templateTabel")],1):t._e(),t._v(" "),"files"==t.tabsLabel?s("div",[s("fileTable",{attrs:{xmbh:t.xmbh}})],1):t._e(),t._v(" "),"milestone"==t.tabsLabel?s("div",[s("milestoneGl",{attrs:{xmbh:t.xmbh}})],1):t._e(),t._v(" "),"question"==t.tabsLabel?s("div",[s("question",{attrs:{xmbh:t.xmbh,xmmc:t.xmkbInfo.xmmc,isAll:t.isAll}})],1):t._e(),t._v(" "),"complain"==t.tabsLabel?s("div",[s("complain",{attrs:{xmbh:t.xmbh,xmmc:t.xmkbInfo.xmmc}})],1):t._e()]),t._v(" "),s("el-dialog",{attrs:{title:"钉钉群",visible:t.dingdingGroupVisible,width:"400px","close-on-click-modal":!1},on:{"update:visible":function(e){t.dingdingGroupVisible=e}}},[s("div",{staticClass:"newadd-ddgroup"},[s("el-tabs",{attrs:{type:"card"},model:{value:t.activeName2,callback:function(e){t.activeName2=e},expression:"activeName2"}},[s("el-tab-pane",{attrs:{label:"已有钉钉群",name:"first"}},[s("span",[t._v("钉钉群id:")]),t._v(" "),s("el-input",{staticStyle:{width:"50%"},attrs:{size:"mini",placeholder:"请输入钉钉群id"},model:{value:t.chatId,callback:function(e){t.chatId=e},expression:"chatId"}})],1),t._v(" "),s("el-tab-pane",{attrs:{label:"新建钉钉群",name:"second",disabled:t.dingdingShow}},[s("span",[t._v("钉钉群名称:")]),t._v(" "),s("el-input",{staticStyle:{width:"50%"},attrs:{size:"mini",placeholder:"请输入钉钉群名称"},model:{value:t.chatName,callback:function(e){t.chatName=e},expression:"chatName"}})],1)],1),t._v(" "),s("div",{staticStyle:{"text-align":"right",padding:"10px"}},[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleSaveChat}},[t._v("保存")])],1)],1)])],1)},staticRenderFns:[]};var V=s("Z0/y")(I,B,!1,function(t){s("25Mb")},"data-v-63d1f06a",null);e.default=V.exports},Oxz5:function(t,e,s){t.exports=s.p+"static/img/wtgz-card3.79be90d.png"},T8sv:function(t,e){},W08m:function(t,e,s){"use strict";var a=s("FqQf"),i={data:function(){return{milestoneVisible:!1,taskDetail:{}}},props:{tableData:{type:Array,default:function(){return[{lcbmc:"安装部署",rwmc:"测试项目",rwbh:"UK2017-20000",rwxz:"xxx",rwzz:"执行中",date:"3月2日 09:00 - 18:00",gs:10.5,yxj:"紧急",fqr:"雷锋",cyr:["张三丰 "," 雷锋"]},{lcbmc:"安装部署",rwmc:"测试项目",rwbh:"UK2017-20000",rwxz:"xxx",rwzz:"执行中",date:"3月2日 09:00 - 18:00",gs:10.5,yxj:"高",fqr:"雷锋",cyr:["张三丰 "," 雷锋"]},{lcbmc:"安装部署",rwmc:"测试项目",rwbh:"UK2017-20000",rwxz:"xxx",rwzz:"执行中",date:"3月2日 09:00 - 18:00",gs:10.5,yxj:"高",fqr:"雷锋",cyr:["张三丰 "," 雷锋"]}]}}},methods:{handleCommitMilestone:function(){this.milestoneVisible=!1},handleDailyParper:function(t){this.$emit("handleDailyParper",t)},handleCommitTask:function(t){this.taskDetail=t,this.milestoneVisible=!this.milestoneVisible},changetaskState:function(t){this.$emit("changeTaskStaus",t.target.getAttribute("data-info"))},cellClick:function(t,e,s,a){"任务名称"==e.label&&this.$emit("handleCell",t)}},components:{commitMilestone:a.a}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"item_task_tabel"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","min-width":"1200"},on:{"cell-click":t.cellClick}},[s("el-table-column",{attrs:{fixed:"left",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"spacearound",staticStyle:{"white-space":"nowrap"},attrs:{"flex-align":""}},[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){t.handleDailyParper(e.row)}}},[t._v("填写日报")]),t._v(" 　\n        "),1==e.row.lx||2==e.row.lx?s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){t.handleCommitTask(e.row)}}},[t._v("提交里程碑")]):s("span",{staticClass:"task-switch task-log",class:{"el-icon-check":2==e.row.zt,"task-close":2==e.row.zt},attrs:{title:"关闭/重启任务","data-info":e.row.rwbh+"&"+e.row.zt},on:{click:t.changetaskState}})],1)]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"xmmc",label:"项目名称","show-overflow-tooltip":"",width:"280"}}),t._v(" "),s("el-table-column",{attrs:{prop:"rwmc_display",label:"任务名称","show-overflow-tooltip":"",width:"280"}}),t._v(" "),s("el-table-column",{attrs:{prop:"cpmc_display",label:"产品名称","show-overflow-tooltip":"",width:"160"}}),t._v(" "),s("el-table-column",{attrs:{prop:"lcbms_display",label:"里程碑名称","show-overflow-tooltip":"",width:"280"}}),t._v(" "),s("el-table-column",{attrs:{prop:"zt_display",label:"任务状态","show-overflow-tooltip":"",width:"100"}}),t._v(" "),s("el-table-column",{attrs:{prop:"yxj_display",label:"优先级","show-overflow-tooltip":"",width:"100"}}),t._v(" "),s("el-table-column",{attrs:{prop:"cjrxm",label:"发起人","show-overflow-tooltip":"",width:"80"}}),t._v(" "),s("el-table-column",{attrs:{prop:"jhksrq",label:"计划开始日期","show-overflow-tooltip":"",width:"130"}}),t._v(" "),s("el-table-column",{attrs:{prop:"jhjsrq",label:"计划结束日期","show-overflow-tooltip":"",width:"130"}}),t._v(" "),s("el-table-column",{attrs:{prop:"cyr",label:"参与人","show-overflow-tooltip":""}})],1),t._v(" "),s("div",{staticClass:"item-task-tjlcb"},[s("el-dialog",{attrs:{title:"提报里程碑","close-on-click-modal":!1,width:"600px",top:"50px","append-to-body":!0,visible:t.milestoneVisible},on:{"update:visible":function(e){t.milestoneVisible=e}}},[s("commitMilestone",{attrs:{shown:t.milestoneVisible,taskDetail:t.taskDetail},on:{handleCommitMilestone:t.handleCommitMilestone}})],1)],1)],1)},staticRenderFns:[]};var n=s("Z0/y")(i,l,!1,function(t){s("n+/p")},"data-v-6ab5bf77",null);e.a=n.exports},X2aY:function(t,e,s){"use strict";var a={data:function(){return{value:1}},props:{options:{type:Array,default:function(){return[]}}},methods:{handleSelect:function(t){this.$emit("handleSelect",t)}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleSelect},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)},staticRenderFns:[]};var l=s("Z0/y")(a,i,!1,function(t){s("DezX")},"data-v-8a3cdcec",null);e.a=l.exports},XiIa:function(t,e){},YfCi:function(t,e){},dA9e:function(t,e){},enfj:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAcCAYAAACUJBTQAAAABGdBTUEAALGPC/xhBQAAAdFJREFUSA29ls9Kw0AQxo31UFCKLyAUUdCrvoUXQXqqHjx78Vm8qYitCr6B6BuIR0FRKHjxAayoCGobf992t5iYbEJJOvDt7M7OzLd/s5mYiEkYhvdA8hrr8jblb6KIjztOxg1ltKeUlBEEqHkwC6pAUsG+OqjmKivWq2rjurSfgiAIRVAHt6AMUd56QHEB41qusY7mdCWSN2JnRovPFfUpkh6upR6AUpO7eY6FREdYx1fyAR5NrZhiiTTTJhV70geS62JyD7Ion8lKMZblyiRhIIvA3ebIZLFrSTLFS0KSFTLcgFPqEV/aW9jv0LtZLJHABOc5bLqoTXDiiNCmjU0zXAZ+IcC78fRvgG8gEdEm+FEDOQTudEaIsA83Xh9IL4ki8WkAR0TVyBFlIoGNiZDYGP8RxmnPOaI7IPEwuOnQPyTJ2hMTQ0CDyo5LgF4AB9hTZ/LH1ywFvkYSLyM9heyJ5fi/XHSsgy/rcIY2M0c3Qc/a9yOjtg36hstlnt8kJ2t7Rr+DS7DNU9qXHX1OEhG2wQPwix2NVNpyjXTjlc/lzpqJRt1JGyZ9ub7auU5XGkleu57fF5z1K1TWe9LVbW65tStJH4ukBtqgWzCJ8rVA7ReIqc7+4gYw6wAAAABJRU5ErkJggg=="},fsyJ:function(t,e,s){"use strict";var a=s("0isR"),i=s("5VW7"),l=s("xO/y"),n={data:function(){return{tableData:[{xmnr:"项目内容",cnjsrq:"2016-05-02",lcb:"试运行"},{xmnr:"项目内容",cnjsrq:"2016-05-04",lcb:"试运行"},{xmnr:"项目内容",cnjsrq:"2016-05-01",lcb:"试运行"}],listData:[],jdValue:"",queryData:{},qrData:{},isJzuser:""}},props:{xmtj:{type:Object,default:function(){return{}}},xmbh:{type:String,default:""},isAll:{type:Boolean,default:!0}},computed:{isAllxm:function(){return this.isAll}},mounted:function(){this.getMonthLcb(),void 0!=this.xmtj.p_xmjd&&(this.xmtj.p_xmjd=JSON.parse(this.xmtj.p_xmjd)),this.isJzuser=sessionStorage.isJZuser},activated:function(){},methods:{handleChecklist:function(t){var e=this.$router.resolve({path:t,query:{xmbh:this.xmbh,isAll:this.isAll}});window.open(e.href,"_blank")},handleCheckdetial:function(t,e){this.queryData.personType=t,this.queryData.filterType=e,this.queryData.xmbh=this.xmbh,this.queryData.isAll=this.isAll;var s=this.$router.resolve({path:"/jdgzDetail",query:this.queryData});window.open(s.href,"_blank")},handleCheckjdqr:function(t){this.qrData.sfqr=t,this.qrData.xmbh=this.xmbh,this.qrData.lcbqr=1;var e=this.$router.resolve({path:"/jdgzDetail",query:this.qrData});window.open(e.href,"_blank")},getMonthLcb:function(){var t=this;Object(l.d)({xmbh:this.xmbh}).then(function(e){var s=e.data;"success"==s.state&&(t.tableData=s.data)})}},components:{CircleBar:i.a},watch:{xmbh:function(){this.getMonthLcb()},isAllxm:function(t,e){this.getMonthLcb()}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-body height100 jdgz",attrs:{"flex-column":""}},[s("div",{attrs:{col:"1"}},[s("span",{staticClass:"introText mr-20"},[t._v("甲方负责人")]),s("span",{staticClass:"baseText mr-20"},[t._v(t._s(""==t.xmtj.jfxm?"暂无":t.xmtj.jfxm))]),t._v(" "),s("span",{staticClass:"introText mr-20"},[t._v("项目经理")]),s("span",{staticClass:"baseText mr-20"},[t._v(t._s(""==t.xmtj.xmjl?"暂无":t.xmtj.xmjl))]),t._v(" "),s("span",{staticClass:"introText mr-20"},[t._v("项目建设周期")]),s("span",{staticClass:"baseText"},[t._v(t._s(""==t.xmtj.xmksrq?"无":t.xmtj.xmksrq)+" 至 "+t._s(""==t.xmtj.xmjsrq?"无":t.xmtj.xmjsrq))]),s("br"),t._v(" "),s("span",{staticClass:"introText mr-20"},[t._v("项目状态")]),s("span",{staticClass:"baseText mr-20"},[t._v(t._s(t.xmtj.ztztmc))]),t._v(" "),s("span",{staticClass:"introText mr-20"},[t._v("服务期限")]),s("span",{staticClass:"baseText mr-20"},[t._v(t._s(t.xmtj.fwqx)+" 月")]),t._v(" "),s("span",{staticClass:"introText mr-20"},[t._v("服务开始日期")]),s("span",{staticClass:"baseText"},[t._v(t._s(t.xmtj.fwksrq?t.xmtj.fwksrq:"无"))]),t._v(" "),0==t.isJzuser?s("span",[s("span",{staticClass:"introText mr-20"},[t._v("服务状态")]),s("span",{staticClass:"baseText"},[t._v(t._s("0"==t.xmtj.gcfwzt?"停止":"已启动"))])]):t._e()]),t._v(" "),s("div",{staticClass:"jdgz-box",attrs:{flex:"",col:"14"}},[s("div",{staticClass:"jdgz-box__left",attrs:{col:"4"}},[s("h4",[t._v("进度")]),t._v(" "),s("div",{staticClass:"box__left--steps"},[s("el-progress",{staticStyle:{width:"90%"},attrs:{"text-inside":!0,"stroke-width":18,percentage:t.xmtj.p_xmjd}}),t._v(" "),s("div",{staticClass:"vertical-steps"},t._l(t.xmtj.jdList,function(e,a){return s("div",{key:a,class:{"vertical-step__item":!0,"vertical-step__item_now":e.completed}},[t._v("\n            "+t._s(e.jdmc)+"\n          ")])}))],1)]),t._v(" "),s("div",{staticClass:"jdgz-box__right",attrs:{col:"8","flex-column":"",spacebetween:""}},[s("div",{staticClass:"box__right--task",attrs:{col:"1"}},[s("div",{attrs:{col:"1","flex-column":""}},[s("h4",[t._v("实施"),s("span",{staticClass:"box__right--task_yhcb"},[t._v("催办"),s("span",[s("a",{attrs:{href:"javaScript:;;"},on:{click:function(e){t.handleCheckdetial("1","1")}}},[t._v(t._s(t.xmtj.ssrwcbzs))])]),t._v("条")]),t._v(" "),s("span",{staticClass:"box__right--task_yhcb"},[t._v("个人任务总数"),s("span",[s("a",{attrs:{href:"javaScript:;;"},on:{click:function(e){t.handleCheckdetial("1","5")}}},[t._v(t._s(t.xmtj.ssgrrwzs))])]),t._v("条")]),t._v(" "),s("span",{staticClass:"box__right--task_yhcb"},[t._v("未完成个人任务"),s("span",[s("a",{attrs:{href:"javaScript:;;"},on:{click:function(e){t.handleCheckdetial("1","6")}}},[t._v(t._s(t.xmtj.ssgrwwcrwzs))])]),t._v("条")])]),t._v(" "),s("div",{staticClass:"right--task__container",attrs:{flex:""}},[s("div",{staticClass:"right--task__circle"},[s("circle-bar",{attrs:{col:"1",percent:parseInt(t.xmtj.p_ssrwwcl),r:30,text:"完成率"}})],1),t._v(" "),s("div",{staticClass:"right--task__card",attrs:{"flex-column":""}},[s("div",{staticClass:"vertical-items",attrs:{flex:"",spacearound:"",col:"1"}},[s("div",{staticClass:"vertical-items",attrs:{"flex-column":""}},[s("span",{staticClass:"nums",attrs:{col:"1",center:""}},[s("a",{attrs:{href:"javaScript:;;"},on:{click:function(e){t.handleCheckdetial("1","2")}}},[t._v(t._s(t.xmtj.ssrwcqs))])]),t._v(" "),s("span",{staticClass:"introText",attrs:{col:"1",center:""}},[t._v("已超期")])]),t._v(" "),s("div",{staticClass:"vertical-items",attrs:{"flex-column":""}},[s("span",{staticClass:"nums",attrs:{col:"1",center:""}},[s("a",{attrs:{href:"javaScript:;;"},on:{click:function(e){t.handleCheckdetial("1","7")}}},[t._v(t._s(t.xmtj.ssdqrrws))])]),t._v(" "),s("span",{staticClass:"introText",attrs:{col:"1",center:""}},[t._v("待确认任务数")])]),t._v(" "),s("div",{staticClass:"vertical-items",attrs:{"flex-column":""}},[s("span",{staticClass:"nums",attrs:{col:"1",center:""}},[s("a",{attrs:{href:"javaScript:;;"},on:{click:function(e){t.handleCheckdetial("1","8")}}},[t._v(t._s(t.xmtj.ssyqrrws))])]),t._v(" "),s("span",{staticClass:"introText",attrs:{col:"1",center:""}},[t._v("已确认任务数")])]),t._v(" "),s("div",{staticClass:"vertical-items",attrs:{"flex-column":""}},[s("span",{staticClass:"nums",attrs:{col:"1",center:""}},[s("a",{attrs:{href:"javaScript:;;"},on:{click:function(e){t.handleCheckdetial("1","0")}}},[t._v(t._s(t.xmtj.ssrwzs))])]),t._v(" "),s("span",{staticClass:"introText",attrs:{col:"1",center:""}},[t._v("总数")])])])])])]),t._v(" "),s("div",{staticClass:"right--task_",attrs:{col:"1","flex-column":""}},[s("h4",[t._v("用户"),s("span",{staticClass:"box__right--task_yhcb"},[t._v("催办"),s("span",[s("a",{attrs:{href:"javaScript:;;"},on:{click:function(e){t.handleCheckdetial("2","1")}}},[t._v(t._s(t.xmtj.yhrwcbzs))])]),t._v("条")]),t._v(" "),s("span",{staticClass:"box__right--task_yhcb"},[t._v("个人任务总数"),s("span",[s("a",{attrs:{href:"javaScript:;;"},on:{click:function(e){t.handleCheckdetial("2","5")}}},[t._v(t._s(t.xmtj.yhgrrwzs))])]),t._v("条")]),t._v(" "),s("span",{staticClass:"box__right--task_yhcb"},[t._v("未完成个人任务"),s("span",[s("a",{attrs:{href:"javaScript:;;"},on:{click:function(e){t.handleCheckdetial("2","6")}}},[t._v(t._s(t.xmtj.yhgrwwcrwzs))])]),t._v("条")])]),t._v(" "),s("div",{staticClass:"right--task__container",attrs:{flex:""}},[s("div",{staticClass:"right--task__circle"},[s("circle-bar",{attrs:{col:"1",percent:parseInt(t.xmtj.p_yhrwwcl),r:30,text:"完成率"}})],1),t._v(" "),s("div",{staticClass:"right--task__card",attrs:{"flex-column":""}},[s("div",{staticClass:"vertical-items",attrs:{flex:"",spacearound:"",col:"1"}},[s("div",{staticClass:"vertical-items",attrs:{"flex-column":""}},[s("span",{staticClass:"nums",attrs:{col:"1",center:""}},[s("a",{attrs:{href:"javaScript:;;"},on:{click:function(e){t.handleCheckdetial("2","2")}}},[t._v(t._s(t.xmtj.yhrwcqs))])]),t._v(" "),s("span",{staticClass:"introText",attrs:{col:"1",center:""}},[t._v("已超期")])]),t._v(" "),s("div",{staticClass:"vertical-items",attrs:{"flex-column":""}},[s("span",{staticClass:"nums",attrs:{col:"1",center:""}},[s("a",{attrs:{href:"javaScript:;;"},on:{click:function(e){t.handleCheckdetial("2","7")}}},[t._v(t._s(t.xmtj.yhdqrrws))])]),t._v(" "),s("span",{staticClass:"introText",attrs:{col:"1",center:""}},[t._v("待确认任务数")])]),t._v(" "),s("div",{staticClass:"vertical-items",attrs:{"flex-column":""}},[s("span",{staticClass:"nums",attrs:{col:"1",center:""}},[s("a",{attrs:{href:"javaScript:;;"},on:{click:function(e){t.handleCheckdetial("2","8")}}},[t._v(t._s(t.xmtj.yhyqrrws))])]),t._v(" "),s("span",{staticClass:"introText",attrs:{col:"1",center:""}},[t._v("已确认任务数")])]),t._v(" "),s("div",{staticClass:"vertical-items",attrs:{"flex-column":""}},[s("span",{staticClass:"nums",attrs:{col:"1",center:""}},[s("a",{attrs:{href:"javaScript:;;"},on:{click:function(e){t.handleCheckdetial("2","0")}}},[t._v(t._s(t.xmtj.yhrwzs))])]),t._v(" "),s("span",{staticClass:"introText",attrs:{col:"1",center:""}},[t._v("总数")])])])])])])]),t._v(" "),s("div",{staticClass:"box__right--plan box__right--task",attrs:{"flex-column":"",col:"1"}},[s("div",{staticClass:"right--task_",attrs:{col:"3","flex-column":""}},[s("h4",[t._v("进度汇报")]),t._v(" "),s("div",{staticClass:"right--task__container",attrs:{flex:""}},[s("div",{staticClass:"right--task__card",attrs:{"flex-column":""}},[s("div",{staticClass:"vertical-items",attrs:{flex:"",spacearound:"",col:"1"}},[s("div",{staticClass:"vertical-items",attrs:{"flex-column":""}},[s("span",{staticClass:"nums",attrs:{col:"1",center:""}},[s("a",{attrs:{href:"javaScript:;;"},on:{click:function(e){t.handleChecklist("/rbdetail")}}},[t._v(t._s(t.xmtj.rbdt?t.xmtj.rbdt:0))])]),t._v(" "),s("span",{staticClass:"introText",attrs:{col:"1",center:""}},[t._v("日报动态")])]),t._v(" "),s("div",{staticClass:"vertical-items",attrs:{"flex-column":""}},[s("span",{staticClass:"nums",attrs:{col:"1",center:""}},[s("a",{attrs:{href:"javaScript:;;"},on:{click:function(e){t.handleChecklist("/zbdetail")}}},[t._v(t._s(t.xmtj.zbdt?t.xmtj.zbdt:0))])]),t._v(" "),s("span",{staticClass:"introText",attrs:{col:"1",center:""}},[t._v("周报动态")])]),t._v(" "),s("div",{staticClass:"vertical-items",attrs:{"flex-column":""}},[s("span",{staticClass:"nums",attrs:{col:"1",center:""}},[s("a",{attrs:{href:"javaScript:;;"},on:{click:function(e){t.handleChecklist("/ybdetail")}}},[t._v(t._s(t.xmtj.ybdt?t.xmtj.ybdt:0))])]),t._v(" "),s("span",{staticClass:"introText",attrs:{col:"1",center:""}},[t._v("月报动态")])])])])])]),t._v(" "),s("div",{staticClass:"right--task_",attrs:{col:"4","flex-column":""}},[s("h4",[t._v("进度确认")]),t._v(" "),s("div",{staticClass:"right--task__container",attrs:{flex:""}},[s("div",{staticClass:"right--task__circle"},[s("circle-bar",{attrs:{col:"1",percent:parseInt(t.xmtj.p_lcbqrl),r:30,text:"确认率"}})],1),t._v(" "),s("div",{staticClass:"right--task__card",attrs:{"flex-column":""}},[s("div",{staticClass:"vertical-items",attrs:{flex:"",spacearound:"",col:"1"}},[s("div",{staticClass:"vertical-items",attrs:{"flex-column":""}},[s("span",{staticClass:"nums",attrs:{col:"1",center:""}},[s("a",{attrs:{href:"javaScript:;;"},on:{click:function(e){t.handleCheckjdqr("0")}}},[t._v(t._s(t.xmtj.dqrlcbzs?t.xmtj.dqrlcbzs:0))])]),t._v(" "),s("span",{staticClass:"introText",attrs:{col:"1",center:""}},[t._v("待确认里程碑")])]),t._v(" "),s("div",{staticClass:"vertical-items",attrs:{"flex-column":""}},[s("span",{staticClass:"nums",attrs:{col:"1",center:""}},[s("a",{attrs:{href:"javaScript:;;"},on:{click:function(e){t.handleCheckjdqr("1")}}},[t._v(t._s(t.xmtj.yqrlcbzs?t.xmtj.yqrlcbzs:0))])]),t._v(" "),s("span",{staticClass:"introText",attrs:{col:"1",center:""}},[t._v("已确认里程碑")])])])])])])])])])])},staticRenderFns:[]};var r=s("Z0/y")(n,c,!1,function(t){s("68Sg")},null,null).exports,o=s("Oxz5"),h=s.n(o),d=s("LhK7"),u=s.n(d),m=s("lEoy"),p=s.n(m),f=s("enfj"),b=s.n(f),v=s("zPPV"),g=s.n(v),y=s("Hfv2"),_=s.n(y),x=s("n2r4"),k=s.n(x),w=s("x7oc"),C=s.n(w),j={data:function(){return{item01:{backgroundImage:"url("+s("zPPV")+")"},item02:{backgroundImage:"url("+s("lEoy")+")"},item03:{backgroundImage:"url("+s("Oxz5")+")"},wtgzCard3:h.a,wtgzCardIcon3:u.a,wtgzCard2:p.a,wtgzCardIcon2:b.a,wtgzCard1:g.a,wtgzCardIcon1:_.a,satisfy:k.a,notsatisfy:C.a,wtgzMidOptions:[{name:"未回复",value:10},{name:"逾期未响应",value:10},{name:"逾期未完成",value:10},{name:"无解决时间",value:10}],lastPropagations:[{title:"1.任务已经完成，申请验收",status:0,time:"上午8:00"},{title:"1.任务已经完成，申请验收",status:1,time:"上午8:00"},{title:"1.任务已经完成，申请验收",status:2,time:"上午8:00"}]}},props:{wtgz:{type:Object,default:function(){return{}}}},mounted:function(){this.wtgzMidOptions[0].value=this.wtgz.wtwhfzs,this.wtgzMidOptions[1].value=this.wtgz.wtyqwhfzs,this.wtgzMidOptions[2].value=this.wtgz.wtyqwwczs,this.wtgzMidOptions[3].value=this.wtgz.wtwjjsjzs,window.onerror=function(){return!0}},methods:{handleOpenQuestionDetail:function(t){var e=this.$router.resolve({name:"questionDetail",query:{wid:t}});window.open(e.href,"_blank")}},components:{CircleBar:i.a}},z={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-body height100 pannel-wtgz",attrs:{"flex-column":""}},[s("div",{attrs:{"flex-column":"",col:"14"}},[s("div",{staticClass:"wtgz-card",attrs:{flex:"",spacearound:"",col:"2"}},[s("div",{staticClass:"wtgz-card__item wtgz-card__item01",style:t.item01,attrs:{colcenter:"",spacearound:"",col:"3"}},[s("div",[s("img",{attrs:{src:t.wtgzCardIcon1,alt:"",width:"20",height:"20"}}),s("span",{staticClass:"text"},[t._v("催办")])]),t._v(" "),s("span",{staticClass:"nums"},[t._v(t._s(t.wtgz.wtcbzs))])]),t._v(" "),s("div",{staticClass:"wtgz-card__item wtgz-card__item02",style:t.item02,attrs:{colcenter:"",spacearound:"",col:"3"}},[s("div",[s("img",{attrs:{src:t.wtgzCardIcon2,alt:"",width:"20",height:"20"}}),s("span",{staticClass:"text"},[t._v("未完成")])]),t._v(" "),s("span",{staticClass:"nums"},[t._v(t._s(t.wtgz.wtwclzs))])]),t._v(" "),s("div",{staticClass:"wtgz-card__item wtgz-card__item03",style:t.item03,attrs:{colcenter:"",spacearound:"",col:"3"}},[s("div",[s("img",{attrs:{src:t.wtgzCardIcon3,alt:"",width:"20",height:"20"}}),s("span",{staticClass:"text"},[t._v("已完成")])]),t._v(" "),s("span",{staticClass:"nums"},[t._v(t._s(t.wtgz.wtyclzs))])])]),t._v(" "),s("div",{staticClass:"wtgz-mid",attrs:{col:"3",flex:""}},[s("div",{staticClass:"wtgz-mid__left",attrs:{center:"",flex:"",col:"5"}},[s("circle-bar",{attrs:{col:"2",percent:parseInt(t.wtgz.p_wtyql)}}),t._v(" "),s("circle-bar",{attrs:{col:"2",percent:parseInt(t.wtgz.p_wtmyd),outerStroke:"rgba(25, 190, 107,0.1)","inner-stroke":"#19BE6B",text:"满意度"}}),t._v(" "),s("div",{staticClass:"right-split",attrs:{col:"2","flex-column":"",spacearound:""}},[s("div",{staticClass:"satisfy",attrs:{col:"2"}},[s("span",{staticClass:"pull-left",staticStyle:{width:"30px","line-height":"20px"}},[t._v("满意")]),t._v(" "),s("img",{attrs:{src:t.satisfy,alt:"satisfy",width:"20"}}),t._v(" "),s("span",{staticClass:"pull-right",staticStyle:{"font-weight":"bold","font-size":"16px",width:"30px"}},[t._v(t._s(t.wtgz.wtmyzs))])]),t._v(" "),s("div",{staticClass:"notsatisfy",attrs:{col:"2"}},[s("span",{staticClass:"pull-left",staticStyle:{width:"30px","white-space":"nowrap","line-height":"20px"}},[t._v("不满意")]),t._v(" "),s("img",{attrs:{src:t.notsatisfy,alt:"notsatisfy",width:"20"}}),t._v(" "),s("span",{staticClass:"pull-right",staticStyle:{"font-weight":"bold","font-size":"16px",width:"30px"}},[t._v(t._s(t.wtgz.wtbmyzs))])])])],1),t._v(" "),s("div",{staticClass:"wtgz-mid__right",attrs:{col:"5",flex:""}},[s("div",{staticClass:"mid__right-item",attrs:{"flex-column":"",col:"2"}},[s("span",{staticClass:"nums",attrs:{col:"6",center:""}},[t._v(t._s(t.wtgz.wtwhfzs))]),t._v(" "),s("span",{staticClass:"text",attrs:{col:"5",center:""}},[t._v("未回复")])]),t._v(" "),s("div",{staticClass:"mid__right-item",attrs:{"flex-column":"",col:"2"}},[s("span",{staticClass:"nums",attrs:{col:"6",center:""}},[t._v(t._s(t.wtgz.wtyqwhfzs))]),t._v(" "),s("span",{staticClass:"text",attrs:{col:"5",center:""}},[t._v("逾期未响应")])]),t._v(" "),s("div",{staticClass:"mid__right-item",attrs:{"flex-column":"",col:"2"}},[s("span",{staticClass:"nums",attrs:{col:"6",center:""}},[t._v(t._s(t.wtgz.wtyqwwczs))]),t._v(" "),s("span",{staticClass:"text",attrs:{col:"5",center:""}},[t._v("逾期未完成")])]),t._v(" "),s("div",{staticClass:"mid__right-item",attrs:{"flex-column":"",col:"2"}},[s("span",{staticClass:"nums",attrs:{col:"6",center:""}},[t._v(t._s(t.wtgz.wtwjjsjzs))]),t._v(" "),s("span",{staticClass:"text",attrs:{col:"5",center:""}},[t._v("无解决时间")])])])]),t._v(" "),s("div",{staticClass:"wtgz-list",attrs:{col:"5",flex:""}},[s("div",{staticClass:"wtgz-list__left ",attrs:{col:"5"}},[s("h4",[t._v("最近提出")]),t._v(" "),t._l(t.wtgz.zjtcwtList,function(e,a){return null!=t.wtgz.zjtcwtList&&0!=t.wtgz.zjtcwtList.length?s("div",{staticClass:"list__left--item right-split"},[s("h5",{attrs:{title:e.bt}},[s("a",{attrs:{href:"javaScript:void(0)"},on:{click:function(s){t.handleOpenQuestionDetail(e.wid)}}},[t._v(t._s(a+1)+"."+t._s(e.bt))])]),t._v(" "),s("span",{class:{tag:!0,"tag-green":"已受理"==e.zt,"tag-ywc":"已完成"==e.zt,"tag-yellow":"已延期"==e.zt,"tag-red":"未受理"==e.zt}},[t._v(t._s(e.zt))]),t._v(" "),s("span",{staticClass:"time"},[t._v(t._s(e.fbrq))])]):t._e()}),t._v(" "),null==t.wtgz.zjtcwtList||0==t.wtgz.zjtcwtList.length?s("div",{staticClass:"wtgz-list__empty"},[s("p",{staticStyle:{"line-height":"100px","font-weight":"700"}},[t._v("暂无内容")])]):t._e()],2),t._v(" "),s("div",{staticClass:"wtgz-list__left",attrs:{col:"5"}},[s("h4",[t._v("最近催办")]),t._v(" "),t._l(t.wtgz.zjcbwtList,function(e,a){return null!=t.wtgz.zjcbwtList&&0!=t.wtgz.zjcbwtList.length?s("div",{staticClass:"list__left--item right-split"},[s("h5",{attrs:{title:e.bt}},[t._v(t._s(a+1)+"."+t._s(e.bt))]),t._v(" "),s("span",{class:{tag:!0,"tag-green":"已受理"==e.zt,"tag-ywc":"已完成"==e.zt,"tag-yellow":"已延期"==e.zt,"tag-red":"未受理"==e.zt}},[t._v(t._s(e.zt))]),t._v(" "),s("span",{staticClass:"time"},[t._v(t._s(e.fbrq))])]):t._e()}),t._v(" "),null==t.wtgz.zjcbwtList||0==t.wtgz.zjcbwtList.length?s("div",{staticClass:"wtgz-list__empty"},[s("p",{staticStyle:{"line-height":"100px","font-weight":"700"}},[t._v("暂无内容")])]):t._e()],2)])])])},staticRenderFns:[]};var T=s("Z0/y")(j,z,!1,function(t){s("mByi")},null,null).exports,S={data:function(){return{xmcbLists:[{name:"南广学院主数据平台",value:"8000"},{name:"南广学院主数据平台",value:"8000"},{name:"南广学院主数据平台",value:"8000"}],xmcbFBS:[{name:"实施",value:100},{name:"二开",value:100},{name:"可变",value:100}],xmcbZXQK:[{name:"实施",value:100},{name:"二开",value:100},{name:"可变",value:100}],fbqkfy:null,zxqkfy:null,zxywc:null}},props:{xmcb:{type:Object,default:function(){return{}}}},mounted:function(){var t=this;this.xmcbFBS[0].value=this.xmcb.sszfy,this.xmcbFBS[1].value=this.xmcb.ekzfy,this.xmcbFBS[2].value=this.xmcb.kbzfy,this.xmcbZXQK[0].value=this.xmcb.ssjszfy,this.xmcbZXQK[1].value=this.xmcb.ekjszfy,this.xmcbZXQK[2].value=this.xmcb.kbjszfy,this.xmcbFBS.forEach(function(e,s,a){t.fbqkfy+=parseInt(e.value)}),this.xmcbZXQK.forEach(function(e,s,a){t.zxqkfy+=parseInt(e.value)}),this.zxywc=(this.zxqkfy/this.fbqkfy*100).toFixed(0)},methods:{},components:{}},A={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-body height100 xmcb",attrs:{"flex-column":""}},[s("div",{attrs:{col:"1"}},[s("span",{staticClass:"introText mr-20"},[t._v("分包计划结束时间")]),s("span",{staticClass:"baseText"},[t._v(t._s(t.xmcb.fbzdjsrq))]),t._v(" "),s("span",{staticClass:"tag tag-red"},[t._v("已超期")])]),t._v(" "),s("div",{staticClass:"xmcb-box",attrs:{flex:"",col:"14"}},[s("div",{staticClass:"xmcb-box__card",attrs:{col:"3","flex-column":""}},[s("div",{staticClass:"xmcb-box__card01",attrs:{col:"1",flex:"",colcenter:"",spacebetween:""}},[s("span",{staticClass:"pull-left introText",staticStyle:{flex:"100px 0 0","font-size":"16px","text-indent":"18px"}},[t._v("分包情况")]),t._v(" "),s("div",{staticClass:"pull-right height100",staticStyle:{flex:"1 0 0"},attrs:{flex:"",spacearound:""}},t._l(t.xmcbFBS,function(e){return s("div",{staticClass:"vertical-items",attrs:{"flex-column":""}},[s("span",{staticClass:"nums",attrs:{col:"6",colcenter:""}},[t._v(t._s(e.value)+"元")]),t._v(" "),s("span",{staticClass:"introText",attrs:{col:"5","text-center":""}},[t._v(t._s(e.name))])])}))]),t._v(" "),s("div",{staticClass:"xmcb-box__card02",attrs:{col:"1",flex:"",colcenter:"",spacebetween:""}},[s("span",{staticClass:"pull-left introText",staticStyle:{flex:"100px 0 0","font-size":"15px","padding-left":"20px"}},[t._v("执行情况"),s("br"),s("span",{staticStyle:{"font-size":"12px"}},[t._v("已完成 "),s("span",{staticStyle:{color:"#19BE6B","font-weight":"bold"}},[t._v(t._s(t.zxywc)+"%")])])]),t._v(" "),s("div",{staticClass:"pull-right height100",staticStyle:{flex:"1 0 0"},attrs:{flex:"",spacearound:""}},t._l(t.xmcbZXQK,function(e){return s("div",{staticClass:"vertical-items",attrs:{"flex-column":""}},[s("span",{staticClass:"nums",attrs:{col:"6",colcenter:""}},[t._v(t._s(e.value)+"元")]),t._v(" "),s("span",{staticClass:"introText",attrs:{col:"5","text-center":""}},[t._v(t._s(e.name))])])}))])]),t._v(" "),s("div",{staticClass:"xmcb-box__list",attrs:{col:"2","flex-column":""}},[s("h4",{attrs:{col:"1",flex:"",colcenter:""}},[t._v("最近结算：")]),t._v(" "),t._l(t.xmcbLists,function(e){return s("div",{attrs:{col:"1"}},[s("span",{staticClass:"pull-left introText"},[t._v(t._s(e.name))]),t._v(" "),s("span",{staticClass:"pull-right money"},[t._v(t._s(e.value)+"元")])])})],2)])])},staticRenderFns:[]};var q=s("Z0/y")(S,A,!1,function(t){s("ueVV")},null,null).exports,D=s("oFuF"),L={data:function(){return{dialogVisible:!1,syqkLis:[],syqkIndex:0,schoolNames:"",xmpzkItems:[{name:"会议纪要",value:10},{name:"会议纪要",value:10},{name:"会议纪要",value:10},{name:"会议纪要",value:10},{name:"会议纪要",value:10},{name:"会议纪要",value:10},{name:"会议纪要",value:10},{name:"会议纪要",value:10}],syqkItems:[{name:"应用总量",value:10},{name:"访问总量",value:10},{name:"用户总量",value:10},{name:"本月访问量",value:10},{name:"本月用户量",value:10}],schoolNamesOptions:[],xmtj:{},ywxdm:""}},props:{xmbh:{type:String,default:""},label:{type:String,default:"overview"},isAll:{type:Boolean,default:!0}},mounted:function(){var t=this;this.getXmTjInfo(),D.a.$on("handleCommitSuccess",function(e){t.getXmTjInfo()})},computed:{isAllxm:function(){return this.isAll}},methods:{chexkTaskQuestionDetail:function(){this.$emit("checkSkipDetail","question")},chexkTaskProcessDetail:function(){this.$emit("checkSkipDetail","process")},chexkTaskConfigDetail:function(){this.$emit("checkSkipDetail","files")},selectSyqk:function(t){this.syqkIndex=t,this.ywxdm=this.syqkLis[t].YWYDM,this.getDwTj(this.ywxdm)},getDwTj:function(t){var e=this;Object(l.a)({xmbh:this.xmbh,ywxdm:t}).then(function(t){var s=t.data;"success"==s.state&&(e.syqkItems[0].value=s.data.yyzs,e.syqkItems[1].value=s.data.fwzs,e.syqkItems[2].value=s.data.yhzs,e.syqkItems[3].value=s.data.byfwzs,e.syqkItems[4].value=s.data.byyhzs)})},chooseItem:function(){this.dialogVisible=!this.dialogVisible},handleEdit:function(t){this.xmbh=t.xmbh,this.xmmc=t.xmmc,this.dialogVisible=!1},getXmTjInfo:function(){var t=this;Object(l.f)({xmbh:this.xmbh,isAll:this.isAll}).then(function(e){var s=e.data;"success"==s.state&&(t.xmtj=s.data,t.xmpzkItems=s.data.pzkList,t.xmpzkItems&&t.xmpzkItems.length?t.xmpzkItems.forEach(function(e,s,a){t.xmpzkItems[s].wjjmc=t.xmpzkItems[s].wjjmc.substring(2)}):t.xmpzkItems=[])}),Object(l.g)({xmbh:this.xmbh}).then(function(e){var s=e.data;"success"==s.state&&(s.data?(t.syqkLis=s.data,t.getDwTj(t.syqkLis[0].YWYDM)):t.syqkLis=[])})}},watch:{xmbh:function(){this.getXmTjInfo()},isAllxm:function(){this.getXmTjInfo()}},components:{Card:a.a,CircleBar:i.a,PannelJdgz:r,PannelWtgz:T,PannelXmcb:q}},O={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"view-pannel1 height100",attrs:{"flex-column":""}},[s("div",{attrs:{"flex-1":"","flex-column":""}},[s("div",{staticClass:"pannel1-top",attrs:{col:"6",flex:""}},[s("card",{attrs:{col:"5"}},[s("div",{staticClass:"card-head",attrs:{slot:"head"},slot:"head"},[s("h3",{staticClass:"pull-left"},[t._v(t._s(t.isAll?"项目问题跟踪":"我的问题跟踪"))]),t._v(" "),s("span",{staticClass:"pull-right card-head__more",on:{click:t.chexkTaskQuestionDetail}},[t._v("查看问题明细>")])]),t._v(" "),s("pannel-wtgz",{attrs:{slot:"body",wtgz:t.xmtj},slot:"body"})],1),t._v(" "),s("card",{attrs:{col:"5"}},[s("div",{staticClass:"card-head",attrs:{slot:"head"},slot:"head"},[s("h3",{staticClass:"pull-left"},[t._v(t._s(t.isAll?"项目进度跟踪":"我的进度跟踪"))]),t._v(" "),s("span",{staticClass:"pull-right card-head__more",on:{click:t.chexkTaskProcessDetail}},[t._v("查看进度明细>")])]),t._v(" "),s("pannel-jdgz",{attrs:{slot:"body",xmtj:t.xmtj,xmbh:t.xmbh,isAll:t.isAll},slot:"body"})],1)],1),t._v(" "),s("div",{staticClass:"pannel1-mid",attrs:{col:"4",flex:""}},[s("card",{attrs:{col:"3"}},[s("div",{staticClass:"card-head",attrs:{slot:"head"},slot:"head"},[s("h3",{staticClass:"pull-left"},[t._v("项目配置库")]),t._v(" "),s("span",{staticClass:"pull-right card-head__more",on:{click:t.chexkTaskConfigDetail}},[t._v("查看配置明细>")])]),t._v(" "),s("div",{staticClass:"card-body card-body__xmpzk",attrs:{slot:"body",flex:""},slot:"body"},[t._l(t.xmpzkItems,function(e){return s("div",{staticClass:"horizenl-card__items horizenl-card__xmpzk"},[s("div",{staticClass:"pull-left introText xmpzk-card"},[t._v(t._s(e.wjjmc))]),t._v(" "),s("div",{staticClass:"pull-right nums"},[t._v(t._s(e.wjzs))])])}),t._v(" "),t.xmpzkItems&&0!=t.xmpzkItems.length?t._e():s("div",{staticStyle:{"text-align":"center",width:"100%","padding-top":"50px"}},[s("img",{attrs:{src:"static/img/none.png",alt:""}}),t._v(" "),s("p",{staticClass:"empty_content"},[t._v("无配置库信息")])])],2)]),t._v(" "),t.syqkLis&&0!=t.syqkLis.length?s("card",{attrs:{col:"3"}},[s("div",{staticClass:"card-head",attrs:{slot:"head"},slot:"head"},[s("h3",[t._v("使用情况")])]),t._v(" "),s("div",{staticClass:"card-body card-body__syqk height100",attrs:{slot:"body","flex-column":""},slot:"body"},[s("div",{attrs:{col:"1",colcenter:""}},[s("ul",{staticClass:"syqk"},t._l(t.syqkLis,function(e,a){return s("li",{class:{active:t.syqkIndex===a},on:{click:function(e){t.selectSyqk(a)}}},[t._v(t._s(e.YWYMC))])}))]),t._v(" "),s("div",{staticStyle:{"flex-wrap":"wrap"},attrs:{flex:"",col:"4"}},t._l(t.syqkItems,function(e,a){return s("div",{staticClass:"vertical-items vertical-items__syqk",attrs:{"flex-column":""}},[s("span",{staticClass:"introText fs-16",attrs:{col:"6",center:""}},[t._v(t._s(e.name))]),t._v(" "),s("span",{staticClass:"nums",attrs:{col:"6",center:""}},[t._v(t._s(e.value))])])}))])]):t._e(),t._v(" "),t.syqkLis&&0!=t.syqkLis.length?t._e():s("div",{staticStyle:{"margin-left":"36px"},attrs:{col:"3"}})],1)])])},staticRenderFns:[]};var I=s("Z0/y")(L,O,!1,function(t){s("EAaq")},"data-v-f516dd12",null);e.a=I.exports},g3dG:function(t,e,s){"use strict";var a=s("2CHb"),i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{background:"#EAEAEA",height:"calc(100vh - 90px)"}},[s("div",{staticClass:"complain-list"},[s("div",{staticClass:"complain-query"},[s("p",{staticStyle:{"font-size":"14px !important","margin-bottom":"10px !important"}},[s("span",{class:{"isshown-query":!0,"el-icon-arrow-up":!t.queryLJshow,"el-icon-arrow-down":t.queryLJshow},on:{click:t.handleQueryShow}}),t._v("　"),s("span",{staticStyle:{"font-weight":"700"}},[t._v("高级查询")]),t._v("　\r\n             "),s("el-input",{staticStyle:{width:"300px"},attrs:{size:"mini",placeholder:"请输入投诉人工号/手机号/项目编号/项目名称"},on:{change:t.searchComplant},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),t._v("　\r\n             "),s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handlequeryComplant}},[t._v("查询")])],1),t._v(" "),t.queryLJshow?s("div",[s("p",{staticClass:"query-list",attrs:{"flex-align":""}},[s("span",{staticClass:"query-title"},[t._v("查询状态 : ")]),t._v(" "),s("span",[s("span",{class:{"bg-active":""==t.cxzt},attrs:{"data-type":""},on:{click:t.handleCXZT}},[t._v("全部")]),t._v(" "),s("span",{class:{"bg-active":"1"==t.cxzt},attrs:{"data-type":"1"},on:{click:t.handleCXZT}},[t._v("未处理")]),t._v(" "),s("span",{class:{"bg-active":"2"==t.cxzt},attrs:{"data-type":"2"},on:{click:t.handleCXZT}},[t._v("处理中")]),t._v(" "),s("span",{class:{"bg-active":"3"==t.cxzt},attrs:{"data-type":"3"},on:{click:t.handleCXZT}},[t._v("已关闭")])])]),t._v(" "),s("p",{staticClass:"query-list",attrs:{"flex-align":""}},[s("span",{staticClass:"query-title"},[t._v("是否催办:")]),t._v(" "),s("span",[s("span",{class:{"bg-active":""==t.sfcb},attrs:{"data-type":""},on:{click:t.handleSFCB}},[t._v("全部")]),t._v(" "),s("span",{class:{"bg-active":"1"==t.sfcb},attrs:{"data-type":"1"},on:{click:t.handleSFCB}},[t._v("是")]),t._v(" "),s("span",{class:{"bg-active":"0"==t.sfcb},attrs:{"data-type":"0"},on:{click:t.handleSFCB}},[t._v("否")])])]),t._v(" "),s("p",{staticClass:"query-list",attrs:{"flex-align":""}},[s("span",{staticClass:"query-title"},[t._v("投诉类别 : ")]),t._v(" "),s("span",[s("span",{class:{"bg-active":""==t.tslb},attrs:{"data-type":""},on:{click:t.handleTSLB}},[t._v("全部")]),t._v(" "),t._l(t.complaintType,function(e,a){return s("span",{key:a,class:{"bg-active":t.tslb==e.label},attrs:{"data-type":e.label},on:{click:t.handleTSLB}},[t._v(t._s(e.mc))])})],2)]),t._v(" "),2==t.showCondition?s("p",{staticClass:"query-list",attrs:{"flex-align":""}},[s("span",{staticClass:"query-title"},[t._v("区域战队: ")]),t._v(" "),s("span",[s("span",{class:{"bg-active":""==t.gczd},attrs:{"data-type":""},on:{click:t.handleGCZD}},[t._v("全部")]),t._v(" "),t._l(t.gczdList,function(e,a){return s("span",{key:a,class:{"bg-active":t.gczd==e.label},attrs:{"data-type":e.label},on:{click:t.handleGCZD}},[t._v(t._s(e.mc))])})],2)]):t._e()]):t._e()]),t._v(" "),s("div",{staticStyle:{background:"#fff","box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","margin-top":"10px",padding:"10px","border-radius":"4px"}},[s("el-button",{attrs:{type:"danger"},on:{click:t.handleComplain}},[t._v("我要投诉")]),t._v(" "),s("hr",{staticStyle:{"border-top":"1px solid #eee",margin:"8px 0 0 0 !important"}}),t._v(" "),s("ul",[t._l(t.complainList,function(e,a){return s("li",[s("div",{staticClass:"complain-logo"},[1==e.zt||2==e.zt?s("img",{attrs:{src:"static/img/tousu.png",alt:""}}):t._e(),t._v(" "),3==e.zt?s("span",{staticClass:"el-icon-success"}):t._e()]),t._v(" "),s("div",{staticClass:"complain-content"},[s("p",{attrs:{"data-wid":e.wid},on:{click:t.getComplaint}},[s("span",[t._v(t._s(e.tsbt))])]),t._v(" "),s("p",{staticStyle:{color:"#363748","font-size":"12px"}},[t._v(t._s(e.tssj))]),t._v(" "),s("p",{staticStyle:{"white-space":"nowrap"}},[s("span",{staticStyle:{display:"inline-block",width:"50%"}},[s("span",{staticClass:"complain-content-info-front"},[t._v("投诉人单位：")]),t._v(t._s(e.ssdwmc))]),t._v(" "),s("span",{staticStyle:{display:"inline-block",width:"50%"}},[s("span",{staticClass:"complain-content-info-front"},[t._v("投诉人：")]),t._v(t._s(e.tsrxm))])]),t._v(" "),s("p",{staticClass:"complain-content-info"},[s("span",{staticClass:"complain-content-tscp",attrs:{title:e.cpmc}},[s("span",{staticClass:"complain-content-info-front"},[t._v("投诉产品 : ")]),t._v(t._s(e.cpmc))]),t._v(" "),s("span",[s("span",{staticClass:"complain-content-info-front"},[t._v("投诉类别 : ")]),t._v(t._s(e.tslbmc))])]),t._v(" "),s("p",[s("span",{staticStyle:{display:"inline-block",width:"100%",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"},attrs:{title:e.xmmc}},[s("span",{staticClass:"complain-content-info-front"},[t._v("投诉项目 : ")]),t._v(t._s(e.xmmc))])]),t._v(" "),s("p",{staticClass:"complainOprater"},[e.edita?s("span",{staticClass:"el-icon-edit",on:{click:function(e){t.complainEdit(a)}}},[s("span",{staticStyle:{color:"#409EFF"}},[t._v(" 编辑")])]):t._e(),t._v("　\r\n               "),e.edita?s("span",{staticClass:"el-icon-delete",attrs:{"data-wid":e.wid},on:{click:t.complainDelect}},[s("span",{staticStyle:{color:"#f00"}},[t._v(" 删除")])]):t._e()])]),t._v(" "),s("div",{staticClass:"complain-oprate"},[s("span",{class:{"lx-wcl":1==e.zt,"lx-clz":2==e.zt,"lx-ycl":3==e.zt},staticStyle:{"font-size":"16px",color:"#f00"}},[t._v(t._s(1==e.zt?"未处理":2==e.zt?"处理中":"已关闭"))]),s("br")])])}),t._v(" "),0==t.complainList.length?s("div",{staticStyle:{"text-align":"center","font-size":"20px","padding-top":"100px"}},[s("img",{attrs:{src:"static/img/empty.png",alt:""}}),t._v(" "),s("p",[t._v("暂无投诉")])]):t._e()],2)],1)]),t._v(" "),s("div",{staticStyle:{"text-align":"center",padding:"20px 0"}},[t.total>8&&null!=t.total?s("pagination",{attrs:{total:t.total,currentPage:t.currentPage,pageSize:t.pageSize},on:{handleCurrentChange:t.handleCurrentChange}}):t._e()],1),t._v(" "),s("el-dialog",{attrs:{title:"投诉内容","close-on-click-modal":!1,visible:t.complainVisible,width:"800px"},on:{"update:visible":function(e){t.complainVisible=e}}},[s("div",{staticClass:"complain-cplist",staticStyle:{padding:"10px"}},[s("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[s("el-form-item",{staticStyle:{"margin-bottom":"15px"},attrs:{label:"投诉类别",required:""}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择投诉类别",size:"mini"},model:{value:t.form.tslb,callback:function(e){t.$set(t.form,"tslb",e)},expression:"form.tslb"}},t._l(t.complaintType,function(t,e){return s("el-option",{key:t.label,attrs:{label:t.mc,value:t.label}})}))],1),t._v(" "),s("el-form-item",{staticStyle:{"margin-bottom":"15px"},attrs:{label:"项目名称",required:""}},[s("el-input",{attrs:{size:"mini",placeholder:"请选择项目",readonly:""},model:{value:t.xmmc,callback:function(e){t.xmmc=e},expression:"xmmc"}})],1),t._v(" "),s("el-form-item",{staticStyle:{"margin-bottom":"15px"},attrs:{label:"产品"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择产品 / 搜索产品名称",size:"mini",filterable:""},model:{value:t.form.cp,callback:function(e){t.$set(t.form,"cp",e)},expression:"form.cp"}},[s("el-option",{attrs:{label:"无",value:"&"}}),t._v(" "),t._l(t.cpList,function(t,e){return s("el-option",{key:e,attrs:{label:t.mc,value:t.mc+"&"+t.label}})})],2)],1),t._v(" "),s("el-form-item",{staticStyle:{"margin-bottom":"15px"},attrs:{label:"投诉对象"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择投诉对象（可多选）",size:"mini"},model:{value:t.form.object,callback:function(e){t.$set(t.form,"object",e)},expression:"form.object"}},t._l(t.tsdxList,function(t,e){return s("el-option",{key:e,attrs:{label:t.userName,value:t.userName+","+t.userId}})}))],1),t._v(" "),s("el-form-item",{staticStyle:{"margin-bottom":"15px","line-height":"3"},attrs:{label:"标题",required:""}},[s("el-input",{attrs:{placeholder:"请输入投诉标题",size:"mini"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),t._v(" "),s("div",{staticClass:"complain-textarea"},[s("span",[t._v("投诉内容")]),t._v(" "),s("div",{attrs:{id:"summernote"}})]),t._v(" "),s("div",{staticStyle:{width:"100%","text-align":"right"}},[s("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("提交")])],1)],1)])],1)},staticRenderFns:[]};var l=function(t){s("2G+0")},n=s("Z0/y")(a.a,i,!1,l,"data-v-059f2e43",null);e.a=n.exports},"h+Lz":function(t,e){},hu4V:function(t,e){},l8d2:function(t,e){},lEoy:function(t,e,s){t.exports=s.p+"static/img/wtgz-card2.3d61b7d.png"},mByi:function(t,e){},"n+/p":function(t,e){},n2r4:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAfCAYAAAAfrhY5AAAABGdBTUEAALGPC/xhBQAABl5JREFUSA2tV0tsVGUU/u7cx7w605m+gRaGR3hFCVgsDx8YNUhwoS7QKroBF+pCY+JO3ejSuNMQ40ZXxjSoUWNQIjGiJmJ5RECBlNAWWpC203am874z43f+O492CmXScJJ/7n/vPf/5zvnOOf9/RytSsCiRZQUOF4e2KAtG3asKKSB9leMKkL0B2HEuLYEbAcBsBryrAE+E/vjqMntn8Pw0MP0nED8N5MaBol0yLBGXRZwgExrNmU2AfzMQ2g4YnC8g2oK0x08AE0cJOkYTOo1z3EmKdKSYB6wQEH4MaNzJFbMdrRq4NXgxB4x/B0z97mjWA1q16czECUlL4/1Ay9PE99ZqYD64AN/sI81/kTbLSWthkTUpcMUs0HAv0L6fDnjmODCfj/HvgdgJpDMunLsYx3SMzphUszhcdVS1qBglfYM3OgOInyWTX/OFsFGVuQU3c4bFRapNN4aGZ/Dye+fg8+jYuiGIB+8LY9s9IbQ309jtiCBYKmFj4GocJ/+N4ddTUby4dyke3dlCu2TSvZxpeKCCXqU9z9a59hHbiBWtG0ikbPxxZhKffTuCY/2TyNkFbN0YxOEPtsDvpc+12wNZ+aRvGF/+dB2jY1nquLCruwmv7VuONasbgAy7RFqy83UGF1YOVCOPnyLwTRX1b/0TePfQAGbogEGjPQTt6vBgx6Yw3EL/LUIv8tnYZBYT0znk8gUYhq78O356knMNkWXsfXuKKWDbNu1R4E7kBeZ1hFGnr6moLw8n8Et/FGu6fFjN0Ra2YPnpp8Yc5ubmTVkRFvhKCnwsmiHtKZwbiKP/QkxdDz7ViYPPknKJ3uJm1PUG68dXqvbMICk/5KwWK1JgHg7JbZ4/2QJsjhyB5dZmCuQqHFiMykV2TK4xhBUZOm2I2EWkyYTO7cGUIlRCD5ceAHwb4dCeGmQhsiU0U1F1fTSFS4z+0mACQzfSpDODaMxGImkjS4M5jgLbT0AF3CBYMGAiHDTQ0mihq92DVZ1erOzwYhnT5bEIU25X2SHTxKuAS64lTBoZvZ7CC2//jUFelT4fC9saHXfJhFK6qHm57gqcCO2yRt7r1G9gYTaHTPTuXoJXe1eQCSoIs1LUFCfyfIJThxaNK2NsF4lGIqtf5uummaqLQ0mcv8xOcsw7OHaMVzKnjAvlIvRaqGtrsiosOS8W9ysMmEzLiiU1W6vsohVw3e1YJ2dev4kNET9sqai7IMJg9/qgCqxijrUl9DuR637eSD4o9HbPjhZFey28aOSY2zSTWxmFAjJ8lmcktfoSQIRRd29sdLpGAdCKQWcI5OTcbHdQ5SWL4pGeZmxZG8BJ9qnFFrLFOEeraSBispotD0Iug4eshiSPz//yWQyk07iWy0FOe4t8SwXY7Ir9T3SgkWmUdnWELlptauqAeyMsCFIv53BRg8en462XIjj4/nnEs3ms97jxXKgVu/yNaDfc8LpcbAynwCTaLJmYsnM4nZrB4fg4js/EkcwUsJ1nQS/3dun3isgHh2elunV2OOm9kY+B1DDZKH0wMOJP+4ZwsW8Kb7Z1osPtVpQLA7NMOUb4K7GadMhm+r6auIkvXFF8+M4GrFvFfb0Mrj4yGHUX93ee79WDZfo3nuOHaUWKQVlT7ZH4OQXXkTzIbLkx1etb/ohXcgK3asg+byCwjud3bparcrY37+Xevlstr3QfAt088paRdskaRdYwTf7HfTAOuKGtcKmsiHFWl1OfJR2VaHlO0vQeA9YrHgTW1gLLpxWP1uA2KjpSjVzuk/8Ao59zIsXh5FQeS1kWUyy6C3nYZ7MojPA+yfoukGzWkhbSoK/UYWwyoS9nPFIP4uBsEco7eoEAP6tKMhdcHkZ/5EfjkSr9FU1OpDzpVzHJkFlQih1uIpqXYG4O8bkWVNYL3aGHgdZneFMNaj64eDj+DT8eWQNSmbOUxY4SWV+14TgxK7UlLV74UHazYA/Qto9rSvVUUpgPrl7QgehRjmNczBpQTlRN1jWTIETCD7HInpwHLK9uAy6vKFIDEz/wCGSSZTOUo21OyKJUIwqU/FvcuJr5xdKwuUaherswuOjJ36QZfmJN9zPPo2SC+WOvO46UDZU4F1rdSwi4hVRvZemzxxeQO4OXF0vu5D9a6gp7l+e//FcTR6Tc5b+Zu83ZuaRda3JbNlF7rR+8duVduP8fJfiKXRWGkwgAAAAASUVORK5CYII="},p3vS:function(t,e,s){"use strict";var a=s("3cXf"),i=s.n(a),l=s("Q3je"),n=s("YkBq"),c={data:function(){return{listt0:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],list0:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],name:"",partyArr:[],dynamicTags:[],selectShow:!1,ssryArr:[{value:"选项1",label:"人员1"},{value:"选项2",label:"人员2"},{value:"选项3",label:"人员3"},{value:"选项4",label:"人员4"},{value:"选项5",label:"人员5"}],taskCpmc:"",taskLcbmc:"",editTaskInfo:{},taskForm:{},isSesion:!0,taskCyz:[]}},props:{lcbrw:{type:Array,default:function(){return[]}},taskData:{type:Object,default:function(){return{}}},dialog:{type:Boolean,default:!0}},mounted:function(){var t=this;this.partyArr=[],this.listt0.forEach(function(e,s,a){-1!=t.dynamicTags.indexOf(t.listt0[s].label)&&t.partyArr.push(s)})},methods:{handleClose:function(t){var e=this;this.$confirm("是否删除此参与者?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.g)({xmbh:e.taskData.xmbh,rwbh:e.taskData.rwbh,yhbh:t.userId}).then(function(s){"success"==s.data.state&&e.dynamicTags.splice(e.dynamicTags.indexOf(t),1)})}).catch(function(){})},addUser:function(t){t.stopPropagation(),this.selectShow=!this.selectShow},selectHide:function(t){"el-input__inner"!=t.target.className&&(this.selectShow=!1,this.userListShow=!1)},searchPerson:function(t){t.cancelBubble=!0,this.selectShow=!0},addTaskParty:function(t){var e=this,s=t.currentTarget.getAttribute("data-label"),a=s.split("&")[2],i=s.split("&")[1],l=s.split("&")[0],c=[];this.dynamicTags.forEach(function(t,s,a){c.push(e.dynamicTags[s].userName)}),c.includes(s.split("&")[0])||(Object(n.d)({xmbh:this.taskData.xmbh,rwbh:this.taskData.rwbh,yhbh:i,yhxm:l}).then(function(t){"success"==t.data.state&&e.dynamicTags.push(e.listt0[a])}),this.selectShow=!this.selectShow)},handleLcbtask:function(t){this.taskLcbmc=this.lcbrw[t].rwmc,this.taskForm.lcbbh=this.lcbrw[t].lcbbh},chooseSSry:function(t){this.taskForm.ssrbh=t.split("&")[0],this.taskForm.ssrxm=t.split("&")[1]},handleCommit:function(){var t=this;if(!this.validate())return!0;this.editTaskInfo={lcbbh:this.taskForm.lcbbh,xmbh:this.taskForm.xmbh,rwmc:this.taskForm.rwmc,jhksrq:this.taskForm.jhksrq,jhjsrq:this.taskForm.jhjsrq,ssrxm:this.taskForm.ssrxm,ssrbh:this.taskForm.ssrbh,yxj:this.taskForm.yxj,rwxq:this.taskForm.rwxq,jhgs:this.taskForm.jhgs,cpmc:this.taskForm.cpmc,cpbh:this.taskForm.cpbh},Object(l.a)(this.editTaskInfo).then(function(e){"success"==e.data.state&&t.$alert("修改成功","提示",{confirmButtonText:"确定",type:"success",callback:function(e){t.isSesion=!0,t.$emit("handleEditTaskSuc","")}})})},validate:function(){return this.taskForm.rwmc?this.taskForm.jhksrq?this.taskForm.jhjsrq?this.taskForm.ssrxm?!!this.taskForm.rwxq||(this.$alert("请填写任务内容","提示",{confirmButtonText:"确定",type:"error"}),!1):(this.$alert("请选择实施人员","提示",{confirmButtonText:"确定",type:"error"}),!1):(this.$alert("请选择结束日期","提示",{confirmButtonText:"确定",type:"error"}),!1):(this.$alert("请选择开始日期","提示",{confirmButtonText:"确定",type:"error"}),!1):(this.$alert("请填写任务名称","提示",{confirmButtonText:"确定",type:"error"}),!1)}},watch:{dialog:function(t,e){if(!t){if(!this.isSesion){var s=JSON.parse(sessionStorage.getItem("taskInfo"));this.taskForm.wid=s.wid,this.taskForm.fbbh=s.fbbh,this.taskForm.lcbbh=s.lcbbh,this.taskForm.xmbh=s.xmbh,this.taskForm.rwmc=s.rwmc,this.taskForm.jhksrq=s.jhksrq,this.taskForm.jhjsrq=s.jhjsrq,this.taskForm.ssrxm=s.ssrxm,this.taskForm.ssrbh=s.ssrbh,this.taskForm.yxj=s.yxj,this.taskForm.rwxq=s.rwxq,this.taskForm.jhgs=s.jhgs}this.selectShow=!1}},lcbrw:function(t,e){var s=this;this.isSesion=!1,sessionStorage.setItem("taskInfo",i()(this.taskData)),this.taskForm=this.taskData;var a=this.taskForm.lcbms;this.taskLcbmc=a,Object(n.v)({rwbh:this.taskData.rwbh,xmbh:this.taskData.xmbh}).then(function(t){var e=t.data;s.taskCyz=[],"success"==e.state&&e.data.forEach(function(t,e,a){"参与者"==t.roleName&&(s.taskCyz.push(t),s.dynamicTags=s.taskCyz)})}),Object(n.r)({xmbh:this.taskData.xmbh}).then(function(t){var e=t.data;"success"==e.state&&0!=e.data.length&&null!=e.data&&(s.list0=e.data,s.listt0=e.data,s.ssryArr=e.data)}),this.partyArr=[],this.listt0.forEach(function(t,e,a){-1!=i()(s.dynamicTags).indexOf(i()(s.listt0[e]))&&s.partyArr.push(e)})},name:function(t,e){var s=this,a=this.list0;this.name?(s.listt0=[],a.forEach(function(t,e,i){(a[e].userId.indexOf(s.name)>=0||a[e].userName.indexOf(s.name)>=0)&&s.listt0.push(a[e])})):s.listt0=a},dynamicTags:function(t,e){var s=this;this.partyArr=[],this.listt0.forEach(function(t,e,a){-1!=i()(s.dynamicTags).indexOf(i()(s.listt0[e]))&&s.partyArr.push(e)})}},activated:function(){}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{on:{click:t.selectHide}},[s("div",{staticStyle:{height:"540px"}},[s("div",{staticClass:"task-detail-dialog-header"},[s("h4",{staticClass:"task-detail-dialog-header-mc"},[t._v(t._s(t.taskForm.cpmc)+" · "+t._s(t.taskLcbmc))])]),t._v(" "),s("div",{staticStyle:{padding:"0 20px 0 0","border-bottom":"1px solid #ccc"}},[s("el-form",{attrs:{size:"small","label-width":"110px"}},[s("el-form-item",{attrs:{label:"关联里程碑"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:t.handleLcbtask},model:{value:t.taskLcbmc,callback:function(e){t.taskLcbmc=e},expression:"taskLcbmc"}},t._l(t.lcbrw,function(t,e){return s("el-option",{key:t.lcbbh,attrs:{label:t.rwmc,value:e}})}))],1),t._v(" "),s("el-form-item",{attrs:{label:"任务名称"}},[s("el-input",{model:{value:t.taskForm.rwmc,callback:function(e){t.$set(t.taskForm,"rwmc",e)},expression:"taskForm.rwmc"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"开始日期"}},[s("el-col",{attrs:{span:10}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.taskForm.jhksrq,callback:function(e){t.$set(t.taskForm,"jhksrq",e)},expression:"taskForm.jhksrq"}})],1),t._v(" "),s("el-col",{staticStyle:{"text-align":"center"},attrs:{span:4}},[t._v("结束日期")]),t._v(" "),s("el-col",{attrs:{span:10}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.taskForm.jhjsrq,callback:function(e){t.$set(t.taskForm,"jhjsrq",e)},expression:"taskForm.jhjsrq"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"实施人员"}},[s("el-col",{attrs:{span:10}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择实施人员"},on:{change:t.chooseSSry},model:{value:t.taskForm.ssrxm,callback:function(e){t.$set(t.taskForm,"ssrxm",e)},expression:"taskForm.ssrxm"}},t._l(t.ssryArr,function(t,e){return s("el-option",{key:e,attrs:{label:t.userName,value:t.userId+"&"+t.userName}})}))],1),t._v(" "),s("el-col",{staticStyle:{"text-align":"center"},attrs:{span:4}},[t._v("工时(小时)")]),t._v(" "),s("el-col",{attrs:{span:10}},[s("el-input",{attrs:{placeholder:"请输入工时"},model:{value:t.taskForm.jhgs,callback:function(e){t.$set(t.taskForm,"jhgs",e)},expression:"taskForm.jhgs"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"优先级"}},[s("el-select",{staticStyle:{width:"41.5%"},attrs:{placeholder:"请选择优先级"},model:{value:t.taskForm.yxj,callback:function(e){t.$set(t.taskForm,"yxj",e)},expression:"taskForm.yxj"}},[s("el-option",{attrs:{label:"非常紧急",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"紧急",value:"2"}}),t._v(" "),s("el-option",{attrs:{label:"普通",value:"3"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"任务内容"}},[s("el-input",{attrs:{type:"textarea",rows:4,resize:"none"},model:{value:t.taskForm.rwxq,callback:function(e){t.$set(t.taskForm,"rwxq",e)},expression:"taskForm.rwxq"}})],1)],1)],1),t._v(" "),s("div",{staticClass:"detail-activities-wrap"},[s("div",{staticClass:"involve-view"},[s("p",[t._v("参与者")]),t._v(" "),t._l(t.dynamicTags,function(e,a){return s("el-tag",{key:a,attrs:{closable:!0,"disable-transitions":!1},on:{close:function(s){t.handleClose(e)}}},[t._v("\n                    "+t._s(e.userName)+"\n                 ")])}),t._v(" "),s("el-button",{staticClass:"button-new-tag",attrs:{type:"primary"},on:{click:t.addUser}},[t._v("+")]),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.selectShow?s("ul",{staticClass:"task_participant"},[s("li",[s("el-input",{attrs:{placeholder:"搜索姓名"},on:{focus:t.searchPerson},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),s("ul",{staticStyle:{height:"180px","overflow-y":"auto"}},t._l(t.listt0,function(e,a){return s("li",{key:a,attrs:{"data-label":e.userName+"&"+e.userId+"&"+a},on:{click:t.addTaskParty}},[s("span",{staticStyle:{display:"inline-block",width:"50px"}},[t._v(t._s(e.userName)+" ")]),t._v(" "),s("span",[t._v(t._s(e.userCode))]),t._v(" "),-1!=t.partyArr.indexOf(a)?s("span",{staticClass:"el-icon-check",staticStyle:{float:"right","margin-top":"5px"}}):t._e()])}))]):t._e()])],2)]),t._v(" "),s("div",{staticStyle:{"text-align":"right",position:"absolute",bottom:"0",width:"100%",padding:"10px"}},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.handleCommit}},[t._v("确定")])],1)])])},staticRenderFns:[]};var o=s("Z0/y")(c,r,!1,function(t){s("h+Lz")},"data-v-1bd4654e",null);e.a=o.exports},qPnF:function(t,e,s){"use strict";var a=s("YkBq"),i=s("9A7R"),l=(s("t5DY"),s("V/8j")),n=s("oFuF"),c=s("1vsE"),r={data:function(){return{UserList:[{xm:"jobs",wid:"01117777"},{xm:"apple",wid:"01117888"}],dialogVisible:!1,isAddCyz:!0,itemCyz:[],itemJfzrr:{},itemYfzrr:{},Isexternal:"",total:null,pageSize:10,innerVisible:!1,form:{name:"",phone:"",pwd:"",email:"",cpx:"",rylx:"1013",yhdw:"",dw:"",bm:"",sex:""},cpxData:[],sexList:[],keyword:"",BtnDisabled:"",rylb:"",dwList:[],bmList:[{mc:"1"},{mc:"2"},{mc:"3"},{mc:"4"}],selectVisible:!1}},props:{fbbh:{type:String,default:""},xmbh:{type:String,default:""},userListShow:{type:Boolean,default:!1},dwmc:{type:String,default:""}},methods:{handleBMfocus:function(){this.selectVisible=!0},handleBMblur:function(){this.selectVisible=!1},chooseBm:function(t){var e=t.target.getAttribute("data-bm");this.form.bm=e},chooseRylb:function(t){this.isAddCyz?this.queryUser(1,!1):this.queryUser(1,!0)},delectUser:function(t,e){var s=this;if("number"==typeof e){var i=t.target.getAttribute("data-wid");this.$confirm("是否删除此参与者?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.f)({xmbh:s.xmbh,yhbh:i}).then(function(t){"success"==t.data.state&&(s.$alert("删除成功","提示",{confirmButtonText:"确定",type:"success"}),s.queryProjectParticipantMap(),s.$emit("addItemuser",""))})}).catch(function(){})}},addStaff:function(t){t.currentTarget.setAttribute("disabled","disabled")},changeJfZrr:function(t){this.isAddCyz=!1,this.queryUser(1,!0),this.dialogVisible=!this.dialogVisible},queryUser:function(t,e){var s=this;Object(a.o)({curPage:t,pageSize:this.pageSize,xmbh:this.xmbh,unittype:this.rylb,needShowCyz:e,keyword:this.keyword||""}).then(function(t){var e=t.data;"success"==e.state&&(s.total=e.data.records,s.UserList=e.data.rows,s.UserList.forEach(function(t,e,s){1==t.userName.slice(0,1)&&(t.userName=t.userName.slice(0,3)+"****"+t.userName.slice(-4))}))})},handleNewAdd:function(){this.queryUser(1,!1),this.isAddCyz=!0,this.BtnDisabled="",this.dialogVisible=!this.dialogVisible},handleCurrentChange:function(t){this.isAddCyz?this.queryUser(t,!1):this.queryUser(t,!0)},addItemCyz:function(t,e){var s=this,i=t.currentTarget.getAttribute("data-info"),l=i.split("&")[1],n=i.split("&")[0];Object(a.c)({xmbh:this.xmbh,yhxm:n,yhbh:l}).then(function(t){"success"==t.data.state?(s.$emit("addItemuser",""),s.queryProjectParticipantMap(),s.UserList[e].state="ytj"):s.BtnDisabled=""})},searchUser:function(t){this.isAddCyz?this.queryUser(1,!1):this.queryUser(1,!0)},closeOutPerson:function(){this.keyword=""},inviteNewuser:function(){this.innerVisible=!this.innerVisible,this.cpxData=[],null==Object(n.m)("cp")||null==Object(n.m)("GenderType")?(Object(n.h)("cp",this.cpxData,!0),Object(n.h)("GenderType",this.sexList)):(this.cpxData=Object(n.m)("cp"),this.sexList=Object(n.m)("GenderType")),this.getUnits(),this.getDepts()},handleCommit:function(){var t=this;this.form.name?/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(this.form.phone.trim())?/\w[-\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]{2,14}/.test(this.form.email.trim())?"1013"==this.form.rylx&&""==this.form.bm?this.$alert("请填写部门","提示",{confirmButtonText:"确定",type:"error"}):"1004"==this.form.rylx&&""==this.form.dw?this.$alert("请选择单位","提示",{confirmButtonText:"确定",type:"error"}):Object(a.a)({xmbh:this.xmbh,name:this.form.name,telNum:this.form.phone,email:this.form.email,pwd:this.form.pwd,cpxdata:this.form.cpx.join("|"),rylx:this.form.rylx,unitnum:"1013"==this.form.rylx?"":this.form.dw.split("&")[0],unit:"1013"==this.form.rylx?"":this.form.dw.split("&")[1],dept:"1004"==this.form.rylx?"":this.form.bm,sex:""==this.form.sex?"0":this.form.sex}).then(function(e){var s=e.data;"success"==s.state?t.$alert("添加成功","提示",{confirmButtonText:"确定",type:"success",callback:function(e){t.isAddCyz?(t.queryUser(1,!1),t.queryProjectParticipantMap()):t.queryUser(1,!0),t.innerVisible=!t.innerVisible}}):t.$alert(s.msg,"提示",{confirmButtonText:"确定",type:"error",callback:function(t){}})}):this.$alert("请输入正确邮箱地址或地址有误","提示",{confirmButtonText:"确定",type:"error"}):this.$alert("请输入手机号码或号码有误","提示",{confirmButtonText:"确定",type:"error"}):this.$alert("请输入姓名","提示",{confirmButtonText:"确定",type:"error"})},addItemJfzrr:function(t){var e=this,s=t.currentTarget.getAttribute("data-info"),i=s.split("&")[1],l=s.split("&")[0];Object(a.k)({xmbh:this.xmbh,yhxm:l,yhbh:i}).then(function(t){"success"==t.data.state&&(e.$alert("修改成功","提示",{confirmButtonText:"确定",type:"success",callback:function(t){e.$emit("addItemuser","")}}),e.queryProjectParticipantMap(),e.dialogVisible=!e.dialogVisible)})},queryProjectParticipantMap:function(){var t=this;Object(a.s)({xmbh:this.xmbh}).then(function(e){var s=e.data;"success"==s.state&&(s.data.jf?(t.itemJfzrr=s.data.jf,t.itemJfzrr.roleName=t.itemJfzrr.roleName.slice("0,3"),t.itemJfzrr.roleName=t.itemJfzrr.roleName.split(",")):t.itemJfzrr={},s.data.yf?(t.itemYfzrr=s.data.yf,t.itemYfzrr.roleName=t.itemYfzrr.roleName.slice("0,3"),t.itemYfzrr.roleName=t.itemYfzrr.roleName.split(",")):t.itemYfzrr={},t.itemCyz=s.data.qt)})},getUnits:function(){var t=this;Object(l.g)({dwlx:2,keyword:""}).then(function(e){var s=e.data;"success"==s.state&&(t.dwList=s.data)})},getDepts:function(){var t=this;Object(l.b)({dwbh:"",dwmc:this.dwmc}).then(function(e){var s=e.data;"success"==s.state&&(null!=s.data?t.bmList=s.data:t.bmList=[])})}},mounted:function(){this.queryProjectParticipantMap(),c.a.init(document.querySelector(".item-addUser-list"))},components:{pagination:i.a}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"item-addUser"},[s("div",{staticClass:"item-addUser-list"},[s("ul",[s("li",[s("p",{staticClass:"item-zrrname"},[t._v(t._s("{}"==JSON.stringify(t.itemJfzrr)?"暂无":t.itemJfzrr.userName)+"　")]),t._v(" "),s("p",{staticClass:"item-user-role",attrs:{title:t.itemJfzrr.roleName}},[t._l(t.itemJfzrr.roleName,function(e,a){return"{}"!=JSON.stringify(t.itemJfzrr)?s("el-tag",{key:a,staticStyle:{"margin-right":"5px"},attrs:{size:"mini"}},[t._v(t._s(2==a?e+"...":e))]):t._e()}),t._v(" "),"{}"==JSON.stringify(t.itemJfzrr)?s("el-tag",{attrs:{size:"mini"}},[t._v("甲方")]):t._e()],2)]),t._v(" "),s("li",[s("p",{staticClass:"item-zrrname"},[t._v(t._s("{}"==JSON.stringify(t.itemYfzrr)?"暂无":t.itemYfzrr.userName)+"　")]),t._v(" "),s("p",{staticClass:"item-user-role",attrs:{title:t.itemYfzrr.roleName}},[t._l(t.itemYfzrr.roleName,function(e,a){return"{}"!=JSON.stringify(t.itemYfzrr)?s("el-tag",{key:a,staticStyle:{"margin-right":"5px"},attrs:{size:"mini"}},[t._v(t._s(2==a?e+"...":e))]):t._e()}),t._v(" "),"{}"==JSON.stringify(t.itemYfzrr)?s("el-tag",{attrs:{size:"mini"}},[t._v("乙方")]):t._e()],2)]),t._v(" "),t._l(t.itemCyz,function(e,a){return t.itemCyz.length?s("li",[s("p",{staticClass:"item-zrrname"},[t._v(t._s(e.userName)+"　")]),t._v(" "),s("p",{staticClass:"item-user-role",attrs:{title:e.roleName}},[t._l(e.roleName.split(","),function(e,a){return s("el-tag",{key:a,staticStyle:{"margin-right":"5px"},attrs:{size:"mini"}},[t._v(t._s(e))])}),t._v("　\n             ")],2)]):t._e()})],2)]),t._v(" "),s("el-dialog",{attrs:{title:"人员列表",visible:t.dialogVisible,width:"600px","close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e},close:t.closeOutPerson}},[s("ul",{staticClass:"item-user-list"},[s("li",{staticStyle:{position:"relative"},attrs:{flex:""}},[s("el-input",{class:{"isAddCyz-cyz":t.isAddCyz,"isAddCyz-jf":!t.isAddCyz},attrs:{size:"mini",placeholder:"搜索人员姓名/编号"},on:{change:t.searchUser},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),t._v(" "),t.isAddCyz?s("span",{staticStyle:{width:"40%"}},[t._v("人员类别:\n                         "),s("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择",size:"mini"},on:{change:t.chooseRylb},model:{value:t.rylb,callback:function(e){t.rylb=e},expression:"rylb"}},[s("el-option",{attrs:{label:"无",value:""}}),t._v(" "),s("el-option",{attrs:{label:"金智",value:"0"}}),t._v(" "),s("el-option",{attrs:{label:"学校",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"合作伙伴",value:"2"}})],1)],1):t._e(),t._v(" "),s("span",{staticClass:"el-icon-circle-plus  invite-newUser",on:{click:t.inviteNewuser}},[t._v("添加")])],1),t._v(" "),t._l(t.UserList,function(e,a){return s("li",[s("span",[t._v(t._s(e.nickName))]),t._v(" "),s("span",[t._v(t._s(e.userName))]),t._v(" "),s("span",{attrs:{title:e.unit}},[t._v(t._s(e.unit))]),t._v(" "),s("span",[t.isAddCyz?s("el-button",{attrs:{disabled:"ytj"==e.state,size:"mini","data-info":e.nickName+"&"+e.uid},on:{click:function(e){t.addItemCyz(e,a)}}},[t._v(t._s("ytj"==e.state?"已添加":"添加"))]):s("el-button",{attrs:{size:"mini","data-info":e.nickName+"&"+e.uid},on:{click:t.addItemJfzrr}},[t._v("修改为(甲方责任人)")])],1)])})],2),t._v(" "),s("div",{staticStyle:{padding:"10px 0","text-align":"center"}},[s("pagination",{attrs:{pageSize:t.pageSize,total:t.total},on:{handleCurrentChange:t.handleCurrentChange}})],1),t._v(" "),s("el-dialog",{attrs:{width:"600px",title:"添加外部人员",visible:t.innerVisible,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){t.innerVisible=e}}},[s("el-form",{staticStyle:{margin:"10px 0"},attrs:{model:t.form,size:"mini","label-width":"80px",inline:!0}},[s("el-form-item",{attrs:{label:"姓名",required:""}},[s("el-input",{staticStyle:{width:"200px"},attrs:{required:"",clearable:"",placeholder:"请输入姓名"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"密码",required:""}},[s("el-input",{staticStyle:{width:"200px"},attrs:{type:"password",required:"",clearable:"",placeholder:"6-12位字母、数字和下划线"},model:{value:t.form.pwd,callback:function(e){t.$set(t.form,"pwd",e)},expression:"form.pwd"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"手机号",required:""}},[s("el-input",{staticStyle:{width:"200px"},attrs:{required:"",clearable:"",placeholder:"请输入手机号"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"邮箱",required:""}},[s("el-input",{staticStyle:{width:"200px"},attrs:{required:"",clearable:"",placeholder:"请输入邮箱"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"负责业务"}},[s("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",multiple:""},model:{value:t.form.cpx,callback:function(e){t.$set(t.form,"cpx",e)},expression:"form.cpx"}},t._l(t.cpxData,function(t,e){return s("el-option",{key:e,attrs:{label:t.mc,value:t.mc+","+t.label}})}))],1),t._v(" "),s("el-form-item",{attrs:{label:"人员类型",required:""}},[s("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.form.rylx,callback:function(e){t.$set(t.form,"rylx",e)},expression:"form.rylx"}},[s("el-option",{attrs:{label:"学校成员",value:"1013"}}),t._v(" "),s("el-option",{attrs:{label:"合作伙伴",value:"1004"}})],1)],1),t._v(" "),"1004"==t.form.rylx?s("el-form-item",{attrs:{label:"单位",required:""}},[s("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.form.dw,callback:function(e){t.$set(t.form,"dw",e)},expression:"form.dw"}},t._l(t.dwList,function(t,e){return s("el-option",{key:e,attrs:{title:t.text,label:t.text,value:t.id+"&"+t.text}})}))],1):s("el-form-item",{attrs:{label:"部门",required:""}},[s("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请输入部门/选择部门"},on:{blur:t.handleBMblur,focus:t.handleBMfocus},model:{value:t.form.bm,callback:function(e){t.$set(t.form,"bm",e)},expression:"form.bm"}}),t._v(" "),s("el-collapse-transition",[t.selectVisible?s("ul",{staticClass:"bm-select"},[t._l(t.bmList,function(e,a){return 0!=t.bmList.length?s("li",{key:a,attrs:{"data-bm":e.mc},on:{click:t.chooseBm}},[t._v(t._s(e.mc))]):t._e()}),t._v(" "),0==t.bmList.length?s("div",{staticStyle:{color:"#aaa","text-align":"center"}},[t._v("无数据")]):t._e()],2):t._e()])],1),t._v(" "),s("el-form-item",{attrs:{label:"性别"}},[s("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}},[s("el-option",{attrs:{label:"男",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"女",value:"2"}})],1)],1),t._v(" "),s("p",{staticStyle:{color:"#aaa","font-weight":"700","font-size":"12px",padding:"0 20px"}},[t._v("( 注 : 手机号为用户默认登录账号 )")])],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"mini"},on:{click:function(e){t.innerVisible=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleCommit}},[t._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var h=s("Z0/y")(r,o,!1,function(t){s("l8d2")},"data-v-704cf9c0",null);e.a=h.exports},sxBF:function(t,e){},u4Y3:function(t,e,s){"use strict";var a=s("3cXf"),l=s.n(a),n=s("YkBq"),c={data:function(){return{listt0:[],list0:[],dynamicTags:[],selectShow:!1,input:"",name:"",partyArr:[],cpInfo:{jfzrr:"",yfzrr:"",bz:""},options:[],jfshown:!0,yfshown:!0,changeObj:{}}},props:{dialogEditTaskVisible:{type:Boolean,default:""},cpinfo:{type:Object,default:function(){return{}}},xmbh:{type:String,default:""}},mounted:function(){var t=this;this.partyArr=[],this.listt0.forEach(function(e,s,a){-1!=l()(t.dynamicTags).indexOf(l()(t.listt0[s]))&&t.partyArr.push(s)}),this.queryUser(),this.queryProductParticipant()},methods:{selectHide:function(t){"el-input__inner"!=t.target.className&&(this.selectShow=!1)},handleClose:function(t){var e=this;this.$confirm("删除此参与人?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){deleteProductParticipant({xmbh:e.xmbh,cpbh:e.cpinfo.cpbh,cpmc:e.cpinfo.cp,yhxm:t.userName,yhbh:t.userId}).then(function(s){"success"==s.data.state&&e.$alert("这是一段内容","标题名称",{confirmButtonText:"确定",callback:function(s){e.dynamicTags.splice(e.dynamicTags.indexOf(t),1)}})})}).catch(function(){})},addUser:function(t){t.stopPropagation(),this.selectShow=!this.selectShow},addTaskParty:function(t){var e=this,s=t.currentTarget.getAttribute("data-label"),a=s.split("&")[2],l=s.split("&")[1],c=s.split("&")[0],r=[];0!=this.dynamicTags.length&&(this.dynamicTags.forEach(function(t,s,a){r.push(e.dynamicTags[s].userName)}),-1!=r.indexOf(this.dynamicTags[i].userName))||(Object(n.b)({xmbh:this.xmbh,cpbh:this.cpinfo.cpbh,cpmc:this.cpinfo.cp,yhxm:c,yhbh:l}).then(function(t){"success"==t.data.state&&e.dynamicTags.push(e.listt0[a])}),this.selectShow=!this.selectShow)},changeCPJfzrr:function(){this.jfshown=!this.jfshown},changeCPYfzrr:function(){this.yfshown=!this.yfshown},CommitChangeCPJfzrr:function(){this.modifyProductLeader(this.cpInfo.jfzrr.split("&")[1],this.cpInfo.jfzrr.split("&")[0],!0)},CommitChangeCPYfzrr:function(){this.modifyProductLeader(this.cpInfo.yfzrr.split("&")[1],this.cpInfo.yfzrr.split("&")[0])},queryUser:function(){var t=this;Object(n.r)({xmbh:this.cpinfo.xmbh}).then(function(e){var s=e.data;"success"==s.state&&(t.options=s.data,t.listt0=s.data,t.list0=s.data)})},queryProductParticipant:function(){var t=this;Object(n.q)({xmbh:this.xmbh,cpbh:this.cpinfo.cpbh,cpmc:this.cpinfo.cp}).then(function(e){var s=e.data;"success"==s.state&&(null==s.data?t.dynamicTags=[]:t.dynamicTags=s.data)})},modifyProductLeader:function(t,e,s){var a=this;Object(n.k)({xmbh:this.xmbh,yhbh:t,yhxm:e,cpmc:this.cpinfo.cp,cpbh:this.cpinfo.cpbh,isJf:s||""}).then(function(t){"success"==t.data.state&&(a.changeObj.isJf=s,a.changeObj.xm=e,s?a.$alert("修改成功","提示",{confirmButtonText:"确定",type:"success",callback:function(t){a.cpinfo.jfzrrxm=a.cpInfo.jfzrr.split("&")[0]}}):a.$alert("修改成功","提示",{confirmButtonText:"确定",type:"success",callback:function(t){a.cpinfo.yfzrrxm=a.cpInfo.yfzrr.split("&")[0]}}),a.yfshown=!0,a.$emit("changeCPzrr",a.changeObj))})}},watch:{name:function(t,e){var s=this,a=this.list0;this.name?(s.listt0=[],a.forEach(function(t,e,i){(a[e].userId.indexOf(s.name)>=0||a[e].userName.indexOf(s.name)>=0)&&s.listt0.push(a[e])})):s.listt0=a},dialogEditTaskVisible:function(t,e){var s=this;t?(this.jfshown=!0,this.yfshown=!0,this.queryUser(),this.queryProductParticipant(),this.partyArr=[],this.listt0.forEach(function(t,e,a){-1!=l()(s.dynamicTags).indexOf(l()(s.listt0[e]))&&s.partyArr.push(e)})):this.selectShow=!1},dynamicTags:function(t,e){var s=this;this.partyArr=[],1==this.dialogEditTaskVisible&&this.listt0.forEach(function(t,e,a){-1!=l()(s.dynamicTags).indexOf(l()(s.listt0[e]))&&s.partyArr.push(e)})}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"edit-task-dialog",on:{click:t.selectHide}},[s("div",{staticClass:"task-detail-scenario-infos-wrap"},[s("div",[s("span",{staticClass:"el-icon-service"},[t._v(" 责任人")]),t._v(" "),s("div",{staticStyle:{width:"82%","white-space":"nowrap"}},[s("div",{staticStyle:{float:"left"}},[s("span",{staticClass:"item_zrr"},[t._v("甲")]),t._v(" :\n                "),s("span",{staticStyle:{width:"50px",display:"inline-block"}},[t._v(t._s(""==t.cpinfo.jfzrrxm?"暂无":t.cpinfo.jfzrrxm))]),t._v(" "),t.jfshown?t._e():s("span",[s("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",size:"mini",placeholder:"请选择/搜索责任人"},model:{value:t.cpInfo.jfzrr,callback:function(e){t.$set(t.cpInfo,"jfzrr",e)},expression:"cpInfo.jfzrr"}},t._l(t.options,function(t,e){return s("el-option",{key:e,attrs:{label:t.userName,value:t.userName+"&"+t.userId}})}))],1),t._v(" "),s("span",[s("el-button",{attrs:{size:"mini"},on:{click:t.changeCPJfzrr}},[t._v(t._s(1==this.jfshown?"修改":"取消修改"))])],1),t._v(" "),t.jfshown?t._e():s("span",[s("el-button",{attrs:{size:"mini"},on:{click:t.CommitChangeCPJfzrr}},[t._v("确定修改")])],1)]),t._v(" "),s("div",{staticStyle:{float:"left"}},[s("span",{staticClass:"item_zrr item_zrr_YF"},[t._v("乙")]),t._v(" :\n              "),s("span",{staticStyle:{width:"50px",display:"inline-block"}},[t._v(t._s(""==t.cpinfo.yfzrrxm?"暂无":t.cpinfo.yfzrrxm))]),t._v(" "),t.yfshown?t._e():s("span",[s("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",size:"mini",placeholder:"请选择/搜索责任人"},model:{value:t.cpInfo.yfzrr,callback:function(e){t.$set(t.cpInfo,"yfzrr",e)},expression:"cpInfo.yfzrr"}},t._l(t.options,function(t,e){return s("el-option",{key:e,attrs:{label:t.userName,value:t.userName+"&"+t.userId}})}))],1),t._v(" "),s("span",[s("el-button",{attrs:{size:"mini"},on:{click:t.changeCPYfzrr}},[t._v(t._s(1==this.yfshown?"修改":"取消修改"))])],1),t._v(" "),t.yfshown?t._e():s("span",[s("el-button",{attrs:{size:"mini"},on:{click:t.CommitChangeCPYfzrr}},[t._v("确定修改")])],1)])])])]),t._v(" "),s("div",{staticClass:"involve-view"},[s("p",[t._v("参与者")]),t._v(" "),t._l(t.dynamicTags,function(e,a){return s("el-tag",{key:a,attrs:{closable:1==e.del,"disable-transitions":!1},on:{close:function(s){t.handleClose(e)}}},[t._v("\n                    "+t._s(e.userName)+"\n                 ")])}),t._v(" "),s("el-button",{staticClass:"button-new-tag",attrs:{type:"primary"},on:{click:t.addUser}},[t._v("+")]),t._v(" "),s("el-collapse-transition",[t.selectShow?s("ul",{staticClass:"task_participant"},[s("li",[s("el-input",{attrs:{placeholder:"搜索姓名"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),s("ul",{staticStyle:{height:"180px","overflow-y":"auto"}},t._l(t.listt0,function(e,a){return s("li",{key:a,attrs:{"data-label":e.userName+"&"+e.userId+"&"+a},on:{click:t.addTaskParty}},[s("span",{staticStyle:{display:"inline-block",width:"50px"}},[t._v(t._s(e.userName)+" ")]),t._v(" "),s("span",[t._v(t._s(e.userCode))]),t._v(" "),-1!=t.partyArr.indexOf(a)?s("span",{staticClass:"el-icon-check",staticStyle:{float:"right","margin-top":"5px"}}):t._e()])}))]):t._e()])],2)])},staticRenderFns:[]};var o=s("Z0/y")(c,r,!1,function(t){s("ub8/")},"data-v-718b038a",null);e.a=o.exports},"ub8/":function(t,e){},ueVV:function(t,e){},wHbX:function(t,e){},x7oc:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAfCAYAAAAfrhY5AAAABGdBTUEAALGPC/xhBQAABUNJREFUSA29V1lsVFUY/s5d5s5C6Rg70n3BCgnUClWsLxgTRaENaKIm6os++oJvxhcS4zPxwcQYSVSiwURNSN1AUyFVqZa6piQKFkmxLTKQOm1nprPdze/caWc6nWmpUDzpnXPuuef/v3//T4XLgesZjg04JBQCUJXr4QBttVTuTBzmmbPIjfwOe/wS7Ng0XNOB4vNBqQlDbW2EsW0rtI7NEOtCq2IrrqW5c+kyUn1fItM/CGsySkArr62yoC0N50jjuRAURGttQKDnAQT27oISuXVFIZYHt22kjx5H8u2PYF2+CqHRSKq6IjPiwyUd+OgUour5p2H0PLQsTUVwdzaO+KuHkP50AFCkT68BWoG9a9kQNE7oqb2o2v8c4PeXnSoDd+MJzB44iPTAaQjDyJu4jGyVG4xlN5dD8NFdWH/gBfLzlRAuOC6/SX8mDlLjgWEIKamM5BsZpBc+A6lPTiD5+rv0iYyN4igBT/cdx9yxkxABSqjw4Fo8KgPRr2Hug4+RPTlYROaqkGoyqhPvfQgYAu5/d3EJ0/IX8rRo1beOwLejE6K62jtSAE9/1s/cjVFr+vkmDOFTYU5OIPvVN/A/sa8I7s7OIj10ClhHWdZc60WaqALprwm+dzctzJogP1lnR6k1c9lP5BuMsUVQZUuhazAvXYR9cRzq5vY8uDl61ktn4St4oYxwrTZc04Q1+kcR3L5yBQ4DXJSm4VrhlfBxXQdWdAIysjRZCt3UNJSAyhJaknklRGv14ioq8ZIeOw0O+6LCZsEUKybeWkFV4MNy7brE49BkL1ZCPqi6DqH+Dz5nlVOC+jw4zaCEIxD6eT433+yyZKvhfKv1VNXq65H7jWbXb2KeebrKdqFCbayb15yTens7lO9ldWEdljLQLxZLu7OkEczTr2piS4GMX3nPsMjHU4trEfDzwrHJ4+FprjZtglbXDHtqEnOOwEgsjfZqA/X0jUZpJAN51bM52xUEks7SKLAUXILKkWA//3UmgxpDRUvIyNOxvmstGyE2NHln8hHmD0HvvA/i26OIpYCXh6LgfQRdkSA2h/1oCxuoCWmoC+io5bx4KEScydkYm8khkbUxOZvDhXgGI1NpnJ/J4qWuDbijI4SsLbPKgX7XTpo6z6PASeu8H+a5U2iencKRxzbi8MgUDv1yFSqZS62qWXo7aoN48+FmUJlCazY0gb7zM3jthyuwLQdJXipNmuju24I43NuKjogfOSGvuRbUhjZoW7oLspfcZOxzg8iceAe6riKWdvDGT1dxIZbBtroQHmxeD8MvsOkWg6WYuUoW0sDyiaYsROMmxqazOPbntBczz26LoLshhAwFcuk3wZQO9O6H0nRnZXB5DzdPv4/cmX7mPXNfBh73ZAZKsLmcg+/+msPoPxmk+EHnDTYSUrGzpQqt4XzuyrggmWcZU4JKSseC754noXX1FoDlomB2b5cg+r2PU4Ik7LFh2AoLD80qI9/HeWg8iRe/GEeWpl0YMhif2V6DV/Y0wpLIBJbxIjEV/gjHhLrlEWjb2UaXjBKzF77ZOVgjfew+A2RCIBYiaV6pSTSeQzrLPbkhAdijN1TpqGJMlCQCtRUKe/bW3QTv8XgU+M8vKoN7H104Ez+y138OJ3GZYAr/WA1lSi3hItPPA5Y/UlhKpVQ3Q9+yD6Kuc8np4usK4POHsnE448Ow/v4ZbnKSQWvmPyyWwEPmhuYnaAPUpm4oDTv4HiwiVVhdG3yBiK5wkxNA7CLnKH2Q4n8nJmOCndkIQQTrgXAbxPpamjgffAuky82rB1+Oww3s/wvPoRYYhifv6QAAAABJRU5ErkJggg=="},xE7f:function(t,e,s){"use strict";var a=s("GRVU"),i=s("1bZv"),l=s("aozt"),n=s.n(l),c=(s("DEjr"),{data:function(){return{fileList:{},fileBread:[],fjbh:"",fjobj:{},uploadAction:"",fileListArr:[],fileData:[],filesData:[],filesArr:[],dialogVisible:!1,SVNValue:"",baseUrl:null}},props:{xmbh:{type:String,default:""}},mounted:function(){var t=this;this.openRealFolder(),this.baseUrl=window.baseurl,Object(i.b)({xmbh:this.xmbh}).then(function(e){var s=e.data;"success"==s.state&&(t.SVNValue=s.data.svn)}),window.onerror=function(){return!0}},methods:{handleUpdateFile:function(){var t=this;Object(a.m)({xmbh:this.xmbh}).then(function(e){var s=e.data;"success"==s.state?t.$alert("更新成功","提示",{confirmButtonText:"确定",type:"success",callback:function(e){t.openRealFolder()}}):t.$alert(s.msg,"提示",{confirmButtonText:"确定",type:"error"})})},handleCommitSVN:function(){var t=this;Object(i.c)({xmbh:this.xmbh,svn:this.SVNValue}).then(function(e){var s=e.data;"success"==s.state?t.$alert("修改成功！","提示",{confirmButtonText:"确定",type:"success",callback:function(e){t.dialogVisible=!1}}):t.$alert(s.msg,"提示",{confirmButtonText:"确定",type:"warning"})})},handlechangeSVN:function(){this.dialogVisible=!this.dialogVisible},handlecheckout:function(){var t=this;Object(a.b)({xmbh:this.xmbh}).then(function(e){var s=e.data;"success"==s.state?t.$alert("检出成功","提示",{confirmButtonText:"确定",type:"success",callback:function(e){t.openRealFolder()}}):t.$alert(s.msg,"提示",{confirmButtonText:"确定",type:"error",callback:function(t){}})})},handleAllfile:function(){this.openRealFolder(),this.fileBread=[]},handleBreadFile:function(t){var e=this,s=t.currentTarget.getAttribute("data-fjbh");s!=this.fjbh&&Object(a.i)({path:s,xmbh:this.xmbh}).then(function(t){var a=t.data;"success"==a.state&&(e.fileList=a.data,e.fileBread.forEach(function(t,a,i){t.fjbh.includes(s)&&e.fileBread.splice(a+1,9999)}))})},handleFile:function(t){var e=this,s=t.currentTarget.getAttribute("data-type"),i=t.currentTarget.getAttribute("data-fjbh"),l=t.currentTarget.getAttribute("data-fj");null!=l&&0==l.split("&")[1]||(null==s&&(this.fjbh=i,this.fjobj={fjmc:l.split("&")[0],fjbh:i}),Object(a.i)({path:i,xmbh:this.xmbh}).then(function(t){var a=t.data;"success"==a.state&&(e.fileList=a.data,"back"==s?e.fileBread.pop():1==l.split("&")[1]&&e.fileBread.push(e.fjobj))}))},openRealFolder:function(t){var e=this;Object(a.i)({path:t,xmbh:this.xmbh}).then(function(t){var s=t.data;"success"==s.state?e.fileList=s.data:Object(a.b)({xmbh:e.xmbh}).then(function(t){var s=t.data;"success"==s.state?e.$alert("检出成功","提示",{confirmButtonText:"确定",type:"success",callback:function(t){Object(a.i)({path:"",xmbh:e.xmbh}).then(function(t){var s=t.data;"success"==s.state&&(e.fileList=s.data)})}}):e.$alert(s.msg,"提示",{confirmButtonText:"确定",type:"error",callback:function(t){}})})})},handleRemove:function(t,e){var s=this;this.fileData.forEach(function(e,a,i){e.includes(t.name)&&s.fileData.splice(a,1)})},beforeUpload:function(t){var e=this;if(!(this.filesArr.length>0&&this.filesArr[0].name==t.name)){this.filesArr.push(t);var s=new FormData;return s.append("fileUpload",t),s.append("xmbh",this.xmbh),s.append("path",this.fjbh),n.a.post(window.baseurl+"attachment/uploadXmFile.do",s,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.$alert("上传成功","提示",{confirmButtonText:"确定",type:"success",callback:function(t){Object(a.i)({path:e.fjbh,xmbh:e.xmbh}).then(function(t){var s=t.data;"success"==s.state&&(e.fileList=s.data)})}})}),!1}},handleChange:function(t,e){this.$refs.upload.submit()}}}),r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{width:"80%",margin:"10px auto 0",padding:"20px 10px",background:"#fff","border-radius":"5px","box-shadow":"0 0 5px #ccc"}},[s("ul",{staticClass:"file-list"},[s("div",{staticStyle:{"padding-bottom":"10px","border-bottom":"1px solid #ccc"}},[s("span",{staticClass:"file-breadcrumb",on:{click:t.handleAllfile}},[t._v("全部目录")]),t._v(" "),t._l(t.fileBread,function(e,a){return s("span",{staticClass:"file-breadcrumb",attrs:{"data-fjbh":e.fjbh},on:{click:t.handleBreadFile}},[s("span",{staticClass:"el-icon-arrow-right"}),s("span",[t._v(t._s(e.fjmc))])])}),t._v(" "),s("div",{staticClass:"upload-files"},[s("el-button",{attrs:{size:"mini"},on:{click:t.handlechangeSVN}},[t._v("修改svn地址")]),t._v(" "),0==t.fileList.length||null==t.fileList?s("el-button",{attrs:{size:"mini"},on:{click:t.handlecheckout}},[t._v("检出")]):t._e(),t._v(" "),0!=t.fileList.length&&null!=t.fileList?s("el-button",{attrs:{size:"mini"},on:{click:t.handleUpdateFile}},[t._v("更新")]):t._e(),t._v(" "),s("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{multiple:"",action:t.uploadAction,"before-upload":t.beforeUpload,"on-remove":t.handleRemove,"on-change":t.handleChange,"file-list":t.fileListArr,"show-file-list":!1,"auto-upload":!1}},[s("el-button",{staticStyle:{border:"none"},attrs:{slot:"trigger",size:"mini",icon:"el-icon-circle-plus"},slot:"trigger"},[t._v("上传")])],1)],1)],2),t._v(" "),t._m(0),t._v(" "),"-1"!=t.fileList.parentwid&&"{}"!=JSON.stringify(t.fileList)?s("li",{staticClass:"file-back",attrs:{"data-fjbh":t.fileList.parentwid,"data-type":"back"},on:{click:t.handleFile}},[t._m(1)]):t._e(),t._v(" "),t._l(t.fileList.files,function(e,a){return s("li",{staticStyle:{padding:"0 20px",display:"flex"},attrs:{"data-fj":e.fjmc+"&"+e.sfwjml,"data-fjbh":e.fjbh},on:{click:t.handleFile}},[s("div",{staticStyle:{width:"40%",padding:"6px 0"}},[1==e.sfwjml?s("div",[s("span",[s("img",{staticStyle:{float:"left"},attrs:{src:"static/img/files.png",alt:""}}),s("span",{staticStyle:{float:"left","margin-top":"10px"}},[t._v(t._s(e.fjmc))])])]):t._e(),t._v(" "),0==e.sfwjml?s("div",[s("a",{attrs:{href:t.baseUrl+"attachment/downloadXmFile.do?xmbh="+t.xmbh+"&path="+e.fjbh,target:"blank"}},[s("span",{staticClass:"el-icon-document",staticStyle:{"font-size":"32px",margin:"0 10px 0 0"}}),s("span",{staticStyle:{"margin-top":"10px"}},[t._v(t._s(e.fjmc))])])]):t._e()]),t._v(" "),s("div",{staticClass:"file-size",staticStyle:{"line-height":"44px"}},[t._v("\n            "+t._s(e.fjdx_display)+"\n          ")]),t._v(" "),s("div",{staticClass:"file-cjsj",staticStyle:{"line-height":"44px"}},[t._v("\n            "+t._s(null==e.xgsj?"--":e.xgsj)+"\n          ")])])})],2),t._v(" "),s("el-dialog",{attrs:{title:"修改svn地址",visible:t.dialogVisible,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("div",{staticStyle:{padding:"20px 10px"}},[s("p",{staticStyle:{"font-size":"18px"}},[t._v("svn地址:")]),t._v(" "),s("el-input",{attrs:{placeholder:"请输入SVN地址"},model:{value:t.SVNValue,callback:function(e){t.SVNValue=e},expression:"SVNValue"}}),t._v(" "),s("p",{staticStyle:{"text-align":"right",padding:"10px 0"}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleCommitSVN}},[t._v("提交")])],1)],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"file-header"},[e("p",{staticClass:"file-name"},[this._v("文件名")]),this._v(" "),e("p",{staticClass:"file-size"},[this._v("文件大小")]),this._v(" "),e("p",{staticClass:"file-cjsj",staticStyle:{"padding-right":"30px"}},[this._v("修改时间")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{padding:"10px 20px"}},[e("span",[e("img",{staticStyle:{float:"left"},attrs:{src:"static/img/back.png",alt:""}}),e("span",{staticStyle:{float:"left","margin-top":"10px"}},[this._v("上一级")])])])}]};var o=s("Z0/y")(c,r,!1,function(t){s("dA9e")},"data-v-aec494ba",null);e.a=o.exports},zPPV:function(t,e,s){t.exports=s.p+"static/img/wtgz-card1.5b9b927.png"}});
//# sourceMappingURL=3.85965f7a9e460a06b535.js.map