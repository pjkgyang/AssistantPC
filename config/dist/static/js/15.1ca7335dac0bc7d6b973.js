webpackJsonp([15],{"3MYI":function(t,e){},"6rxg":function(t,e){},"8/4w":function(t,e){},JMHA:function(t,e){},"QN/x":function(t,e){},ZGus:function(t,e){},Zuny:function(t,e,i){"use strict";(function(t){var a=i("nfA5"),s=i("XYo/");e.a={data:function(){return{chooseItemShow:!1,userShow:!1,unitType:"",visible:this.show,itemInfo:{},fwlxList:[],fwxList:[],fwjdList:[],jzzrrList:[],xxzrrList:[],curPage:1,pageSize:12,fwdjData:{xmmc:"",xmbh:"",cpxwids:"",fwxmc:"",fwjd:"",jhjsrq:"",zrrxm:"",zrrbh:"",xxfzrxm:"",xxfzrbh:"",fwnr:"",jfw:"",jhlx:0},pickerBeginDateBefore:{disabledDate:function(t){(new Date).getTime();return t.getTime()<Date.now()-864e5}}}},props:{show:{type:Boolean,default:!1}},components:{itemChoose:a.a,userDialog:s.a},methods:{handleChooseItem:function(t){this.fwdjData.xmmc=t.xmmc,this.fwdjData.xmbh=t.xmbh,this.chooseItemShow=!this.chooseItemShow},addUserSuccess:function(t,e){"0"==t?(this.fwdjData.zrrbh=e.userid,this.fwdjData.zrrxm=e.username):(this.fwdjData.xxfzrxm=e.username,this.fwdjData.xxfzrbh=e.userid),this.userShow=!1},handleChangeFwlx:function(t){},handleChooseUser:function(t){this.unitType=t,this.userShow=!0},handleCommit:function(){var e=this;this.valiDate()&&this.$post(this.API.generateSpecialService,this.fwdjData).then(function(i){"success"==i.state?(e.$message({message:"提交成功",type:"success"}),t("#summernoteTT").summernote("code",""),e.visible=!1,e.$emit("handleCommitZdyjh","")):e.$message({message:i.msg,type:"warning"})})},valiDate:function(){return this.fwdjData.xmbh?this.fwdjData.cpxwids?this.fwdjData.fwxmc?this.fwdjData.fwjd?this.fwdjData.zrrxm?this.fwdjData.xxfzrxm?!/^[\s]*$/.test(this.fwdjData.fwnr)||(this.$message({message:"请填写服务内容",type:"warning"}),!1):(this.$message({message:"请选择学校负责人",type:"warning"}),!1):(this.$message({message:"请选择金智责任人",type:"warning"}),!1):(this.$message({message:"请填写服务阶段",type:"warning"}),!1):(this.$message({message:"请填写服务项",type:"warning"}),!1):(this.$message({message:"请选择服务类型",type:"warning"}),!1):(this.$message({message:"请选择项目",type:"warning"}),!1)}},watch:{show:function(){this.visible=this.show,this.show?this.fwlxList=JSON.parse(sessionStorage.getItem("fwlx")):this.fwlxList=[]}}}}).call(e,i("7t+N"))},cLNR:function(t,e){},wcZu:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("xR1z"),s=i("P+gh"),r={data:function(){return{visible:this.show,pickerBeginDateBefore:{disabledDate:function(t){(new Date).getTime();return t.getTime()<Date.now()-864e5}},tableData:[],cpxids:[]}},props:{show:{type:Boolean,default:!1},xmbh:{type:String,default:""}},methods:{checkboxInit:function(t,e){return"1"!=t.flag},handleSelectionChange:function(t){var e=this;this.cpxids=[],t.forEach(function(t,i,a){e.cpxids.push(t.cpxwid)})},handleClickSure:function(){this.$emit("handleAddservice",this.cpxids)},getSpecialServiceCPX:function(){var t=this;this.$get(this.API.getSpecialServiceCPX,{xmbh:this.xmbh}).then(function(e){"success"==e.state&&(t.tableData=e.data)})}},watch:{show:function(t,e){this.visible=this.show,t&&this.getSpecialServiceCPX()}},components:{}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{title:"选择服务类型",width:"600px",top:"30px",visible:t.visible,"append-to-body":!0,"close-on-click-modal":!1,show:t.show},on:{"update:visible":function(e){t.visible=e},close:function(e){t.$emit("update:show",!1)}}},[i("div",{staticClass:"dialog-bj"},[i("section",[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55",selectable:t.checkboxInit}}),t._v(" "),i("el-table-column",{attrs:{prop:"cpxmc",label:"服务类型"}})],1)],1),t._v(" "),i("section",{staticClass:"pj-btn-group",attrs:{"text-right":""}},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.handleClickSure}},[t._v("确定")]),t._v(" "),i("el-button",{attrs:{size:"small"},on:{click:function(e){t.visible=!1}}},[t._v("取消")])],1)])])],1)},staticRenderFns:[]};var o=i("VU/8")(r,l,!1,function(t){i("6rxg")},"data-v-6728e5e1",null).exports,n=i("Zuny"),c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dialog-container"},[i("el-dialog",{attrs:{title:"添加服务计划",width:"1000px",top:"30px",visible:t.visible,"close-on-click-modal":!1,show:t.show},on:{"update:visible":function(e){t.visible=e},close:function(e){t.$emit("update:show",!1)}}},[i("div",{staticClass:"addPlan"},[i("el-form",{staticClass:"demo-ruleForm",staticStyle:{width:"950px",margin:"0 auto"},attrs:{model:t.fwdjData,inline:!0,size:"mini","label-width":"135px"}},[i("el-form-item",{attrs:{label:"项目名称",required:""}},[i("el-input",{staticStyle:{width:"800px"},attrs:{placeholder:"请选择",readonly:""},model:{value:t.fwdjData.xmmc,callback:function(e){t.$set(t.fwdjData,"xmmc",e)},expression:"fwdjData.xmmc"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-circle-plus-outline"},on:{click:function(e){t.chooseItemShow=!0}},slot:"append"})],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"项目编号",required:""}},[i("el-input",{staticStyle:{width:"325px"},attrs:{size:"mini",type:"text",placeholder:"请选择项目",readonly:""},model:{value:t.fwdjData.xmbh,callback:function(e){t.$set(t.fwdjData,"xmbh",e)},expression:"fwdjData.xmbh"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"服务类型",required:""}},[i("el-select",{staticStyle:{width:"325px"},attrs:{size:"mini",placeholder:"请选择服务类型"},on:{change:t.handleChangeFwlx},model:{value:t.fwdjData.cpxwids,callback:function(e){t.$set(t.fwdjData,"cpxwids",e)},expression:"fwdjData.cpxwids"}},t._l(t.fwlxList,function(t,e){return i("el-option",{key:e,attrs:{label:t.cpxmc,value:t.cpxwid}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"服务项",required:""}},[i("el-input",{staticStyle:{width:"325px"},attrs:{size:"mini",type:"text",placeholder:"请填写服务项"},model:{value:t.fwdjData.fwxmc,callback:function(e){t.$set(t.fwdjData,"fwxmc",e)},expression:"fwdjData.fwxmc"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"服务阶段",required:""}},[i("el-input",{staticStyle:{width:"325px"},attrs:{size:"mini",type:"text",placeholder:"请填写服务阶段"},model:{value:t.fwdjData.fwjd,callback:function(e){t.$set(t.fwdjData,"fwjd",e)},expression:"fwdjData.fwjd"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"金智责任人",required:""}},[i("el-input",{staticStyle:{width:"325px"},attrs:{placeholder:"请选择",readonly:""},model:{value:t.fwdjData.zrrxm,callback:function(e){t.$set(t.fwdjData,"zrrxm",e)},expression:"fwdjData.zrrxm"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-circle-plus-outline"},on:{click:function(e){t.handleChooseUser("0")}},slot:"append"})],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"学校责任人",required:""}},[i("el-input",{staticStyle:{width:"325px"},attrs:{placeholder:"请选择",readonly:""},model:{value:t.fwdjData.xxfzrxm,callback:function(e){t.$set(t.fwdjData,"xxfzrxm",e)},expression:"fwdjData.xxfzrxm"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-circle-plus-outline"},on:{click:function(e){t.handleChooseUser("1")}},slot:"append"})],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"计划结束日期",required:""}},[i("el-date-picker",{staticStyle:{width:"800px"},attrs:{"picker-options":t.pickerBeginDateBefore,clearable:!1,size:"mini",type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.fwdjData.jhjsrq,callback:function(e){t.$set(t.fwdjData,"jhjsrq",e)},expression:"fwdjData.jhjsrq"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"服务内容",required:""}},[i("el-input",{staticStyle:{width:"800px"},attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.fwdjData.fwnr,callback:function(e){t.$set(t.fwdjData,"fwnr",e)},expression:"fwdjData.fwnr"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"交付物",required:""}},[i("el-input",{staticStyle:{width:"325px"},attrs:{size:"mini",type:"text",placeholder:"请填写服务项"},model:{value:t.fwdjData.jfw,callback:function(e){t.$set(t.fwdjData,"jfw",e)},expression:"fwdjData.jfw"}})],1)],1),t._v(" "),i("div",{staticStyle:{"text-align":"right",width:"100%",margin:"10px 0",padding:"0 20px"}},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.handleCommit}},[t._v("确认提交")]),t._v(" "),i("el-button",{attrs:{size:"small"},on:{click:function(e){t.visible=!1}}},[t._v("取消")])],1)],1)]),t._v(" "),i("el-dialog",{attrs:{title:"选择项目",visible:t.chooseItemShow,"close-on-click-modal":!1,width:"800px",top:"30px","append-to-body":""},on:{"update:visible":function(e){t.chooseItemShow=e}}},[i("div",{staticStyle:{padding:"10px"}},[i("itemChoose",{on:{handleEdit:t.handleChooseItem}})],1)]),t._v(" "),i("userDialog",{attrs:{show:t.userShow,unitType:t.unitType},on:{"update:show":function(e){t.userShow=e},addUserSuccess:t.addUserSuccess}})],1)},staticRenderFns:[]};var h=function(t){i("JMHA")},d=i("VU/8")(n.a,c,!1,h,"data-v-31686620",null).exports,f={data:function(){return{visible:this.show,jzzrrList:[],xxzrrList:[],form:{jhjssj:"",jzfzrxm:"",jzfzrbh:"",xxfzrxm:"",xxfzrbh:""},pickerBeginDate:{disabledDate:function(t){(new Date).getTime();return t.getTime()<Date.now()-864e5}}}},methods:{handleChangeJzZrr:function(t){var e=this;this.form.jzfzrbh=t,this.jzzrrList.forEach(function(i){i.userid==t&&(e.form.jzfzrxm=i.username)})},handleChangeZrr:function(t){var e=this;this.form.xxfzrbh=t,this.xxzrrList.forEach(function(i){i.userid==t&&(e.form.xxfzrxm=i.username)})},handleCommit:function(){this.validate()&&this.$emit("handleCommitEdit",this.form)},handleClose:function(){this.visible=!1},getUsers:function(t){var e=this;this.$get(this.API.getUsers,{curPage:1,pageSize:9999,unitType:t,keyword:"",dept:""}).then(function(i){"success"==i.state&&(1==t?e.xxzrrList=i.data.rows:e.jzzrrList=i.data.rows)})},validate:function(){return this.form.jhjssj||this.plxgZrr?this.form.jzfzrbh?!!this.form.xxfzrbh||(this.$alert("请选择学校责任人","提示",{confirmButtonText:"确定",type:"warning"}),!1):(this.$alert("请选择金智责任人","提示",{confirmButtonText:"确定",type:"warning"}),!1):(this.$alert("请填写计划结束日期","提示",{confirmButtonText:"确定",type:"warning"}),!1)}},props:{show:{type:Boolean,default:!1},plxgZrr:{type:Boolean,default:!1},dataInfo:{type:Object,default:function(){return{}}}},watch:{show:function(t,e){this.visible=this.show,t?(this.getUsers(0),this.getUsers(1),this.form.jhjssj="-"==this.dataInfo.jhjssj?"":this.dataInfo.jhjssj,this.form.jzfzrbh=this.dataInfo.jzfzrbh,this.form.jzfzrxm=this.dataInfo.jzfzrxm,this.form.xxfzrbh="-"==this.dataInfo.xxfzrbh?"":this.dataInfo.xxfzrbh,this.form.xxfzrxm="-"==this.dataInfo.xxfzrxm?"":this.dataInfo.xxfzrxm):(this.form.jzfzrbh="",this.form.jzfzrxm="",this.form.xxfzrbh="",this.form.xxfzrxm="",this.form.jhjssj="")}},components:{}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{title:"编辑",width:"700px",top:"30px",visible:t.visible,"append-to-body":!0,"close-on-click-modal":!1,show:t.show},on:{"update:visible":function(e){t.visible=e},close:function(e){t.$emit("update:show",!1)}}},[i("div",{staticClass:"dialog-qrfw"},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"110px",size:"mini"}},[t.plxgZrr?t._e():i("el-form-item",{attrs:{label:"计划结束日期",required:""}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.form.jhjssj,callback:function(e){t.$set(t.form,"jhjssj",e)},expression:"form.jhjssj"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"金智责任人"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择责任人(可按姓名搜索)",filterable:""},on:{change:t.handleChangeJzZrr},model:{value:t.form.jzfzrbh,callback:function(e){t.$set(t.form,"jzfzrbh",e)},expression:"form.jzfzrbh"}},t._l(t.jzzrrList,function(t){return i("el-option",{key:t.userid,attrs:{label:t.username+" ( "+t.usercode+" )",value:t.userid}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"学校责任人"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择责任人(可按姓名搜索)",filterable:""},on:{change:t.handleChangeZrr},model:{value:t.form.xxfzrbh,callback:function(e){t.$set(t.form,"xxfzrbh",e)},expression:"form.xxfzrbh"}},t._l(t.xxzrrList,function(t){return i("el-option",{key:t.userid,attrs:{label:t.username+" ( "+t.usercode+" )",value:t.userid}})}))],1),t._v(" "),i("el-form-item",{attrs:{"text-right":""}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handleCommit}},[t._v("提交")]),t._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:t.handleClose}},[t._v("取消")])],1)],1)],1)])],1)},staticRenderFns:[]};var p=i("VU/8")(f,u,!1,function(t){i("3MYI")},"data-v-06e9f309",null).exports,m={data:function(){return{visible:this.show,texts:["1分","2分","3分","4分","5分"],filterData:{sm:"",pf:5}}},methods:{handleClickSure:function(){this.validate()&&this.$emit("handleClickSure",this.filterData)},validate:function(){return!(this.filterData.pf<=3&&/^[\s]*$/.test(this.filterData.sm))||(this.$alert("请输入备注内容","提示",{confirmButtonText:"确定",type:"warning"}),!1)}},props:{show:{type:Boolean,default:!1},zbwid:{type:String,default:""},btnbh:{type:String,default:""},demandDetail:{type:Object,default:function(){return{}}}},watch:{show:function(t,e){this.visible=this.show,t||(this.filterData.pf=5,this.filterData.sm="")}},components:{}},w={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{title:"确认服务",width:"700px",top:"30px",visible:t.visible,"append-to-body":!0,"close-on-click-modal":!1,show:t.show},on:{"update:visible":function(e){t.visible=e},close:function(e){t.$emit("update:show",!1)}}},[i("div",{staticClass:"dialog-xqqr"},[i("section",[i("div",{attrs:{flex:""}},[i("span",{staticClass:"filter-weight"},[t._v("评价：")]),t._v(" "),i("el-rate",{attrs:{texts:t.texts,"show-text":""},model:{value:t.filterData.pf,callback:function(e){t.$set(t.filterData,"pf",e)},expression:"filterData.pf"}})],1),t._v(" "),i("p",{staticClass:"pj-content"},[i("span",{staticClass:"filter-weight"},[t._v("说明：")]),t._v(" "),i("el-input",{staticStyle:{width:"670px"},attrs:{type:"textarea",rows:5,maxlength:500,placeholder:"请输入备注内容"},model:{value:t.filterData.sm,callback:function(e){t.$set(t.filterData,"sm",e)},expression:"filterData.sm"}})],1)]),t._v(" "),i("section",{staticClass:"pj-btn-group"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.handleClickSure}},[t._v("确定")]),t._v(" "),i("el-button",{attrs:{size:"small"},on:{click:function(e){t.visible=!1}}},[t._v("取消")])],1)])])],1)},staticRenderFns:[]};var v=i("VU/8")(m,w,!1,function(t){i("QN/x")},"data-v-61e3ff97",null).exports,b=i("TNFc"),x={data:function(){return{visible:this.show,clearFile:!1,tbjhData:{sjjsrq:"",gstr:0,sm:"",fjData:""},pickerBeginDateBefore:{disabledDate:function(t){(new Date).getTime();return t.getTime()<Date.now()-864e5}}}},props:{show:{type:Boolean,default:!1},wid:{type:String,default:""}},components:{uploadFiles:b.a},methods:{handleUploadFile:function(t){t.length?this.tbjhData.fjData=t.join(","):this.tbjhData.fjData=""},handleCommit:function(){var t=this;this.valiDate()&&this.$post(this.API.submitSpecialService,{wids:this.wid,sjjsrq:this.tbjhData.sjjsrq,gstr:this.tbjhData.gstr,fjData:this.tbjhData.fjData,sm:this.tbjhData.sm}).then(function(e){"success"==e.state?(t.$message({message:"提报成功",type:"success"}),t.$emit("handleCommitTb",""),t.clearFile=!t.clearFile,t.tbjhData.sjjsrq="",t.tbjhData.gstr=0,t.tbjhData.fjData="",t.tbjhData.sm="",t.visible=!1):t.$alert(e.msg,"提示",{confirmButtonText:"确定",type:"error"})})},valiDate:function(){return this.tbjhData.sjjsrq?this.tbjhData.gstr?!/^[\s]*$/.test(this.tbjhData.sm)||(this.$message({message:"请填写服务内容",type:"warning"}),!1):(this.$message({message:"请填写投入工时",type:"warning"}),!1):(this.$message({message:"请选择计划结束日期",type:"warning"}),!1)}},watch:{show:function(){this.visible=this.show,this.show}}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dialog-container"},[i("el-dialog",{attrs:{title:"提报计划",width:"1000px",top:"30px",visible:t.visible,"close-on-click-modal":!1,show:t.show},on:{"update:visible":function(e){t.visible=e},close:function(e){t.$emit("update:show",!1)}}},[i("div",{staticClass:"addPlan"},[i("el-form",{staticClass:"demo-ruleForm",staticStyle:{width:"950px",margin:"0 auto"},attrs:{model:t.tbjhData,inline:!0,size:"mini","label-width":"135px"}},[i("el-form-item",{attrs:{label:"实际结束日期",required:""}},[i("el-date-picker",{staticStyle:{width:"325px"},attrs:{"picker-options":t.pickerBeginDateBefore,clearable:!1,size:"mini",type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.tbjhData.sjjsrq,callback:function(e){t.$set(t.tbjhData,"sjjsrq",e)},expression:"tbjhData.sjjsrq"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"投入工时",required:""}},[i("el-input",{staticStyle:{width:"325px"},attrs:{size:"mini",type:"text",placeholder:"请填写工时"},model:{value:t.tbjhData.gstr,callback:function(e){t.$set(t.tbjhData,"gstr",e)},expression:"tbjhData.gstr"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"说明",required:""}},[i("el-input",{staticStyle:{width:"800px"},attrs:{type:"textarea",rows:2,placeholder:"请输入说明内容"},model:{value:t.tbjhData.sm,callback:function(e){t.$set(t.tbjhData,"sm",e)},expression:"tbjhData.sm"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"附件",required:""}},[i("uploadFiles",{attrs:{isClear:t.clearFile},on:{handleUploadFile:t.handleUploadFile}})],1)],1),t._v(" "),i("div",{staticStyle:{"text-align":"right",width:"100%",margin:"10px 0",padding:"0 20px"}},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.handleCommit}},[t._v("确认提交")]),t._v(" "),i("el-button",{attrs:{size:"small"},on:{click:function(e){t.visible=!1}}},[t._v("取消")])],1)],1)])],1)},staticRenderFns:[]};var g=i("VU/8")(x,y,!1,function(t){i("8/4w")},"data-v-3945c6ca",null).exports,j=i("0dLS"),z=i("nfA5"),S=(i("oFuF"),{data:function(){return{chooseItemShow:!1,serviceTypeShow:!1,editShow:!1,qrfwShow:!1,bhShow:!1,zjyShow:!1,tbShow:!1,title:"",currentPage:1,pageSize:15,total:0,tableData:[],widsArr:[],wids:"",cpobj:{},rowsData:"",curItem:{},plxgZrr:!1,isjl:!1,curRow:{},filterData:{keyword:"",cpxmc:"",fwzt:"",jhksrq:"",jhjsrq:"",sfgq:""},isJzuser:"",userGroupTag:"",userid:"",rowData:{},isMultiple:!1}},methods:{handleClickSureQrfw:function(t){var e=this;this.$post(this.API.confirmSpecialService,{wids:this.curRow.wid?this.curRow.wid:this.widsArr,pf:t.pf,sm:t.sm}).then(function(t){"success"==t.state?(e.$message({message:"提交成功",type:"success"}),e.pageSpecialService(),e.qrfwShow=!1):e.$alert(t.msg,"提示",{confirmButtonText:"确定",type:"error"})})},handleClickSureBhfw:function(t){var e=this;this.$post(this.API.rejectSpecialService,{wids:this.curRow.wid?this.curRow.wid:this.widsArr,sm:t.sm}).then(function(t){"success"==t.state?(e.$message({message:"驳回成功",type:"success"}),e.pageSpecialService(),e.bhShow=!1):e.$alert(t.msg,"提示",{confirmButtonText:"确定",type:"error"})})},handleCommitTb:function(){this.pageSpecialService()},handleCommitEdit:function(t){var e=this;this.$post(this.API.updateZxfws,{wids:this.plxgZrr?this.widsArr.join(","):this.curRow.wid,jzfzrbh:t.jzfzrbh,jzfzrxm:t.jzfzrxm,xxfzrxm:t.xxfzrxm,xxfzrbh:t.xxfzrbh,jhjssj:t.jhjssj}).then(function(t){"success"==t.state?(e.$message({message:"保存成功",type:"success"}),e.pageSpecialService(),e.editShow=!1):e.$alert(t.msg,"提示",{confirmButtonText:"确定",type:"error"})})},handleCloseDialog:function(){this.recrordShow=!this.recrordShow},handleCommitZdyjh:function(){this.pageSpecialService()},handleAddservice:function(t,e){var i=this;this.$post(this.API.generateSpecialService,{xmbh:this.curItem.xmbh,cpxwids:t.join(","),jhlx:1}).then(function(t){"success"==t.state?(i.$message({message:"保存成功",type:"success"}),i.serviceTypeShow=!i.serviceTypeShow,i.pageSpecialService()):i.$alert(t.msg,"提示",{confirmButtonText:"确定",type:"error"})})},handleChooseItem:function(t){this.curItem=t,this.serviceTypeShow=!this.serviceTypeShow},handleChangeFilter:function(t){this.filterData=t,this.currentPage=1,this.pageSpecialService()},handleSelectionChange:function(t){var e=this;this.widsArr=[],t.forEach(function(t){e.widsArr.push(t.wid)})},handleOprater:function(t,e){var i=this;switch(this.curRow=t,e){case"jl":var a=this.$router.resolve({name:"specialserviceDetail",query:{wid:t.wid,jl:1}}).href;window.open(a,"_blank");break;case"xq":var s=this.$router.resolve({name:"specialserviceDetail",query:{wid:t.wid}}).hrefxq;window.open(s,"_blank");break;case"tb":this.tbShow=!this.tbShow;break;case"fb":this.releaseSpecialService(t.wid);break;case"qr":this.qrfwShow=!0;break;case"bh":this.bhShow=!0;break;case"sc":this.$post(this.API.deleteSpecialService,{wids:t.wid}).then(function(t){"success"==t.state&&(i.$message({message:"删除成功",type:"success"}),i.pageSpecialService())})}},handleClick:function(t,e){var i=this;switch(t){case"bzjh":this.chooseItemShow=!this.chooseItemShow;break;case"export":break;case"edit":this.plxgZrr=!0,this.editShow=!this.editShow;break;case"zdyjh":this.zjyShow=!this.zjyShow;break;case"delete":this.$confirm("是否删除此计划?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.$post(i.API.deleteSpecialService,{wids:i.widsArr}).then(function(t){"success"==t.state&&(i.$message({message:"删除成功",type:"success"}),i.pageSpecialService())})}).catch(function(){});break;case"qr":this.qrfwShow=!0;break;case"bh":this.bhShow=!0;break;case"fb":this.releaseSpecialService(this.widsArr)}},handleSizeChange:function(t){this.pageSize=t,this.currentPage=1,this.pageSpecialService()},handleCurrentChange:function(t){this.currentPage=t,this.pageSpecialService()},handleEdit:function(t){this.curRow=t,this.plxgZrr=!1,this.editShow=!this.editShow},handleCheckDetail:function(t){var e=this.$router.resolve({name:"ZdsfwDetail",query:{wid:t.wid}}).href;window.open(e,"_blank")},pageSpecialService:function(){var t=this;this.$get(this.API.pageSpecialService,{curPage:this.currentPage,pageSize:this.pageSize,cpxmc:this.filterData.cpxmc,fwzt:this.filterData.fwzt,jhksrqmax:this.filterData.jhksrq,jhjsrqmax:this.filterData.jhjsrq,sfgq:this.filterData.sfgq,keyword:this.filterData.keyword}).then(function(e){"success"==e.state?(t.tableData=e.data.rows,t.total=e.data.records):t.$alert(e.msg,"提示",{confirmButtonText:"确定",type:"error"})})},releaseSpecialService:function(t){var e=this;this.$post(this.API.releaseSpecialService,{wids:t}).then(function(t){"success"==t.state?(e.$message({message:"发布成功",type:"success"}),e.pageSpecialService()):e.$alert(t.msg,"提示",{confirmButtonText:"确定",type:"error"})})}},mounted:function(){this.pageSpecialService(),this.isJzuser=sessionStorage.isJZuser,this.userGroupTag=JSON.parse(sessionStorage.userInfo).userGroupTag,this.userid=JSON.parse(sessionStorage.userInfo).uid},props:{},components:{tableLayout:s.a,zxfwFilter:a.a,serviceType:o,editDialog:p,itemChoose:z.a,addplan:d,qrfwDialog:v,bhDialog:j.a,tbDialog:g}}),_={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"myitem-zxfw"},[i("tableLayout",{staticClass:"zxfw-content",attrs:{"flex-column":""}},[i("section",{staticStyle:{"border-bottom":"1px solid #EBEEF5"},attrs:{slot:"top",col:"1"},slot:"top"},[i("zxfwFilter",{attrs:{placeholder:"学校名称/项目名称/项目编号/合同编号"},on:{handleChangeFilter:t.handleChangeFilter}})],1),t._v(" "),i("section",{attrs:{slot:"bottom",col:"2"},slot:"bottom"},[i("section",[i("div",{staticClass:"mb-12",attrs:{flex:"",spacebetween:""}},[i("div",[t.userGroupTag.includes("ZXFWGLY")?i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.handleClick("bzjh")}}},[t._v("生成标准计划")]):t._e(),t._v(" "),t.userGroupTag.includes("ZXFWGLY")?i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.handleClick("zdyjh")}}},[t._v("新增自定义计划")]):t._e(),t._v(" "),t.userGroupTag.includes("ZXFWGLY")?i("el-button",{attrs:{disabled:!t.widsArr.length,type:"primary",size:"mini"},on:{click:function(e){t.handleClick("edit")}}},[t._v("批量修改责任人")]):t._e(),t._v(" "),t.userGroupTag.includes("ZXFWGLY")?i("el-button",{attrs:{disabled:!t.widsArr.length,type:"danger",size:"mini"},on:{click:function(e){t.handleClick("delete")}}},[t._v("删除")]):t._e(),t._v(" "),i("el-button",{attrs:{disabled:!t.widsArr.length,type:"primary",size:"mini"},on:{click:function(e){t.handleClick("fb")}}},[t._v("发布")])],1),t._v(" "),i("div",[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.handleClick("export")}}},[t._v("导出")])],1)]),t._v(" "),i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark",border:""},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{fixed:"left",type:"selection",width:"55"}}),t._v(" "),i("el-table-column",{attrs:{fixed:"left",label:"操作",width:t.userGroupTag.includes("ZXFWGLY")?240:160},scopedSlots:t._u([{key:"default",fn:function(e){return[!t.userGroupTag.includes("ZXFWGLY")&&t.userid!=e.row.jzfzrbh||-1!=e.row.fwzt?t._e():i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){t.handleOprater(e.row,"fb")}}},[t._v("发布")]),t._v(" "),!t.userGroupTag.includes("ZXFWGLY")&&t.userid!=e.row.jzfzrbh||2==e.row.fwzt?t._e():i("el-button",{attrs:{type:"text",size:"mini"}},[i("a",{attrs:{href:"#/specialservice/detail?wid="+e.row.wid+"&jl=1",target:"_blank"}},[t._v("记录")])]),t._v(" "),!t.userGroupTag.includes("ZXFWGLY")&&t.userid!=e.row.jzfzrbh||"0"!=e.row.fwzt?t._e():i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){t.handleOprater(e.row,"tb")}}},[t._v("提报")]),t._v(" "),t.userGroupTag.includes("ZXFWGLY")?i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){t.handleEdit(e.row)}}},[t._v("编辑")]):t._e(),t._v(" "),i("el-button",{attrs:{type:"text",size:"mini"}},[i("a",{attrs:{href:"#/specialservice/detail?wid="+e.row.wid,target:"_blank"}},[t._v("详情")])]),t._v(" "),"-1"==e.row.fwzt?i("el-button",{staticStyle:{color:"#f00"},attrs:{type:"text",size:"mini"},on:{click:function(i){t.handleOprater(e.row,"sc")}}},[t._v("删除")]):t._e(),t._v(" "),"1"==e.row.fwzt&&t.userid==e.row.xxfzrbh?i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){t.handleOprater(e.row,"qr")}}},[t._v("确认")]):t._e(),t._v(" "),"1"==e.row.fwzt&&t.userid==e.row.xxfzrbh?i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){t.handleOprater(e.row,"bh")}}},[t._v("驳回")]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"yh",label:"学校名称","min-width":"200","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"xmmc",label:"项目名称","min-width":"200","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"xmbh",label:"项目编号","min-width":"100","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"htbh",label:"合同编号","min-width":"130","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"cpxmc",label:"产品","min-width":"100","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"fwzt",label:"服务状态","min-width":"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tag",{attrs:{size:"mini",type:1==e.row.fwzt?"success":2==e.row.fwzt?"danger":-1==e.row.fwzt?"info":"primary"}},[t._v(t._s(0==e.row.fwzt?"计划中":1==e.row.fwzt?"已完成":2==e.row.fwzt?"关闭":3==e.row.fwzt?"驳回":"待发布"))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"fwjd",label:"服务阶段","min-width":"120","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"fwx",label:"服务项","min-width":"150","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"fwnr",label:"服务内容","min-width":"220","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"jfw",label:"交付物",width:"200","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"sjkssj",label:"实际开始日期","min-width":"120","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"sjjssj",label:"实际结束日期","min-width":"120","show-overflow-tooltip":""}})],1)],1),t._v(" "),i("div",{staticStyle:{"margin-top":"2px"},attrs:{"text-right":""}},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[15,30,50,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])]),t._v(" "),i("el-dialog",{attrs:{title:"选择项目",visible:t.chooseItemShow,"close-on-click-modal":!1,width:"800px",top:"30px","append-to-body":""},on:{"update:visible":function(e){t.chooseItemShow=e}}},[i("div",{staticStyle:{padding:"10px"}},[i("itemChoose",{on:{handleEdit:t.handleChooseItem}})],1)]),t._v(" "),i("serviceType",{attrs:{show:t.serviceTypeShow,xmbh:t.curItem.xmbh},on:{"update:show":function(e){t.serviceTypeShow=e},handleAddservice:t.handleAddservice}}),t._v(" "),i("editDialog",{attrs:{show:t.editShow,plxgZrr:t.plxgZrr,dataInfo:t.curRow},on:{"update:show":function(e){t.editShow=e},handleCommitEdit:t.handleCommitEdit}}),t._v(" "),i("qrfwDialog",{attrs:{show:t.qrfwShow},on:{"update:show":function(e){t.qrfwShow=e},handleClickSure:t.handleClickSureQrfw}}),t._v(" "),i("addplan",{attrs:{show:t.zjyShow},on:{"update:show":function(e){t.zjyShow=e},handleCommitZdyjh:t.handleCommitZdyjh}}),t._v(" "),i("bhDialog",{attrs:{show:t.bhShow},on:{"update:show":function(e){t.bhShow=e},handleClickSure:t.handleClickSureBhfw}}),t._v(" "),i("tbDialog",{attrs:{show:t.tbShow,wid:t.curRow.wid},on:{"update:show":function(e){t.tbShow=e},handleCommitTb:t.handleCommitTb}})],1)},staticRenderFns:[]};var k=i("VU/8")(S,_,!1,function(t){i("ZGus")},"data-v-fbcdeafa",null);e.default=k.exports},xR1z:function(t,e,i){"use strict";var a=i("mvHQ"),s=i.n(a),r=(i("oFuF"),{data:function(){return{cpList:[],fwnrList:[],ztList:[{lable:"0",mc:"计划中"},{lable:"3",mc:"驳回"},{lable:"1",mc:"已完成"},{lable:"2",mc:"关闭"}],gqList:[{lable:"",mc:"全部"},{lable:"0",mc:"未过期"},{lable:"1",mc:"过期"},{lable:"2",mc:"超期"}],filterWord:{cpxmc:"",cpxbh:"",fwzt:"",sfgq:"",jhksrq:"",jhjsrq:"",jhksrqmin:"",jhksrqmax:"",jhjsrqmin:"",jhjsrqmax:"",tbksrq:"",tbjsrq:""},groupTag:"",sfzk:!0}},props:{filterList:{type:Array,default:function(){return["keyword","date","cp","fwzt","sfgq"]}},placeholder:{type:String,default:"请输入项目名称/项目编号"},xmbh:{type:String,default:""},filterShow:{type:Boolean,default:!0}},methods:{handleExpand:function(){this.sfzk=!this.sfzk},handleSearchBtn:function(){this.$emit("handleChangeFilter",this.filterWord)},handleSearch:function(){this.$emit("handleChangeFilter",this.filterWord)},changeDate:function(t){this.$emit("handleChangeFilter",this.filterWord)},handleCp:function(t){var e=t.target.getAttribute("data-type"),i=t.target.getAttribute("data-index");e?(this.filterWord.cpxbh=e,this.filterWord.cpxmc=this.cpList[i].cpxmc):(this.filterWord.cpxbh="",this.filterWord.cpxmc=""),this.$emit("handleChangeFilter",this.filterWord)},handleZt:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.filterWord.fwzt=e,this.$emit("handleChangeFilter",this.filterWord))},handleSfgq:function(t){var e=t.target.getAttribute("data-type");null!=e&&(this.filterWord.sfgq=e,this.$emit("handleChangeFilter",this.filterWord))},getSpecialServiceCPX:function(){var t=this;this.$get(this.API.getSpecialServiceCPX,{}).then(function(e){"success"==e.state&&(t.cpList=e.data,sessionStorage.setItem("fwlx",s()(t.cpList)))})}},mounted:function(){this.getSpecialServiceCPX()},activated:function(){},watch:{},components:{}}),l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"query-condition"},[t.filterList.includes("keyword")?i("div",{attrs:{flex:""}},[i("p"),i("p",{staticClass:"query-title"},[i("span",{class:{expandIcon:!0,"el-icon-arrow-up":1==this.sfzk,"el-icon-arrow-down":0==this.sfzk},attrs:{title:this.sfzk?"点击收起筛选条件":"点击展开筛选条件"},on:{click:t.handleExpand}}),t._v("　高级搜索:")]),t._v(" "),i("el-input",{staticStyle:{width:"487px"},attrs:{size:"mini",placeholder:t.placeholder},on:{change:t.handleSearch},model:{value:t.filterWord.keyword,callback:function(e){t.$set(t.filterWord,"keyword",e)},expression:"filterWord.keyword"}}),t._v("　\n        "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handleSearchBtn}},[t._v("查询")]),t._v(" "),i("p")],1):t._e(),t._v(" "),i("transition",{attrs:{name:"el-zoom-in-top"}},[t.sfzk?i("section",{staticClass:"query-condition"},[t.filterList.includes("date")?i("div",[i("span",{staticClass:"query-title"},[t._v("计划日期:")]),t._v(" "),i("p",[i("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"选择开始日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:t.changeDate},model:{value:t.filterWord.jhksrq,callback:function(e){t.$set(t.filterWord,"jhksrq",e)},expression:"filterWord.jhksrq"}}),t._v("\n            　至　\n            "),i("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"选择结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:t.changeDate},model:{value:t.filterWord.jhjsrq,callback:function(e){t.$set(t.filterWord,"jhjsrq",e)},expression:"filterWord.jhjsrq"}})],1)]):t._e(),t._v(" "),t.filterList.includes("cp")?i("div",{attrs:{flex:""}},[i("span",{staticClass:"query-title"},[t._v("产品:")]),t._v(" "),i("p",{staticClass:"query-list",staticStyle:{width:"90%"},on:{click:t.handleCp}},[i("span",{class:{"bg-active":""==t.filterWord.cpxbh},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.cpList,function(e,a){return i("span",{key:a,class:{"bg-active":t.filterWord.cpxbh==e.cpxwid},attrs:{"data-index":a,"data-type":e.cpxwid}},[t._v(t._s(e.cpxmc))])})],2)]):t._e(),t._v(" "),t.filterList.includes("fwzt")?i("div",{attrs:{flex:""}},[i("span",{staticClass:"query-title"},[t._v("服务状态:")]),t._v(" "),i("p",{staticClass:"query-list",staticStyle:{width:"550px"},on:{click:t.handleZt}},[i("span",{class:{"bg-active":""==t.filterWord.fwzt},attrs:{"data-type":""}},[t._v("全部")]),t._v(" "),t._l(t.ztList,function(e,a){return i("span",{key:a,class:{"bg-active":t.filterWord.fwzt==e.lable},attrs:{"data-type":e.lable}},[t._v(t._s(e.mc))])})],2)]):t._e(),t._v(" "),t.filterList.includes("sfgq")?i("div",[i("span",{staticClass:"query-title"},[t._v("是否过期:")]),t._v(" "),i("p",{staticClass:"query-list",on:{click:t.handleSfgq}},t._l(t.gqList,function(e,a){return i("span",{key:a,class:{"bg-active":t.filterWord.sfgq==e.lable},attrs:{"data-type":e.lable}},[t._v(t._s(e.mc))])}))]):t._e(),t._v(" "),t.filterList.includes("jhksrq")?i("div",[i("span",{staticClass:"query-title"},[t._v("计划开始日期:")]),t._v(" "),i("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"选择开始日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:t.changeDate},model:{value:t.filterWord.jhksrqmin,callback:function(e){t.$set(t.filterWord,"jhksrqmin",e)},expression:"filterWord.jhksrqmin"}}),t._v("\n            　至　\n            "),i("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"选择结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:t.changeDate},model:{value:t.filterWord.jhksrqmax,callback:function(e){t.$set(t.filterWord,"jhksrqmax",e)},expression:"filterWord.jhksrqmax"}})],1):t._e(),t._v(" "),t.filterList.includes("jhksrq")?i("div",[i("span",{staticClass:"query-title"},[t._v("计划结束日期:")]),t._v(" "),i("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"选择开始日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:t.changeDate},model:{value:t.filterWord.jhjsrqmin,callback:function(e){t.$set(t.filterWord,"jhjsrqmin",e)},expression:"filterWord.jhjsrqmin"}}),t._v("\n            　至　\n            "),i("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"选择结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:t.changeDate},model:{value:t.filterWord.jhjsrqmax,callback:function(e){t.$set(t.filterWord,"jhjsrqmax",e)},expression:"filterWord.jhjsrqmax"}})],1):t._e(),t._v(" "),t.filterList.includes("tbrq")?i("div",[i("span",{staticClass:"query-title"},[t._v("提报日期:")]),t._v(" "),i("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"选择开始日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:t.changeDate},model:{value:t.filterWord.tbksrq,callback:function(e){t.$set(t.filterWord,"tbksrq",e)},expression:"filterWord.tbksrq"}}),t._v("\n            　至　\n            "),i("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"选择结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:t.changeDate},model:{value:t.filterWord.tbjsrq,callback:function(e){t.$set(t.filterWord,"tbjsrq",e)},expression:"filterWord.tbjsrq"}})],1):t._e(),t._v(" "),t.filterList.includes("qrrq")?i("div",{attrs:{colcenter:""}},[i("span",{staticClass:"query-title"},[t._v("确认日期:")]),t._v(" "),i("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"选择开始日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:t.changeDate},model:{value:t.filterWord.qrksrq,callback:function(e){t.$set(t.filterWord,"qrksrq",e)},expression:"filterWord.qrksrq"}}),t._v("\n            　至　\n            "),i("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"选择结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:t.changeDate},model:{value:t.filterWord.qrjsrq,callback:function(e){t.$set(t.filterWord,"qrjsrq",e)},expression:"filterWord.qrjsrq"}})],1):t._e()]):t._e()])],1)])},staticRenderFns:[]};var o=i("VU/8")(r,l,!1,function(t){i("cLNR")},null,null);e.a=o.exports}});
//# sourceMappingURL=15.1ca7335dac0bc7d6b973.js.map