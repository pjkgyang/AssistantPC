webpackJsonp([110],{WF1j:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("oFuF");var s={data:function(){return{height:window.innerHeight-300,currentPage:1,pageSize:15,records:0,filterData:{keyword:"",gcdq:"",shzt:""},gcdqList:[{label:"全部",id:""},{label:"南区",id:"南区"},{label:"北区",id:"北区"},{label:"其他",id:"其他"}],sfshList:[{label:"全部",id:""},{label:"已审核",id:"1"},{label:"未审核",id:"0"}],tableData:[],fbbhList:[],userGroup:""}},mounted:function(){this.getFbshList(),this.userGroup=JSON.parse(sessionStorage.getItem("userInfo")).userGroupTag},methods:{handleSelectionChange:function(t){var e=this;this.fbbhList=[],t.forEach(function(t){e.fbbhList.push(t.fbbh)})},closeFb:function(){var t=this;this.$confirm("是否确认关闭分包?","提示",{cancelButtonText:"再想想",confirmButtonText:"确定",type:"warning"}).then(function(){t.$post(t.API.closeFb,{fbbh:t.fbbhList.join(",")}).then(function(e){"success"==e.state?(t.$message({message:"已关闭分包",type:"success"}),t.getFbshList()):t.$message({message:e.msg,type:"warning"})})}).catch(function(){})},handleSearch:function(){this.currentPage=1,this.getFbshList()},handleExport:function(){window.open(window.baseurl+"fbxx/exportFbManage.do?keyword="+this.filterData.keyword+"&gcdq="+this.filterData.gcdq+"&shzt="+this.filterData.shzt+"&isfb=1")},CheckGcdz:function(t){this.currentPage=1,this.filterData.gcdq=t,this.getFbshList()},CheckSfsh:function(t){this.currentPage=1,this.filterData.shzt=t||"",this.getFbshList()},handleCurrentChange:function(t){this.currentPage=t,this.getFbshList()},handleSizeChange:function(t){this.currentPage=1,this.pageSize=t,this.getFbshList()},handleClick:function(t,e){if(e){var a=this.$router.resolve({path:"/projectXmfb",query:{xmbh:t.xmbh,xmmc:t.xmmc,fbbh:t.fbbh}});window.open(a.href,"_blank")}else{var s=this.$router.resolve({path:"/projectfbshdetail",query:{xmbh:t.xmbh,fbbh:t.fbbh,r:1}});window.open(s.href,"_blank")}},getFbshList:function(){var t=this;this.$get(this.API.fbManage,{curPage:this.currentPage,pageSize:this.pageSize,gcdq:this.filterData.gcdq,shzt:this.filterData.shzt,isfb:1,keyword:this.filterData.keyword}).then(function(e){"success"==e.state?(e.data.rows?t.tableData=e.data.rows:t.tableData=[],t.records=e.data.records):t.$message({message:e.msg,type:"error"})})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"project_fbsh"},[a("div",{attrs:{flex:""}},[a("span",{staticClass:"query-title",staticStyle:{padding:"2px 4px","margin-right":"10px"}},[t._v("高级查询:")]),t._v(" "),a("el-input",{staticClass:"search-input",staticStyle:{width:"500px"},attrs:{placeholder:"请输入项目编号/项目名称/合同编号/项目经理/学校","prefix-icon":"el-icon-search",size:"small"},on:{change:t.handleSearch},model:{value:t.filterData.keyword,callback:function(e){t.$set(t.filterData,"keyword",e)},expression:"filterData.keyword"}}),t._v("\n\t\t　\n\t\t"),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleSearch}},[t._v("搜索")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleExport}},[t._v("导出")])],1),t._v(" "),-1!=t.userGroup.indexOf("JYGL")?a("div",{staticStyle:{margin:"10px 0"},attrs:{flex:""}},[a("span",{staticClass:"query-title"},[t._v("工程大区:")]),t._v(" "),a("p",{staticClass:"query-list",staticStyle:{width:"90%"}},t._l(t.gcdqList,function(e,s){return a("span",{key:s,class:{"bg-active":e.id==t.filterData.gcdq},on:{click:function(a){t.CheckGcdz(e.id)}}},[t._v(t._s(e.label))])}))]):t._e(),t._v(" "),a("div",{attrs:{flex:""}},[a("span",{staticClass:"query-title"},[t._v("是否审核:")]),t._v(" "),a("p",{staticClass:"query-list"},t._l(t.sfshList,function(e){return a("span",{key:e.id,class:{"bg-active":e.id==t.filterData.shzt},on:{click:function(a){t.CheckSfsh(e.id)}}},[t._v(t._s(e.label))])}))]),t._v(" "),a("br"),t._v(" "),a("el-button",{attrs:{disabled:!t.fbbhList.length,size:"mini",type:"danger"},on:{click:t.closeFb}},[t._v("关闭分包")]),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"left",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{disabled:"02"!=e.row.fbzt&&"04"!=e.row.fbzt,type:"text",size:"small"},on:{click:function(a){t.handleClick(e.row,"edit")}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleClick(e.row)}}},[t._v("详情")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"是否审核",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{size:"mini",type:"已审核"==e.row.shzt?"success":"info"}},[t._v(t._s(e.row.shzt))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"分包状态",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t"+t._s("02"==e.row.fbzt?"审核中":"03"==e.row.fbzt?"招标中":"04"==e.row.fbzt?"审核未通过":"05"==e.row.fbzt?"分包结束":"分包关闭")+"\n\t\t\t\t")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"xmbh",label:"项目编号",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"xmmc",label:"项目名称","min-width":"280",fixed:"left","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"htbh",label:"合同编号",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fbmc",label:"分包名称","min-width":"280","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"fbrxm",label:"分包人",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fbrq",label:"分包时间",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ssfy",label:"分包实施金额",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ekfy",label:"分包二开金额",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{prop:"kbfy",label:"分包可变金额",width:"110"}})],1),t._v(" "),a("div",[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[15,30,50,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.records},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(s,i,!1,function(t){a("lE2l")},"data-v-3f137792",null);e.default=l.exports},lE2l:function(t,e){}});
//# sourceMappingURL=110.bf39f59516ec7c126750.js.map